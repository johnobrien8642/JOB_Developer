{"ast":null,"code":"import _toConsumableArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";//preview files\n/* eslint-disable no-loop-func */import axios from'axios';import Validator from'validator';var handlePostId=function handlePostId(post){if(post.kind==='Like'&&post.kind==='Repost'){return post.post.post._id;}else if(post.kind==='Like'){return post.post._id;}else{return post._id;}};var previewMainImages=function previewMainImages(e,main,mainImageFiles,setMainImageFiles,setErrMessage,errMessage){var files=Object.values(e.currentTarget.files);if(mainImageFiles.length+1>10){setErrMessage(errMessage='Only 10 images can be uploaded here');return;}var readAndPreview=function readAndPreview(file,i){var reader=new FileReader();reader.onloadend=function(){var imgObj={};imgObj.src=reader.result;imgObj.alt=file.name;imgObj.srcType='newImgFile';imgObj._id=null;imgObj.arrPos=mainImageFiles.length;file.arrPos=mainImageFiles.length;main.current.push(imgObj);setMainImageFiles(mainImageFiles=[].concat(_toConsumableArray(mainImageFiles),[file]));};reader.readAsDataURL(file);};if(files){files.forEach(function(f,i){readAndPreview(f,i);});}};var previewProfilePic=function previewProfilePic(e,previewProfilePicRef,profileImageFile,setProfileImageFile){var file=Object.values(e.currentTarget.files);var reader=new FileReader();reader.addEventListener('load',function(){previewProfilePicRef.current.src=reader.result;previewProfilePicRef.current.alt='';setProfileImageFile(profileImageFile=file);},false);if(file[0]){reader.readAsDataURL(file[0]);}};var previewBodyImages=function previewBodyImages(e,body,bodyImageFiles,setBodyImageFiles,setErrMessage,errMessage){var files=Object.values(e.currentTarget.files);if(bodyImageFiles.length+1>10){setErrMessage(errMessage='Only 10 images can be uploaded here');return;}var readAndPreview=function readAndPreview(file,i){var reader=new FileReader();reader.onloadend=function(){var imgObj={};imgObj.src=reader.result;imgObj.alt=file.name;imgObj.srcType='newImgFile';imgObj._id=null;imgObj.arrPos=bodyImageFiles.length;file.arrPos=bodyImageFiles.length;body.current.push(imgObj);setBodyImageFiles(bodyImageFiles=[].concat(_toConsumableArray(bodyImageFiles),[file]));};reader.readAsDataURL(file);};if(files){files.forEach(function(f,i){readAndPreview(f,i);});}};var previewLink=function previewLink(e){if(Validator.isURL(e.target.value)){var imgObj={};imgObj.src=e.target.value;imgObj.alt='';imgObj._id=null;imgObj.kind='Image';imgObj.srcType='newImgLink';return imgObj;}};var previewAudio=function previewAudio(e,mm,audioFile,setAudioFile,title,setTitle,artist,setArtist,album,setAlbum,src,setSrc,active,setActive,objsToClean,post){var file=e.currentTarget.files[0];var reader=new FileReader();reader.onloadend=function(){if(post){objsToClean.current=[post.audioFile];}mm.parseBlob(file).then(function(meta){var common=meta.common;setTitle(title=common.title||'');setArtist(artist=common.artist||'');setAlbum(album=common.album||'');setSrc(src=reader.result);setAudioFile(audioFile=file);setActive(active=true);});};reader.readAsDataURL(file);};var previewVideoFile=function previewVideoFile(e,post,videoObj,setVideoObj,videoFile,setVideoFile,active,setActive,objsToClean){var file=e.currentTarget.files[0];var videoPath=URL.createObjectURL(file);if(post){objsToClean.current=[post.videoLink];}setVideoFile(videoFile=file);setVideoObj(videoObj=videoPath);setActive(active=true);};var previewVideoLink=function previewVideoLink(e,post,videoObj,setVideoObj,videoFile,setVideoFile,active,setActive,objsToClean){if(Validator.isURL(e.target.value)){var matched=new RegExp(/youtube|vimeo|twitch|dailymotion/);if(matched){if(post){objsToClean.current=[post.videoLink];}if(videoFile){setVideoFile(videoFile='');}setVideoObj(videoObj=e.target.value);setActive(active=true);}}};//remove objs\nvar removeMainObj=function removeMainObj(srcType,main,setMainImageFiles,mainImageFiles,objsToClean,mainIdx,optionalArrPos){var plucked=main.current.splice(mainIdx,1);if(srcType==='oldImgUpload'||srcType==='oldImgLink'){objsToClean.current.push(plucked[0]);}if(srcType==='newImgFile'&&mainImageFiles.length===1){setMainImageFiles(mainImageFiles=[]);}else if(srcType==='newImgFile'){var mainImageFileDup=_toConsumableArray(mainImageFiles);//use arrPos key to find correct\n//image file to delete\nmainImageFileDup.forEach(function(file,i){if(file.arrPos===optionalArrPos){mainImageFileDup.splice(i,1);}});//remap arrPos key for bodyImageFiles and newImgFile\n//in main.current, this ensures consistent\n//drag and drop if file is deleted\n//and uploading a new one\nmainImageFileDup.forEach(function(f,i){f.arrPos=i;});var i2=0;main.current.forEach(function(obj,i){if(obj.srcType==='newImgFile'){obj.arrPos=i2;i2++;}});setMainImageFiles(mainImageFiles=mainImageFileDup);}};var removeBodyObj=function removeBodyObj(srcType,body,setBodyImageFiles,bodyImageFiles,objsToClean,bodyIdx,optionalArrPos){var plucked=body.current.splice(bodyIdx,1);if(srcType==='oldImgUpload'||srcType==='oldImgLink'){objsToClean.current.push(plucked[0]);}if(srcType==='newImgFile'&&bodyImageFiles.length===1){setBodyImageFiles(bodyImageFiles=[]);}else if(srcType==='newImgFile'){var bodyImageFileDup=_toConsumableArray(bodyImageFiles);//use arrPos key to find correct\n//image file to delete\nbodyImageFileDup.forEach(function(file,i){if(file.arrPos===optionalArrPos){bodyImageFileDup.splice(i,1);}});//remap arrPos key for bodyImageFiles and newImgFile\n//in body.current, this ensures consistent\n//drag and drop in the case of an image\n//being removed and then a new image added\nbodyImageFileDup.forEach(function(f,i){f.arrPos=i;});var i2=0;body.current.forEach(function(obj,i){if(obj.srcType==='newImgFile'){obj.arrPos=i2;i2++;}});setBodyImageFiles(bodyImageFiles=bodyImageFileDup);}};var removeTag=function removeTag(i,tags,setTags){var filtered=tags.filter(function(t,i2){return i!==i2;});setTags(tags=filtered);};var removeLinkSiteNameAndImage=function removeLinkSiteNameAndImage(siteName,setSitename,imageUrl,setImageUrl,showNameAndUrl,setShowNameAndUrl){setSitename(siteName='');setImageUrl(imageUrl='');setShowNameAndUrl(showNameAndUrl=false);};var removeLinkTitleAndDesc=function removeLinkTitleAndDesc(title,setTitle,setLinkDescription,linkDescription,showTitleAndLinkDescription,setShowTitleAndLinkDescription){setTitle(title='');setLinkDescription(linkDescription='');setShowTitleAndLinkDescription(showTitleAndLinkDescription=false);};var removeAudioObj=function removeAudioObj(post,audioObj,setAudioObj,audioFile,setAudioFile,active,setActive,objsToClean){if(post){objsToClean.current=[post.audioLink];}setAudioFile(audioFile={});setActive(active=false);};var removeVideoObj=function removeVideoObj(post,videoObj,setVideoObj,videoFile,setVideoFile,active,setActive,isLink,setIsLink,objsToClean){if(post){objsToClean.current=[post.videoLink];}setVideoObj(videoObj={});setVideoFile(videoFile={});if(isLink){setIsLink(isLink=false);}setActive(active=false);};var removeProfilePic=function removeProfilePic(previewProfilePicRef,profileImageFile,setProfileImageFile,edit,render,setRender){previewProfilePicRef.current={};setProfileImageFile(profileImageFile=null);if(edit){setRender(render+1);}};//handle tags\nvar handleTagInput=function handleTagInput(tag,setTag,tags,setTags){//eslint-disable-next-line\nvar trimmedTag=tag.trim();var noSingleHash=new RegExp(/^#$/,'g');var validText=trimmedTag.match(noSingleHash);if(!validText){//eslint-disable-next-line\nvar matchText=new RegExp(/[\\w+\\s+'\".,!@$%&*()_+=?<>;:-]*/,'g');var cleanedText=tag.match(matchText);if(cleanedText){var cleanedArr=cleanedText.filter(function(str){return str!=='';});cleanedArr[0].trim();setTags(tags.concat(\"#\".concat(cleanedArr[0])));setTag(tag='');}}else{setTag(tag='');}};var handleFoundTag=function handleFoundTag(title,setTags,tags,setTag,tag){setTags(tags.concat(title));setTag(tag='');};//drag and drop\nvar drag=function drag(e,i,obj){e.dataTransfer.setData('oldIndex',i);e.dataTransfer.setData('obj',obj);};var onDropBody=function onDropBody(e,i,body,bodyImageFiles){var oldIdx=e.dataTransfer.getData('oldIndex');var obj=e.dataTransfer.getData('obj');var parsedObj=JSON.parse(obj);if(parsedObj.srcType==='newImgFile'){body.current.splice(oldIdx,1);body.current.splice(i,0,parsedObj);var sortedArrBody=[];var filteredBody=body.current.filter(function(obj){return obj.srcType==='newImgFile';});bodyImageFiles.forEach(function(file){filteredBody.forEach(function(obj,i){if(file.arrPos===obj.arrPos){sortedArrBody.splice(i,0,file);}});});return sortedArrBody;}else{body.current.splice(oldIdx,1);body.current.splice(i,0,parsedObj);return _toConsumableArray(bodyImageFiles);}};var onDropMain=function onDropMain(e,i,main,mainImageFiles){var oldIdx=e.dataTransfer.getData('oldIndex');var obj=e.dataTransfer.getData('obj');var parsedObj=JSON.parse(obj);if(parsedObj.srcType==='newImgFile'){//if we're dragging and dropping an uploaded image\n//the main.current needs to tell mainImageFiles\n//how it should be ordered \nmain.current.splice(oldIdx,1);main.current.splice(i,0,parsedObj);var sortedArrMain=[];var filteredMain=main.current.filter(function(obj){return obj.srcType==='newImgFile';});mainImageFiles.forEach(function(file){filteredMain.forEach(function(obj,i){if(file.arrPos===obj.arrPos){sortedArrMain.splice(i,0,file);}});});return sortedArrMain;}else{main.current.splice(oldIdx,1);main.current.splice(i,0,parsedObj);return _toConsumableArray(mainImageFiles);}};var allowDrop=function allowDrop(e){e.preventDefault();};//async link preview\nvar fetchUrlMetadata=function fetchUrlMetadata(link){return axios.post('/api/posts/metadata',{params:{url:link}});};//async file upload\nvar mainPost=function mainPost(mainImagesFormData){return axios.post('/api/posts/images',mainImagesFormData,{headers:{'Content-Type':'undefined'}}).then(function(mainRes){var mainImgObj=mainRes.data;return mainImgObj;});};var bodyPost=function bodyPost(bodyImagesFormData){return axios.post('/api/posts/images',bodyImagesFormData,{headers:{'Content-Type':'undefined'}}).then(function(bodyRes){var bodyImgObj=bodyRes.data;return bodyImgObj;});};var audioPost=function audioPost(audioFileFormData){return axios.post('/api/posts/audio',audioFileFormData,{headers:{'Content-Type':'undefined'}}).then(function(audioRes){var audioObj=audioRes.data;return audioObj;});};var videoPost=function videoPost(videoFileFormData,isLink,videoObj){if(isLink){return axios.post('/api/posts/video',{params:{url:videoObj}}).then(function(videoRes){var videoObj=videoRes.data;return videoObj;});}else{return axios.post('/api/posts/video',videoFileFormData).then(function(videoRes){var videoObj=videoRes.data;return videoObj;});}};//submit functions\nvar handleMentions=function handleMentions(body,stripAllImgs){var descContent=stripAllImgs(body).map(function(d){return d.content;});var mentions=descContent.reduce(function(array,string){var regexMention=new RegExp(/@\\w+/,'gm');return array.concat(string.match(regexMention));},[]);if(mentions[0]!==null){return Array.from(new Set(mentions));}else{return[];}};var discardMentions=function discardMentions(post,mentions,objsToClean){if(post){var oldMentions=post.mentions.map(function(m){return{_id:m._id,mention:'@'+m.mention,kind:'Mention'};});oldMentions.forEach(function(oldM){if(!mentions.includes(oldM.mention)){objsToClean.current.push(oldM);}});}};var handleFormData=function handleFormData(imageFileArr){var formData=new FormData();for(var i=0;i<imageFileArr.length;i++){var file2=imageFileArr[i];formData.append('images',file2);}return formData;};var stripAllImgs=function stripAllImgs(refArray){return refArray.current.filter(function(obj){if(obj.srcType==='text'||obj.srcType==='oldText'){return true;}else{return false;}});};var handleUploadedFiles=function handleUploadedFiles(refArray,uploads){//reinsert uploads\n//at index and reset displayIdx\nvar refArrayDup=_toConsumableArray(refArray.current);var i1=0;refArrayDup.forEach(function(obj,i){var upload=uploads[i1];if(obj.srcType==='newImgFile'){upload.displayIdx=i;refArrayDup.splice(i,1,upload);i1++;}});return refArrayDup.filter(function(obj){return obj.srcType!=='text';});};var handleAllTextAudioPost=function handleAllTextAudioPost(allText,descriptions,title,artist,album){allText.current+=title+' '+artist+' '+album;descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});};var handleAllTextTextPost=function handleAllTextTextPost(allText,descriptions,title){allText.current+=title+' ';descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});};var handleAllTextChatPost=function handleAllTextChatPost(allText,descriptions,chat){var span2=document.createElement('span');span2.innerHTML=chat;allText.current+=span2.textContent;descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});};var handleAllTextLinkPost=function handleAllTextLinkPost(allText,descriptions,linkObj){descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});Object.values(linkObj).forEach(function(string){allText.current+=string;});};var handleAllTextPhotoPost=function handleAllTextPhotoPost(allText,descriptions){descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});};var handleAllTextQuotePost=function handleAllTextQuotePost(allText,descriptions,quote,source){allText.current+=quote;allText.current+=source;descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});};var handleAllTextVideoPost=function handleAllTextVideoPost(allText,descriptions){descriptions.forEach(function(d){var span=document.createElement('span');span.innerHTML=d.content;allText.current+=span.textContent;});};//display idx helper\nvar resetDisplayIdx=function resetDisplayIdx(refArr){refArr.current.forEach(function(obj,i){obj.displayIdx=i;});};//update helper\nvar isUpdate=function isUpdate(post){if(post){return true;}else{return false;}};//CKEditor helpers\nfunction MentionCustomization(editor){// The upcast converter will convert view <a class=\"mention\" href=\"\" data-user-id=\"\">\n// elements to the model 'mention' text attribute.\neditor.conversion.for('upcast').elementToAttribute({view:{name:'a',key:'data-mention',classes:'mention',attributes:{href:true,'data-user-id':true}},model:{key:'mention',value:function value(viewItem){// The mention feature expects that the mention attribute value\n// in the model is a plain object with a set of additional attributes.\n// In order to create a proper object use the toMentionAttribute() helper method:\nvar mentionAttribute=editor.plugins.get('Mention').toMentionAttribute(viewItem,{// Add any other properties that you need.\nlink:viewItem.getAttribute('href'),userId:viewItem.getAttribute('data-user-id')});return mentionAttribute;}},converterPriority:'high'});// Downcast the model 'mention' text attribute to a view <a> element.\neditor.conversion.for('downcast').attributeToElement({model:'mention',view:function view(modelAttributeValue,_ref){var writer=_ref.writer;// Do not convert empty attributes (lack of value means no mention).\nif(!modelAttributeValue){return;}return writer.createAttributeElement('a',{class:'mention','data-mention':modelAttributeValue.id,'data-user-id':modelAttributeValue.actualId,'href':\"http://localhost:3000/#/view/blog/\".concat(modelAttributeValue.id.slice(1,modelAttributeValue.id.length))},{// Make mention attribute to be wrapped by other attribute elements.\npriority:20,// Prevent merging mentions together.\nid:modelAttributeValue.uid});},converterPriority:'high'});}//handle scrolling\nvar preventScroll=function preventScroll(activeVar,document){if(activeVar){document.body.style.height='100%';document.body.style.overflow='hidden';}};var allowScroll=function allowScroll(document){document.body.style.height='';document.body.style.overflow='';};var PostFormUtil={handlePostId:handlePostId,previewMainImages:previewMainImages,previewBodyImages:previewBodyImages,previewLink:previewLink,previewAudio:previewAudio,previewVideoFile:previewVideoFile,previewVideoLink:previewVideoLink,previewProfilePic:previewProfilePic,removeMainObj:removeMainObj,removeBodyObj:removeBodyObj,removeAudioObj:removeAudioObj,removeVideoObj:removeVideoObj,removeProfilePic:removeProfilePic,removeTag:removeTag,handleTagInput:handleTagInput,handleFoundTag:handleFoundTag,drag:drag,onDropBody:onDropBody,onDropMain:onDropMain,allowDrop:allowDrop,removeLinkSiteNameAndImage:removeLinkSiteNameAndImage,removeLinkTitleAndDesc:removeLinkTitleAndDesc,fetchUrlMetadata:fetchUrlMetadata,mainPost:mainPost,bodyPost:bodyPost,audioPost:audioPost,videoPost:videoPost,handleFormData:handleFormData,stripAllImgs:stripAllImgs,handleUploadedFiles:handleUploadedFiles,handleMentions:handleMentions,discardMentions:discardMentions,handleAllTextAudioPost:handleAllTextAudioPost,handleAllTextTextPost:handleAllTextTextPost,handleAllTextChatPost:handleAllTextChatPost,handleAllTextLinkPost:handleAllTextLinkPost,handleAllTextPhotoPost:handleAllTextPhotoPost,handleAllTextQuotePost:handleAllTextQuotePost,handleAllTextVideoPost:handleAllTextVideoPost,resetDisplayIdx:resetDisplayIdx,isUpdate:isUpdate,MentionCustomization:MentionCustomization,preventScroll:preventScroll,allowScroll:allowScroll};export default PostFormUtil;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/functions/post_form_util.js"],"names":["axios","Validator","handlePostId","post","kind","_id","previewMainImages","e","main","mainImageFiles","setMainImageFiles","setErrMessage","errMessage","files","Object","values","currentTarget","length","readAndPreview","file","i","reader","FileReader","onloadend","imgObj","src","result","alt","name","srcType","arrPos","current","push","readAsDataURL","forEach","f","previewProfilePic","previewProfilePicRef","profileImageFile","setProfileImageFile","addEventListener","previewBodyImages","body","bodyImageFiles","setBodyImageFiles","previewLink","isURL","target","value","previewAudio","mm","audioFile","setAudioFile","title","setTitle","artist","setArtist","album","setAlbum","setSrc","active","setActive","objsToClean","parseBlob","then","meta","common","previewVideoFile","videoObj","setVideoObj","videoFile","setVideoFile","videoPath","URL","createObjectURL","videoLink","previewVideoLink","matched","RegExp","removeMainObj","mainIdx","optionalArrPos","plucked","splice","mainImageFileDup","i2","obj","removeBodyObj","bodyIdx","bodyImageFileDup","removeTag","tags","setTags","filtered","filter","t","removeLinkSiteNameAndImage","siteName","setSitename","imageUrl","setImageUrl","showNameAndUrl","setShowNameAndUrl","removeLinkTitleAndDesc","setLinkDescription","linkDescription","showTitleAndLinkDescription","setShowTitleAndLinkDescription","removeAudioObj","audioObj","setAudioObj","audioLink","removeVideoObj","isLink","setIsLink","removeProfilePic","edit","render","setRender","handleTagInput","tag","setTag","trimmedTag","trim","noSingleHash","validText","match","matchText","cleanedText","cleanedArr","str","concat","handleFoundTag","drag","dataTransfer","setData","onDropBody","oldIdx","getData","parsedObj","JSON","parse","sortedArrBody","filteredBody","onDropMain","sortedArrMain","filteredMain","allowDrop","preventDefault","fetchUrlMetadata","link","params","url","mainPost","mainImagesFormData","headers","mainRes","mainImgObj","data","bodyPost","bodyImagesFormData","bodyRes","bodyImgObj","audioPost","audioFileFormData","audioRes","videoPost","videoFileFormData","videoRes","handleMentions","stripAllImgs","descContent","map","d","content","mentions","reduce","array","string","regexMention","Array","from","Set","discardMentions","oldMentions","m","mention","oldM","includes","handleFormData","imageFileArr","formData","FormData","file2","append","refArray","handleUploadedFiles","uploads","refArrayDup","i1","upload","displayIdx","handleAllTextAudioPost","allText","descriptions","span","document","createElement","innerHTML","textContent","handleAllTextTextPost","handleAllTextChatPost","chat","span2","handleAllTextLinkPost","linkObj","handleAllTextPhotoPost","handleAllTextQuotePost","quote","source","handleAllTextVideoPost","resetDisplayIdx","refArr","isUpdate","MentionCustomization","editor","conversion","for","elementToAttribute","view","key","classes","attributes","href","model","viewItem","mentionAttribute","plugins","get","toMentionAttribute","getAttribute","userId","converterPriority","attributeToElement","modelAttributeValue","writer","createAttributeElement","class","id","actualId","slice","priority","uid","preventScroll","activeVar","style","height","overflow","allowScroll","PostFormUtil"],"mappings":"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","sourcesContent":["//preview files\n/* eslint-disable no-loop-func */\nimport axios from 'axios';\nimport Validator from 'validator';\n\nconst handlePostId = (post) => {\n  if (post.kind === 'Like' && post.kind === 'Repost') {\n    return post.post.post._id\n  } else if (post.kind === 'Like') {\n    return post.post._id\n  } else {\n    return post._id\n  }\n}\n\nconst previewMainImages = (\n  e, \n  main,\n  mainImageFiles,\n  setMainImageFiles,\n  setErrMessage,\n  errMessage,\n) => {\n\n  const files = Object.values(e.currentTarget.files)\n\n  if (mainImageFiles.length + 1 > 10) {\n\n    setErrMessage(errMessage = 'Only 10 images can be uploaded here')\n    return\n\n  }\n\n  const readAndPreview = (file, i) => {\n\n    var reader = new FileReader();\n\n    reader.onloadend = () => {\n\n      var imgObj = {};\n      imgObj.src = reader.result\n      imgObj.alt = file.name\n      imgObj.srcType = 'newImgFile'\n      imgObj._id = null\n      imgObj.arrPos = mainImageFiles.length\n      file.arrPos = mainImageFiles.length\n\n\n      main.current.push(imgObj)\n      setMainImageFiles(mainImageFiles = [...mainImageFiles, file])\n\n    }\n\n    reader.readAsDataURL(file);\n\n  }\n\n  if (files) {\n    files.forEach((f, i) => {\n       readAndPreview(f, i)\n    });\n  }\n}\n\nconst previewProfilePic = (\n  e,\n  previewProfilePicRef,\n  profileImageFile,\n  setProfileImageFile\n) => {\n  const file = Object.values(e.currentTarget.files)\n\n  var reader = new FileReader();\n\n  reader.addEventListener('load', () => {\n    previewProfilePicRef.current.src = reader.result\n    previewProfilePicRef.current.alt = ''\n    setProfileImageFile(profileImageFile = file)\n  }, false)\n\n  if (file[0]) {\n    reader.readAsDataURL(file[0])\n  }\n}\n\nconst previewBodyImages = (\n    e, \n    body, \n    bodyImageFiles,\n    setBodyImageFiles,\n    setErrMessage, \n    errMessage\n  ) => {\n\n  const files = Object.values(e.currentTarget.files)\n\n  if (bodyImageFiles.length + 1 > 10) {\n\n    setErrMessage(errMessage = 'Only 10 images can be uploaded here')\n    return\n\n  }\n  \n  const readAndPreview = (file, i) => {\n\n    var reader = new FileReader();\n\n    reader.onloadend = () => {\n\n      var imgObj = {};\n      imgObj.src = reader.result\n      imgObj.alt = file.name\n      imgObj.srcType = 'newImgFile'\n      imgObj._id = null\n      imgObj.arrPos = bodyImageFiles.length\n      file.arrPos = bodyImageFiles.length\n\n      body.current.push(imgObj)\n      setBodyImageFiles(bodyImageFiles = [...bodyImageFiles, file])\n    }\n\n    reader.readAsDataURL(file);\n\n  }\n\n  if (files) {\n    files.forEach((f, i) => {\n      readAndPreview(f, i)\n    });\n  }\n}\n\nconst previewLink = (\n  e\n) => {\n  if (Validator.isURL(e.target.value)) {\n    var imgObj = {}\n    imgObj.src = e.target.value\n    imgObj.alt = ''\n    imgObj._id = null\n    imgObj.kind = 'Image'\n    imgObj.srcType = 'newImgLink'\n\n    return imgObj\n  }\n}\n\nconst previewAudio = (\n  e,\n  mm,\n  audioFile,\n  setAudioFile,\n  title,\n  setTitle,\n  artist,\n  setArtist,\n  album,\n  setAlbum,\n  src,\n  setSrc,\n  active,\n  setActive,\n  objsToClean,\n  post\n) => {\n  const file = e.currentTarget.files[0]\n  \n  var reader = new FileReader();\n\n  reader.onloadend = () => {\n    if (post) {\n      objsToClean.current = [post.audioFile]\n    }\n\n    mm.parseBlob(file).then(meta => {\n      const { common } = meta;\n      setTitle(title = common.title || '') \n      setArtist(artist = common.artist || '') \n      setAlbum(album = common.album || '') \n      setSrc(src = reader.result)\n      setAudioFile(audioFile = file)\n      setActive(active = true)\n    })\n  }\n\n  reader.readAsDataURL(file)\n}\n\nconst previewVideoFile = (\n  e,\n  post,\n  videoObj,\n  setVideoObj,\n  videoFile,\n  setVideoFile,\n  active, \n  setActive,\n  objsToClean\n) => {\n  const file = e.currentTarget.files[0]\n  const videoPath = URL.createObjectURL(file)\n\n  if (post) {\n    objsToClean.current = [post.videoLink]\n  }\n\n  setVideoFile(videoFile = file)\n  setVideoObj(videoObj = videoPath)\n  setActive(active = true)\n}\n\nconst previewVideoLink = (\n  e,\n  post,\n  videoObj,\n  setVideoObj,\n  videoFile,\n  setVideoFile,\n  active, \n  setActive,\n  objsToClean\n) => {\n  if (Validator.isURL(e.target.value)) {\n    var matched = new RegExp(/youtube|vimeo|twitch|dailymotion/)\n\n    if (matched) {\n      if (post) {\n        objsToClean.current = [post.videoLink]\n      }\n\n      if (videoFile) {\n        setVideoFile(videoFile = '')\n      }\n\n      setVideoObj(videoObj = e.target.value)\n      setActive(active = true)\n    }\n  }\n}\n\n//remove objs\n\nconst removeMainObj = (\n    srcType, \n    main, \n    setMainImageFiles,\n    mainImageFiles,\n    objsToClean,\n    mainIdx, \n    optionalArrPos\n  ) => {\n\n  var plucked = main.current.splice(mainIdx, 1)\n  if (srcType === 'oldImgUpload' || srcType === 'oldImgLink') {\n    objsToClean.current.push(plucked[0])\n  }\n\n  if (srcType === 'newImgFile' && mainImageFiles.length === 1) {\n\n    setMainImageFiles(mainImageFiles = [])\n\n  } else if (srcType === 'newImgFile') {\n    var mainImageFileDup = [...mainImageFiles]\n\n    //use arrPos key to find correct\n    //image file to delete\n    mainImageFileDup.forEach((file, i) => {\n      if (file.arrPos === optionalArrPos) {\n        mainImageFileDup.splice(i, 1)\n      }\n    })\n\n    //remap arrPos key for bodyImageFiles and newImgFile\n    //in main.current, this ensures consistent\n    //drag and drop if file is deleted\n    //and uploading a new one\n    mainImageFileDup.forEach((f, i) => {\n      f.arrPos = i\n    })\n    \n    var i2 = 0\n    main.current.forEach((obj, i) => {\n      if (obj.srcType === 'newImgFile') {\n        obj.arrPos = i2\n        i2++\n      }\n    })\n\n    setMainImageFiles(mainImageFiles = mainImageFileDup)\n\n  }\n}\n\nconst removeBodyObj = (\n    srcType, \n    body,\n    setBodyImageFiles, \n    bodyImageFiles,\n    objsToClean, \n    bodyIdx,\n    optionalArrPos\n  ) => {\n  \n  var plucked = body.current.splice(bodyIdx, 1)\n  if (srcType === 'oldImgUpload' || srcType === 'oldImgLink') {\n    objsToClean.current.push(plucked[0])\n  }\n\n  if (srcType === 'newImgFile' && bodyImageFiles.length === 1) {\n\n    setBodyImageFiles(bodyImageFiles = [])\n\n  } else if (srcType === 'newImgFile') {\n    var bodyImageFileDup = [...bodyImageFiles]\n\n    //use arrPos key to find correct\n    //image file to delete\n    bodyImageFileDup.forEach((file, i) => {\n      if (file.arrPos === optionalArrPos) {\n        bodyImageFileDup.splice(i, 1)\n      }\n    })\n\n    //remap arrPos key for bodyImageFiles and newImgFile\n    //in body.current, this ensures consistent\n    //drag and drop in the case of an image\n    //being removed and then a new image added\n    bodyImageFileDup.forEach((f, i) => {\n      f.arrPos = i\n    })\n    \n    var i2 = 0\n    body.current.forEach((obj, i) => {\n      if (obj.srcType === 'newImgFile') {\n        obj.arrPos = i2\n        i2++\n      }\n    })\n\n    setBodyImageFiles(bodyImageFiles = bodyImageFileDup)\n\n  }\n}\n\nconst removeTag = (i, tags, setTags) => {\n  var filtered = tags.filter((t, i2) => i !== i2)\n  setTags(tags = filtered)\n}\n\nconst removeLinkSiteNameAndImage = (\n  siteName, \n  setSitename,\n  imageUrl, \n  setImageUrl,\n  showNameAndUrl,\n  setShowNameAndUrl,\n) => {\n  setSitename(siteName = '')\n  setImageUrl(imageUrl = '')\n  setShowNameAndUrl(showNameAndUrl = false)\n}\n\nconst removeLinkTitleAndDesc = (\n  title, \n  setTitle,\n  setLinkDescription,\n  linkDescription,\n  showTitleAndLinkDescription,\n  setShowTitleAndLinkDescription,\n) => {\n  setTitle(title = '')\n  setLinkDescription(linkDescription = '')\n  setShowTitleAndLinkDescription(showTitleAndLinkDescription = false)\n}\n\nconst removeAudioObj = (\n  post,\n  audioObj,\n  setAudioObj,\n  audioFile,\n  setAudioFile,\n  active, \n  setActive,\n  objsToClean\n) => {\n  if (post) {\n    objsToClean.current = [post.audioLink]\n  }\n\n  setAudioFile(audioFile = {})\n  setActive(active = false)\n}\n\nconst removeVideoObj = (\n  post,\n  videoObj,\n  setVideoObj,\n  videoFile,\n  setVideoFile,\n  active, \n  setActive,\n  isLink,\n  setIsLink,\n  objsToClean\n) => {\n  if (post) {\n    objsToClean.current = [post.videoLink]\n  }\n\n  setVideoObj(videoObj = {})\n  setVideoFile(videoFile = {})\n  if (isLink) {\n    setIsLink(isLink = false)\n  }\n  setActive(active = false)\n}\n\nconst removeProfilePic = (\n  previewProfilePicRef,\n  profileImageFile,\n  setProfileImageFile,\n  edit, \n  render,\n  setRender\n) => {\n  previewProfilePicRef.current = {}\n  setProfileImageFile(profileImageFile = null)\n  \n  if (edit) {\n    setRender(render + 1)\n  }\n}\n\n//handle tags\n\nconst handleTagInput = (\n    tag, \n    setTag,\n    tags, \n    setTags\n  ) => {\n  //eslint-disable-next-line\n  var trimmedTag = tag.trim()\n    \n  var noSingleHash = new RegExp(/^#$/, 'g')\n  var validText = trimmedTag.match(noSingleHash)\n  \n  if (!validText) {\n    //eslint-disable-next-line\n    var matchText = new RegExp(/[\\w+\\s+'\".,!@$%&*()_+=?<>;:-]*/, 'g')\n    var cleanedText = tag.match(matchText)\n    if (cleanedText) {\n      var cleanedArr = cleanedText.filter(str => str !== '')\n      cleanedArr[0].trim()\n      setTags(tags.concat(`#${cleanedArr[0]}`))\n      setTag(tag = '')\n    }\n  } else {\n    setTag(tag = '')\n  }\n}\n\nconst handleFoundTag = (\n    title, \n    setTags,\n    tags, \n    setTag,\n    tag\n  ) => {\n  setTags(tags.concat(title))\n  setTag(tag = '')\n}\n\n//drag and drop\n\nconst drag = (e, i, obj) => {\n  e.dataTransfer.setData('oldIndex', i)\n  e.dataTransfer.setData('obj', obj)\n}\n\nconst onDropBody = (\n  e, \n  i, \n  body, \n  bodyImageFiles\n) => {\n  let oldIdx = e.dataTransfer.getData('oldIndex')\n  let obj = e.dataTransfer.getData('obj')\n  let parsedObj = JSON.parse(obj)\n  \n  if (parsedObj.srcType === 'newImgFile') {\n\n    body.current.splice(oldIdx, 1)\n    body.current.splice(i, 0, parsedObj)\n\n    let sortedArrBody = [];\n    let filteredBody = body.current.filter(obj => obj.srcType === 'newImgFile');\n\n    bodyImageFiles.forEach((file) => {\n      filteredBody.forEach((obj, i) => {\n        if (file.arrPos === obj.arrPos) {\n          sortedArrBody.splice(i, 0, file)\n        }\n      })\n    })\n    \n    return sortedArrBody\n\n  } else {\n    body.current.splice(oldIdx, 1)\n    body.current.splice(i, 0, parsedObj)\n    \n    return [...bodyImageFiles]\n  }\n}\n\nconst onDropMain = (\n  e, \n  i, \n  main,\n  mainImageFiles\n) => {\n  var oldIdx = e.dataTransfer.getData('oldIndex')\n  var obj = e.dataTransfer.getData('obj')\n  var parsedObj = JSON.parse(obj)\n\n  if (parsedObj.srcType === 'newImgFile') {\n    //if we're dragging and dropping an uploaded image\n    //the main.current needs to tell mainImageFiles\n    //how it should be ordered \n    main.current.splice(oldIdx, 1)\n    main.current.splice(i, 0, parsedObj)\n  \n    let sortedArrMain = [];\n    let filteredMain = main.current.filter(obj => obj.srcType === 'newImgFile');\n    \n    mainImageFiles.forEach((file) => {\n      filteredMain.forEach((obj, i) => {\n        if (file.arrPos === obj.arrPos) {\n          sortedArrMain.splice(i, 0, file)\n        }\n      })\n    })\n\n    return sortedArrMain\n  } else {\n    main.current.splice(oldIdx, 1)\n    main.current.splice(i, 0, parsedObj)\n\n    return [...mainImageFiles]\n  }\n}\n\nconst allowDrop = (e) => {\n  e.preventDefault();\n}\n\n//async link preview\n\nconst fetchUrlMetadata = (link) => {\n  return axios.post('/api/posts/metadata', {\n    params: {\n      url: link\n    }\n  })\n}\n\n//async file upload\n\nconst mainPost = (\n  mainImagesFormData\n) => {\n  return axios.post('/api/posts/images', mainImagesFormData, {\n    headers: {\n      'Content-Type': 'undefined'\n    }\n  }).then(mainRes => {\n    let mainImgObj = mainRes.data;\n    return mainImgObj\n  })\n}\n\nconst bodyPost = (\n  bodyImagesFormData\n) => {\n  return axios.post('/api/posts/images', bodyImagesFormData, {\n    headers: {\n      'Content-Type': 'undefined'\n    }\n  }).then(bodyRes => {\n    let bodyImgObj = bodyRes.data;\n    return bodyImgObj\n  })\n}\n\nconst audioPost = (\n  audioFileFormData\n) => {\n  return axios.post('/api/posts/audio', audioFileFormData, {\n    headers: {\n      'Content-Type': 'undefined'\n    }\n  }).then(audioRes => {\n    let audioObj = audioRes.data\n    return audioObj\n  })\n}\n\nconst videoPost = (\n  videoFileFormData,\n  isLink,\n  videoObj\n) => {\n  if (isLink) {\n    return axios.post('/api/posts/video', {\n      params: {\n        url: videoObj\n      }\n    }).then(videoRes => {\n      let videoObj = videoRes.data\n      return videoObj\n    })\n  } else {\n    return axios.post('/api/posts/video', videoFileFormData).then(videoRes => {\n      let videoObj = videoRes.data\n      return videoObj\n    })\n  }\n}\n\n//submit functions\n\nconst handleMentions = (body, stripAllImgs) => {\n  var descContent = stripAllImgs(body).map(d => d.content)\n  var mentions = descContent.reduce((array, string) => {\n    var regexMention = new RegExp(/@\\w+/, 'gm')\n    return array.concat(string.match(regexMention))\n  }, [])\n  \n  if (mentions[0] !== null) {\n    return Array.from(new Set(mentions))\n  } else {\n    return []\n  }\n\n}\n\nconst discardMentions = (post, mentions, objsToClean) => {\n  if (post) {\n    var oldMentions = post.mentions.map(m => ({\n      _id: m._id,\n      mention: '@' + m.mention,\n      kind: 'Mention'\n    }))\n\n    oldMentions.forEach(oldM => {\n      if (!mentions.includes(oldM.mention)) {\n        objsToClean.current.push(oldM)\n      }\n    })\n  }\n}\n\nconst handleFormData = (\n  imageFileArr\n) => {\n  var formData = new FormData();\n  \n  for (var i = 0; i < imageFileArr.length; i++) {\n    var file2 = imageFileArr[i];\n    formData.append('images', file2);\n  }\n  \n  return formData\n}\n\nconst stripAllImgs = (refArray) => {\n  return refArray.current.filter(obj => {\n    if (\n      obj.srcType === 'text' ||\n      obj.srcType === 'oldText'\n    ) {\n      return true\n    } else {\n      return false\n    }\n  })\n}\n\nconst handleUploadedFiles = (\n  refArray,\n  uploads\n) => {\n  //reinsert uploads\n  //at index and reset displayIdx\n  var refArrayDup = [...refArray.current]\n\n  var i1 = 0\n  refArrayDup.forEach((obj, i) => {\n    var upload = uploads[i1]\n    if (obj.srcType === 'newImgFile') {\n      upload.displayIdx = i\n      refArrayDup.splice(i, 1, upload)\n      i1++\n    }\n  })\n  \n  return refArrayDup.filter(obj => obj.srcType !== 'text')\n}\n\nconst handleAllTextAudioPost = (allText, descriptions, title, artist, album) => {\n\n  allText.current += title + ' ' + artist + ' ' + album\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n\n}\n\nconst handleAllTextTextPost = (allText, descriptions, title) => {\n\n  allText.current += title + ' '\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n  \n}\n\nconst handleAllTextChatPost = (allText, descriptions, chat) => {\n\n  var span2 = document.createElement('span')\n  span2.innerHTML = chat\n\n  allText.current += span2.textContent\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n\n}\n\nconst handleAllTextLinkPost = (allText, descriptions, linkObj) => {\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n\n  Object.values(linkObj).forEach(string => {\n    allText.current += string\n  })\n}\n\nconst handleAllTextPhotoPost = (allText, descriptions) => {\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n}\n\nconst handleAllTextQuotePost = (allText, descriptions, quote, source) => {\n  \n  allText.current += quote\n  allText.current += source\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n\n}\n\nconst handleAllTextVideoPost = (allText, descriptions) => {\n\n  descriptions.forEach(d => {\n    var span = document.createElement('span')\n    span.innerHTML = d.content\n    allText.current += span.textContent\n  })\n}\n\n\n//display idx helper\n\nconst resetDisplayIdx = (refArr) => {\n  refArr.current.forEach((obj, i) => {\n    obj.displayIdx = i\n  })\n}\n\n//update helper\n\nconst isUpdate = (post) => {\n  if (post) {\n    return true\n  } else {\n    return false\n  }\n}\n\n//CKEditor helpers\n\nfunction MentionCustomization( editor ) {\n  // The upcast converter will convert view <a class=\"mention\" href=\"\" data-user-id=\"\">\n  // elements to the model 'mention' text attribute.\n  editor.conversion.for( 'upcast' ).elementToAttribute( {\n      view: {\n          name: 'a',\n          key: 'data-mention',\n          classes: 'mention',\n          attributes: {\n              href: true,\n              'data-user-id': true\n          }\n      },\n      model: {\n          key: 'mention',\n          value: viewItem => {\n              // The mention feature expects that the mention attribute value\n              // in the model is a plain object with a set of additional attributes.\n              // In order to create a proper object use the toMentionAttribute() helper method:\n              const mentionAttribute = editor.plugins.get( 'Mention' ).toMentionAttribute( viewItem, {\n                  // Add any other properties that you need.\n                  link: viewItem.getAttribute( 'href' ),\n                  userId: viewItem.getAttribute( 'data-user-id' )\n              } );\n\n              return mentionAttribute;\n          }\n      },\n      converterPriority: 'high'\n  } );\n\n  // Downcast the model 'mention' text attribute to a view <a> element.\n  editor.conversion.for( 'downcast' ).attributeToElement( {\n      model: 'mention',\n      view: ( modelAttributeValue, { writer } ) => {\n          // Do not convert empty attributes (lack of value means no mention).\n          if ( !modelAttributeValue ) {\n              return;\n          }\n\n          return writer.createAttributeElement( 'a', {\n              class: 'mention',\n              'data-mention': modelAttributeValue.id,\n              'data-user-id': modelAttributeValue.actualId,\n              'href': `http://localhost:3000/#/view/blog/${modelAttributeValue.id.slice(1, modelAttributeValue.id.length)}`\n          }, {\n              // Make mention attribute to be wrapped by other attribute elements.\n              priority: 20,\n              // Prevent merging mentions together.\n              id: modelAttributeValue.uid\n          } );\n      },\n      converterPriority: 'high'\n  } );\n}\n\n//handle scrolling\n\nconst preventScroll = (activeVar, document) => {\n  if (activeVar) {\n    document.body.style.height = '100%'\n    document.body.style.overflow = 'hidden'\n  }\n}\n\nconst allowScroll = (document) => {\n  document.body.style.height = ''\n  document.body.style.overflow = ''\n}\n\nconst PostFormUtil = {\n  handlePostId,\n  previewMainImages, \n  previewBodyImages, \n  previewLink,\n  previewAudio, \n  previewVideoFile,\n  previewVideoLink,\n  previewProfilePic,\n  removeMainObj,\n  removeBodyObj, \n  removeAudioObj,\n  removeVideoObj,\n  removeProfilePic,\n  removeTag, \n  handleTagInput, \n  handleFoundTag,\n  drag, \n  onDropBody, \n  onDropMain, \n  allowDrop, \n  removeLinkSiteNameAndImage,\n  removeLinkTitleAndDesc,\n  fetchUrlMetadata, \n  mainPost, \n  bodyPost,\n  audioPost, \n  videoPost,\n  handleFormData, \n  stripAllImgs, \n  handleUploadedFiles,\n  handleMentions, \n  discardMentions,\n  handleAllTextAudioPost, \n  handleAllTextTextPost,\n  handleAllTextChatPost,\n  handleAllTextLinkPost,\n  handleAllTextPhotoPost,\n  handleAllTextQuotePost,\n  handleAllTextVideoPost,\n  resetDisplayIdx,\n  isUpdate, \n  MentionCustomization,\n  preventScroll,\n  allowScroll\n};\n \nexport default PostFormUtil;"]},"metadata":{},"sourceType":"module"}