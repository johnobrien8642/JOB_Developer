{"ast":null,"code":"var _jsxFileName = \"/Users/johnobrien/Desktop/JOB_Developer/client/src/components/user/util/components/Delete_My_Account.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\nimport Mutations from '../../../../graphql/mutations.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  DELETE_MY_ACCOUNT\n} = Mutations;\n\nconst DeleteMyAccount = () => {\n  _s();\n\n  let [active, setActive] = useState(false);\n  let [password, setPassword] = useState('');\n  let [askToConfirm, confirmDelete] = useState(false);\n  let [errorMessage, setError] = useState(null);\n  let [deleteMyAccount] = useMutation(DELETE_MY_ACCOUNT, {\n    onCompleted(data) {\n      resetInputs();\n      setActive(active = false);\n      window.location.reload();\n    },\n\n    onError(error) {\n      console.log(error);\n      setError(errorMessage = error.message);\n    }\n\n  });\n\n  const resetInputs = () => {\n    setPassword(password = '');\n    confirmDelete(askToConfirm = false);\n    setError(errorMessage = '');\n  };\n\n  if (active) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"deleteMyAcct\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Confirm password...\",\n        value: password,\n        onChange: e => {\n          setPassword(password = e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: errorMessage ? `${errorMessage}` : ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"deleteOrCancelContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"save\",\n          type: \"button\",\n          onClick: () => {\n            if (password) {\n              setActive(active = false);\n              confirmDelete(askToConfirm = true);\n            } else {\n              setError(errorMessage = 'You must enter your password');\n            }\n          },\n          children: \"Delete My Account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"cancel\",\n          type: \"button\",\n          onClick: () => {\n            setActive(active = false);\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this);\n  } else if (askToConfirm) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"deleteMyAcct confirm\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"confirmDelete\",\n        onClick: () => {\n          deleteMyAccount({\n            variables: {\n              password: password,\n              query: Cookies.get('currentUser'),\n              token: Cookies.get('auth-token')\n            }\n          });\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Delete my account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"(This action cannot be undone)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"cancel\",\n        type: \"button\",\n        onClick: () => {\n          setPassword(password = '');\n          confirmDelete(askToConfirm = false);\n          setActive(active = false);\n        },\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"deleteMyAcctBtn\",\n        onClick: () => {\n          setActive(active = true);\n          confirmDelete(askToConfirm = true);\n        },\n        children: \"Delete My Account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(DeleteMyAccount, \"zSC7aQCjBVbALeSQ4Om0p36Mn2w=\", false, function () {\n  return [useMutation];\n});\n\n_c = DeleteMyAccount;\nexport default DeleteMyAccount;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteMyAccount\");","map":{"version":3,"sources":["/Users/johnobrien/Desktop/JOB_Developer/client/src/components/user/util/components/Delete_My_Account.js"],"names":["React","useState","useMutation","Cookies","Mutations","DELETE_MY_ACCOUNT","DeleteMyAccount","active","setActive","password","setPassword","askToConfirm","confirmDelete","errorMessage","setError","deleteMyAccount","onCompleted","data","resetInputs","window","location","reload","onError","error","console","log","message","e","target","value","variables","query","get","token"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport Mutations from '../../../../graphql/mutations.js';\nconst { DELETE_MY_ACCOUNT } = Mutations;\n\nconst DeleteMyAccount = () => {\n  let [active, setActive] = useState(false);\n  let [password, setPassword] = useState('');\n  let [askToConfirm, confirmDelete] = useState(false)\n  let [errorMessage, setError] = useState(null)\n\n  let [deleteMyAccount] = useMutation(DELETE_MY_ACCOUNT, {\n    onCompleted(data) {\n      resetInputs();\n      setActive(active = false);\n      window.location.reload();\n    },\n    onError(error) {\n      console.log(error)\n      setError(errorMessage = error.message)\n    }\n  })\n\n  const resetInputs = () => {\n    setPassword(password = '')\n    confirmDelete(askToConfirm = false)\n    setError(errorMessage = '')\n  }\n\n  if (active) {\n    return (\n      <div\n        className='deleteMyAcct'\n      >\n        <input\n          type='password'\n          placeholder='Confirm password...'\n          value={password}\n          onChange={e => {\n            setPassword(password = e.target.value)\n          }}\n        />\n  \n        <p>{errorMessage ? `${errorMessage}` : ''}</p>\n  \n        <div\n          className='deleteOrCancelContainer'\n        >\n          <button\n            className='save'\n            type='button'\n            onClick={() => {\n              if (password) {\n                setActive(active = false)\n                confirmDelete(askToConfirm = true)\n              } else {\n                setError(errorMessage = 'You must enter your password')\n              }\n            }}\n          >\n            Delete My Account\n          </button>\n          <button\n            className='cancel'\n            type='button'\n            onClick={() => {\n              setActive(active = false)\n            }}          \n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    )\n  } else if (askToConfirm) {\n    return (\n      <div\n        className='deleteMyAcct confirm'\n      >\n        <button\n          className='confirmDelete'\n          onClick={() => {\n            deleteMyAccount({\n              variables: {\n                password: password,\n                query: Cookies.get('currentUser'),\n                token: Cookies.get('auth-token')\n              }\n            })\n          }}\n        >\n          <span>Delete my account</span> \n          <span>(This action cannot be undone)</span>\n        </button>\n        <button\n          className='cancel'\n          type='button'\n          onClick={() => {\n            setPassword(password = '')\n            confirmDelete(askToConfirm = false)\n            setActive(active = false)\n          }}\n        >\n          Cancel\n        </button>\n      </div>\n    )\n  } else {\n    return (\n      <React.Fragment>\n        <button\n          className='deleteMyAcctBtn'\n          onClick={() => {\n            setActive(active = true)\n            confirmDelete(askToConfirm = true)\n          }}\n        >\n          Delete My Account\n        </button>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default DeleteMyAccount;"]},"metadata":{},"sourceType":"module"}