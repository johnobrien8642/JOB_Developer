{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{useMutation}from'@apollo/client';import Cookies from'js-cookie';import Queries from'../../../../../graphql/queries';import Mutations from'../../../../../graphql/mutations';import UpdateCacheUtil from'../../functions/update_cache_util.js';import{jsx as _jsx}from\"react/jsx-runtime\";var LIKE_POST=Mutations.LIKE_POST,UNLIKE_POST=Mutations.UNLIKE_POST;var FETCH_LIKES_REPOSTS_AND_COMMENTS=Queries.FETCH_LIKES_REPOSTS_AND_COMMENTS;var postLike=UpdateCacheUtil.postLike,postUnlike=UpdateCacheUtil.postUnlike;var LikeButton=function LikeButton(_ref){var post=_ref.post,liked=_ref.liked,refetchDoesUserLikePost=_ref.refetchDoesUserLikePost;var initial=liked?true:false;var _useState=useState(initial),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1];useEffect(function(){refetchDoesUserLikePost();});var _useMutation=useMutation(LIKE_POST,{update:function update(client,_ref2){var data=_ref2.data;var likePost=data.likePost,query=FETCH_LIKES_REPOSTS_AND_COMMENTS;postLike(client,likePost,post,query);}}),_useMutation2=_slicedToArray(_useMutation,1),likePost=_useMutation2[0];var _useMutation3=useMutation(UNLIKE_POST,{update:function update(client,_ref3){var data=_ref3.data;var unlikePost=data.unlikePost,query=FETCH_LIKES_REPOSTS_AND_COMMENTS;postUnlike(client,unlikePost,post,liked,query);}}),_useMutation4=_slicedToArray(_useMutation3,1),unlikePost=_useMutation4[0];if(status){return/*#__PURE__*/_jsx(\"img\",{className:\"likeBtn\",src:\"https://img.icons8.com/material-rounded/64/000000/like--v1.png\",alt:\"\",onClick:function onClick(){unlikePost({variables:{likeId:liked._id,postId:post._id}});setStatus(status=false);}});}else{return/*#__PURE__*/_jsx(\"img\",{className:\"likeBtn\",src:\"https://img.icons8.com/material-outlined/64/000000/like--v1.png\",alt:\"\",onClick:function onClick(){likePost({variables:{postId:post._id,user:Cookies.get('currentUser'),postKind:post.kind}});setStatus(status=true);}});}};export default LikeButton;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/components/social/Like_Button.js"],"names":["React","useState","useEffect","useMutation","Cookies","Queries","Mutations","UpdateCacheUtil","LIKE_POST","UNLIKE_POST","FETCH_LIKES_REPOSTS_AND_COMMENTS","postLike","postUnlike","LikeButton","post","liked","refetchDoesUserLikePost","initial","status","setStatus","update","client","data","likePost","query","unlikePost","variables","likeId","_id","postId","user","get","postKind","kind"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,gCAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,kCAAtB,CACA,MAAOC,CAAAA,eAAP,KAA4B,sCAA5B,C,2CACA,GAAQC,CAAAA,SAAR,CAAmCF,SAAnC,CAAQE,SAAR,CAAmBC,WAAnB,CAAmCH,SAAnC,CAAmBG,WAAnB,CACA,GAAQC,CAAAA,gCAAR,CAA6CL,OAA7C,CAAQK,gCAAR,CACA,GAAQC,CAAAA,QAAR,CAAiCJ,eAAjC,CAAQI,QAAR,CAAkBC,UAAlB,CAAiCL,eAAjC,CAAkBK,UAAlB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAGb,IAFJC,CAAAA,IAEI,MAFJA,IAEI,CAFEC,KAEF,MAFEA,KAEF,CADJC,uBACI,MADJA,uBACI,CACJ,GAAIC,CAAAA,OAAO,CAAGF,KAAK,CAAG,IAAH,CAAU,KAA7B,CAEA,cAA0Bd,QAAQ,CAACgB,OAAD,CAAlC,wCAAKC,MAAL,eAAaC,SAAb,eAEAjB,SAAS,CAAC,UAAM,CACdc,uBAAuB,GACxB,CAFQ,CAAT,CAIA,iBAAiBb,WAAW,CAACK,SAAD,CAAY,CACtCY,MADsC,iBAC/BC,MAD+B,OACb,IAARC,CAAAA,IAAQ,OAARA,IAAQ,CACjB,GAAEC,CAAAA,QAAF,CAAeD,IAAf,CAAEC,QAAF,CACNC,KADM,CACEd,gCADF,CAGNC,QAAQ,CACNU,MADM,CACEE,QADF,CAENT,IAFM,CAEAU,KAFA,CAAR,CAID,CATqC,CAAZ,CAA5B,8CAAKD,QAAL,kBAYA,kBAAmBpB,WAAW,CAACM,WAAD,CAAc,CAC1CW,MAD0C,iBACnCC,MADmC,OACjB,IAARC,CAAAA,IAAQ,OAARA,IAAQ,CACjB,GAAEG,CAAAA,UAAF,CAAiBH,IAAjB,CAAEG,UAAF,CACND,KADM,CACEd,gCADF,CAGNE,UAAU,CACRS,MADQ,CACAI,UADA,CAERX,IAFQ,CAEFC,KAFE,CAEKS,KAFL,CAAV,CAID,CATyC,CAAd,CAA9B,+CAAKC,UAAL,kBAYA,GAAIP,MAAJ,CAAY,CACV,mBACE,YACE,SAAS,CAAC,SADZ,CAEE,GAAG,CAAC,gEAFN,CAGE,GAAG,CAAC,EAHN,CAIE,OAAO,CAAE,kBAAM,CACbO,UAAU,CAAC,CACTC,SAAS,CAAE,CACTC,MAAM,CAAEZ,KAAK,CAACa,GADL,CAETC,MAAM,CAAEf,IAAI,CAACc,GAFJ,CADF,CAAD,CAAV,CAMAT,SAAS,CAACD,MAAM,CAAG,KAAV,CAAT,CACD,CAZH,EADF,CAgBD,CAjBD,IAiBO,CACL,mBACE,YACE,SAAS,CAAC,SADZ,CAEE,GAAG,CAAC,iEAFN,CAGE,GAAG,CAAC,EAHN,CAIE,OAAO,CAAE,kBAAM,CACbK,QAAQ,CAAC,CACPG,SAAS,CAAE,CACTG,MAAM,CAAEf,IAAI,CAACc,GADJ,CAETE,IAAI,CAAE1B,OAAO,CAAC2B,GAAR,CAAY,aAAZ,CAFG,CAGTC,QAAQ,CAAElB,IAAI,CAACmB,IAHN,CADJ,CAAD,CAAR,CAOAd,SAAS,CAACD,MAAM,CAAG,IAAV,CAAT,CACD,CAbH,EADF,CAiBD,CACF,CAxED,CA0EA,cAAeL,CAAAA,UAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport Queries from '../../../../../graphql/queries';\nimport Mutations from '../../../../../graphql/mutations';\nimport UpdateCacheUtil from '../../functions/update_cache_util.js';\nconst { LIKE_POST, UNLIKE_POST } = Mutations;\nconst { FETCH_LIKES_REPOSTS_AND_COMMENTS } = Queries;\nconst { postLike, postUnlike } = UpdateCacheUtil;\n\nconst LikeButton = ({ \n  post, liked, \n  refetchDoesUserLikePost\n}) => {\n  var initial = liked ? true : false\n\n  let [status, setStatus] = useState(initial)\n\n  useEffect(() => {\n    refetchDoesUserLikePost()\n  })\n\n  let [likePost] = useMutation(LIKE_POST, {\n    update(client, { data }) {\n      const { likePost } = data,\n      query = FETCH_LIKES_REPOSTS_AND_COMMENTS\n\n      postLike(\n        client, likePost,\n        post, query\n      )\n    }\n  })\n\n  let [unlikePost] = useMutation(UNLIKE_POST, {\n    update(client, { data }) {\n      const { unlikePost } = data,\n      query = FETCH_LIKES_REPOSTS_AND_COMMENTS\n\n      postUnlike(\n        client, unlikePost,\n        post, liked, query\n      )\n    }\n  })\n  \n  if (status) {\n    return (\n      <img\n        className='likeBtn'\n        src=\"https://img.icons8.com/material-rounded/64/000000/like--v1.png\"\n        alt=''\n        onClick={() => {\n          unlikePost({\n            variables: {\n              likeId: liked._id,\n              postId: post._id\n            }\n          })\n          setStatus(status = false)\n        }}\n      />\n    )\n  } else {\n    return (\n      <img\n        className='likeBtn'\n        src=\"https://img.icons8.com/material-outlined/64/000000/like--v1.png\"\n        alt=''\n        onClick={() => {\n          likePost({\n            variables: {\n              postId: post._id,\n              user: Cookies.get('currentUser'),\n              postKind: post.kind\n            }\n          })\n          setStatus(status = true)\n        }}\n      />\n    )\n  }\n}\n\nexport default LikeButton;"]},"metadata":{},"sourceType":"module"}