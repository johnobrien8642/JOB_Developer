{"ast":null,"code":"import _toConsumableArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React from'react';import DOMPurify from'dompurify';import{Link}from'react-router-dom';import AudioPlayer from'react-h5-audio-player';import ReactPlayer from'react-player';import UserResult from'../../../search/resultTypes/User_Result';import ProfilePic from'../../../user/util/components/Profile_Pic';import FollowButton from'../../../posts/util/components/social/Follow_Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var postHeader=function postHeader(post,discover,radar,doesUserFollowUserRef,repostFormBool){if(post.kind==='Repost'){return/*#__PURE__*/_jsx(\"div\",{className:\"userRepostHeader\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ProfilePic,{user:post.user}),/*#__PURE__*/_jsx(Link,{to:\"/view/blog/\".concat(post.user.blogName),children:post.user.blogName})]})});}else if(discover||radar){return/*#__PURE__*/_jsx(\"div\",{className:\"postRadarPostHeader discoverPostHeader\",children:/*#__PURE__*/_jsx(UserResult,{user:post.user})});}else if(repostFormBool){return/*#__PURE__*/_jsxs(\"span\",{className:\"repostHeaderExtraProPic\",children:[/*#__PURE__*/_jsx(ProfilePic,{user:post.user,standaloneLink:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"profilePicAndLinkContainer\",children:[/*#__PURE__*/_jsx(ProfilePic,{user:post.user}),/*#__PURE__*/_jsx(Link,{to:\"/view/blog/\".concat(post.user.blogName),children:post.user.blogName})]})]});}else{return/*#__PURE__*/_jsxs(\"span\",{className:\"userPostHeader\",children:[/*#__PURE__*/_jsx(ProfilePic,{user:post.user,standaloneLink:true}),/*#__PURE__*/_jsx(Link,{to:\"/view/blog/\".concat(post.user.blogName),children:post.user.blogName}),/*#__PURE__*/_jsx(FollowButton,{feed:true,user:post.user,followed:doesUserFollowUserRef.current})]});}};var repostFooter=function repostFooter(post,update,repostCaption,setRepostCaption){var repost=post;if(post.kind==='Repost'){return/*#__PURE__*/_jsx(\"ul\",{className:\"repostItemList\",children:repost.repostTrail.map(function(obj,i){return/*#__PURE__*/_jsxs(\"li\",{className:\"repostShowItem\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(ProfilePic,{user:obj.user,activity:{kind:'Repost'}}),/*#__PURE__*/_jsx(Link,{to:\"/view/blog/\".concat(obj.user.blogName),children:obj.user.blogName})]}),/*#__PURE__*/_jsx(\"div\",{className:\"repostCaptionDiv\",contentEditable:update&&i===repost.repostTrail.length-1?true:false,dangerouslySetInnerHTML:{__html:DOMPurify.sanitize(obj.caption)},onInput:function onInput(e){setRepostCaption(repostCaption=e.target.innerHTML);}})]},i);})});}};var postTags=function postTags(post){var data=demeterPost(post);return/*#__PURE__*/_jsx(\"div\",{className:\"postTags\",children:data.tagIds.map(function(tag,i){var cleanedTitle=tag.title.slice(1);return/*#__PURE__*/_jsx(\"div\",{className:\"tag\",children:/*#__PURE__*/_jsx(Link,{to:\"/view/tag/\".concat(cleanedTitle),children:tag.title})},tag._id);})});};var postBody=function postBody(post){var data=demeterPost(post);var descriptionArr=_toConsumableArray(data.descriptionImages);data.descriptions.forEach(function(obj,i){descriptionArr.splice(obj.displayIdx,0,obj);});if(data.kind==='TextPost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"textPostTitle\",children:data.title}),displayDescription(descriptionArr)]});}else if(data.kind==='PhotoPost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mainImageContainer\",children:data.mainImages.map(function(mainImg,i){return/*#__PURE__*/_jsx(\"img\",{className:\"mainImage\",src:\"\".concat(mainImg.src),alt:'usefilename'},i);})}),/*#__PURE__*/_jsx(\"p\",{children:data.description}),displayDescription(descriptionArr)]});}else if(data.kind==='QuotePost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"quote\",children:data.quote}),/*#__PURE__*/_jsx(\"p\",{className:\"source\",children:data.source}),displayDescription(descriptionArr)]});}else if(data.kind==='LinkPost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"linkContainer\",children:/*#__PURE__*/_jsxs(\"a\",{href:data.linkObj.link,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"imgContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imgModal\"}),/*#__PURE__*/_jsx(\"img\",{className:\"siteImage\",src:data.linkObj.imageUrl,alt:'link page img'}),/*#__PURE__*/_jsx(\"h2\",{className:\"siteTitle\",children:data.linkObj.title})]}),/*#__PURE__*/_jsx(\"p\",{className:\"siteDescription\",children:data.linkObj.linkDescription}),/*#__PURE__*/_jsx(\"span\",{className:\"siteName\",children:data.linkObj.siteName})]})}),displayDescription(descriptionArr)]});}else if(data.kind==='ChatPost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"chatDiv\",dangerouslySetInnerHTML:{__html:DOMPurify.sanitize(data.chat)}}),displayDescription(descriptionArr)]});}else if(data.kind==='AudioPost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"audioPlayerContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"audioDataContainer\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"title\",children:data.audioMeta.title}),/*#__PURE__*/_jsx(\"p\",{className:\"artist\",children:data.audioMeta.artist}),/*#__PURE__*/_jsx(\"p\",{className:\"album\",children:data.audioMeta.album})]}),/*#__PURE__*/_jsx(AudioPlayer,{src:data.audioFile.url})]}),displayDescription(descriptionArr)]});}else if(data.kind==='VideoPost'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ReactPlayer,{width:'100%',height:radar?'215px':'360px',url:data.videoLink.url,controls:true}),displayDescription(descriptionArr)]});}};var demeterPost=function demeterPost(post){if(post.kind==='Like'&&post.post.kind==='Repost'){return post.post.post;}else if(post.kind==='Like'||post.kind==='Repost'){return post.post;}else{return post;}};var displayDescription=function displayDescription(descriptionArr){return/*#__PURE__*/_jsx(\"div\",{className:\"descriptionTextAndImage\",children:descriptionArr.map(function(obj,i){switch(obj.kind){case'text':return/*#__PURE__*/_jsx(\"div\",{className:\"descriptionText\",dangerouslySetInnerHTML:{__html:DOMPurify.sanitize(obj.content)}},obj._id);case'Image':return/*#__PURE__*/_jsx(\"div\",{className:\"descriptionImgContainer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"descriptionImg\",src:\"\".concat(obj.src),alt:'usefilename'})},obj._id);default:return'no keys matched postBody PhotoPost';}})});};var handlePostClassName=function handlePostClassName(obj){var demeterPost;if(obj.kind==='Like'){demeterPost=obj.post;}else{demeterPost=obj;}var _demeterPost=demeterPost,kind=_demeterPost.kind;if(kind==='TextPost'){return'post textPost';}else if(kind==='PhotoPost'){return'post photoPost';}else if(kind==='QuotePost'){return'post quotePost';}else if(kind==='LinkPost'){return'post linkPost';}else if(kind==='ChatPost'){return'post chatPost';}else if(kind==='AudioPost'){return'post audioPost';}else if(kind==='VideoPost'){return'post videoPost';}else if(kind==='Repost'){if(demeterPost.post.kind==='TextPost'){return'post repost textPost';}else if(demeterPost.post.kind==='PhotoPost'){return'post repost photoPost';}else if(demeterPost.post.kind==='QuotePost'){return'post repost quotePost';}else if(demeterPost.post.kind==='LinkPost'){return'post repost linkPost';}else if(demeterPost.post.kind==='ChatPost'){return'post repost chatPost';}else if(demeterPost.post.kind==='AudioPost'){return'post repost audioPost';}else if(demeterPost.post.kind==='VideoPost'){return'post repost videoPost';}}};var handleDemeterActivityPost=function handleDemeterActivityPost(activity){if(activity.post.kind==='Repost'){return activity.post.post;}else{return activity.post;}};var PostShowUtil={postHeader:postHeader,postBody:postBody,repostFooter:repostFooter,postTags:postTags,handlePostClassName:handlePostClassName,handleDemeterActivityPost:handleDemeterActivityPost};export default PostShowUtil;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/functions/post_show_util.js"],"names":["React","DOMPurify","Link","AudioPlayer","ReactPlayer","UserResult","ProfilePic","FollowButton","postHeader","post","discover","radar","doesUserFollowUserRef","repostFormBool","kind","user","blogName","current","repostFooter","update","repostCaption","setRepostCaption","repost","repostTrail","map","obj","i","length","__html","sanitize","caption","e","target","innerHTML","postTags","data","demeterPost","tagIds","tag","cleanedTitle","title","slice","_id","postBody","descriptionArr","descriptionImages","descriptions","forEach","splice","displayIdx","displayDescription","mainImages","mainImg","src","description","quote","source","linkObj","link","imageUrl","linkDescription","siteName","chat","audioMeta","artist","album","audioFile","url","videoLink","content","handlePostClassName","handleDemeterActivityPost","activity","PostShowUtil"],"mappings":"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","sourcesContent":["import React from 'react';\nimport DOMPurify from 'dompurify';\nimport { Link } from 'react-router-dom';\nimport AudioPlayer from 'react-h5-audio-player';\nimport ReactPlayer from 'react-player';\nimport UserResult from '../../../search/resultTypes/User_Result';\nimport ProfilePic from '../../../user/util/components/Profile_Pic';\nimport FollowButton from '../../../posts/util/components/social/Follow_Button';\n\nconst postHeader = (\n  post, \n  discover, \n  radar,\n  doesUserFollowUserRef,\n  repostFormBool\n) => {\n  if (post.kind === 'Repost') {\n    return (\n      <div\n        className='userRepostHeader'\n      >\n        <span>\n          <ProfilePic \n            user={post.user}\n          />\n          <Link\n            to={`/view/blog/${post.user.blogName}`}\n          >\n            {post.user.blogName}\n          </Link>\n        </span>\n      </div>\n    )\n  } else if (discover || radar) {\n    return (\n      <div\n        className='postRadarPostHeader discoverPostHeader'\n      >\n        <UserResult user={post.user} />\n      </div>\n    )\n  } else if (repostFormBool) {\n    return (\n      <span\n        className='repostHeaderExtraProPic'\n      >\n        <ProfilePic\n          user={post.user}\n          standaloneLink={true}\n        />\n\n        <div\n          className='profilePicAndLinkContainer'\n        >\n          <ProfilePic \n            user={post.user}\n          />\n\n          <Link\n            to={`/view/blog/${post.user.blogName}`}\n          >\n            {post.user.blogName}\n          </Link>\n        </div>\n      </span>\n    )\n  } else {\n    return (\n      <span\n        className='userPostHeader'\n      >\n        <ProfilePic\n          user={post.user}\n          standaloneLink={true}\n        />\n\n        <Link\n          to={`/view/blog/${post.user.blogName}`}\n        >\n          {post.user.blogName}\n        </Link>\n\n        <FollowButton\n          feed={true}\n          user={post.user}\n          followed={doesUserFollowUserRef.current}\n        />\n      </span>\n    )\n  }\n}\n\nconst repostFooter = (post, update, repostCaption, setRepostCaption) => {\n  let repost = post\n\n  if (post.kind === 'Repost') {\n    return (\n      <ul\n      className='repostItemList'\n      >\n        {repost.repostTrail.map((obj, i) => {\n          return (\n            <li\n              className='repostShowItem'\n              key={i}\n            >\n              <span>\n                <ProfilePic \n                  user={obj.user}\n                  activity={{ kind: 'Repost' }}\n                />\n                <Link to={`/view/blog/${obj.user.blogName}`}>\n                  {obj.user.blogName}\n                </Link>\n              </span>\n\n              <div\n                className='repostCaptionDiv'\n                contentEditable={\n                  update && i === repost.repostTrail.length - 1 ?\n                  true : false\n                }\n                dangerouslySetInnerHTML={{\n                  __html: DOMPurify.sanitize(obj.caption)\n                }}\n                onInput={e => {\n                  setRepostCaption(repostCaption = e.target.innerHTML)\n                }}\n              />\n            </li>\n          )\n        })}\n      </ul>\n    )\n  }\n}\n\nconst postTags = (post) => {\n  var data = demeterPost(post)\n  \n  return (\n  <div\n    className='postTags'\n  >\n    {data.tagIds.map((tag, i) => {\n      var cleanedTitle = tag.title.slice(1)\n      return (\n        <div\n         key={tag._id}\n         className='tag'\n        >\n          <Link \n            to={`/view/tag/${cleanedTitle}`}\n          >\n            {tag.title}\n          </Link>\n        </div>\n      )\n    })}\n    </div>\n  )\n}\n\nconst postBody = (post) => {\n  var data = demeterPost(post)\n  var descriptionArr = [...data.descriptionImages]\n  \n  data.descriptions.forEach((obj, i) => {\n    descriptionArr.splice(obj.displayIdx, 0, obj)\n  })\n  \n  if (data.kind === 'TextPost') {\n    return (\n      <React.Fragment>\n        <h3\n          className='textPostTitle'\n        >\n          {data.title}\n        </h3>\n        {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n\n  } else if (data.kind === 'PhotoPost') {\n    return (\n      <React.Fragment>\n        <div\n          className='mainImageContainer'\n        >\n          {data.mainImages.map((mainImg, i) => {\n            return (\n              <img\n                className='mainImage'\n                key={i} \n                src={`${mainImg.src}`} \n                alt={'usefilename'} \n              />\n            )\n          })}\n        </div>\n        <p>{data.description}</p>\n        {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n\n  } else if (data.kind === 'QuotePost') {\n    \n    return (\n      <React.Fragment>\n        <h1\n          className='quote'\n        >{data.quote}</h1>\n        \n        <p\n          className='source'\n        >\n          {data.source}\n        </p>\n          {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n  } else if (data.kind === 'LinkPost') {\n    return (\n      <React.Fragment>\n        <div\n          className='linkContainer'\n        >\n          <a href={data.linkObj.link}>\n            <div\n              className='imgContainer'\n            >\n              <div className='imgModal'/>\n              <img\n                className='siteImage'\n                src={data.linkObj.imageUrl}  \n                alt={'link page img'}\n              />\n              <h2\n                className='siteTitle'\n              >{data.linkObj.title}</h2>\n            </div>\n            <p\n              className='siteDescription'\n            >{data.linkObj.linkDescription}</p>\n            <span\n              className='siteName'\n            >{data.linkObj.siteName}</span>\n          </a>\n        </div>\n        {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n  } else if (data.kind === 'ChatPost') {\n    return (\n      <React.Fragment>\n        <div\n          className='chatDiv'\n          dangerouslySetInnerHTML={{__html: DOMPurify.sanitize(data.chat)}}\n        />\n        {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n  } else if (data.kind === 'AudioPost') {\n    return (\n      <React.Fragment>\n      <div\n        className='audioPlayerContainer'\n      >\n        <div\n          className='audioDataContainer'\n        >\n          <p\n            className='title'\n          >{data.audioMeta.title}</p>\n          <p\n            className='artist'\n          >{data.audioMeta.artist}</p>\n          <p\n            className='album'\n          >{data.audioMeta.album}</p>\n        </div>\n        <AudioPlayer\n          src={data.audioFile.url}\n        />\n      </div>\n      {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n  } else if (data.kind === 'VideoPost') {\n    return (\n      <React.Fragment>\n        <ReactPlayer\n          width={'100%'}\n          height={radar ? '215px' : '360px'}\n          url={data.videoLink.url}\n          controls\n        />\n        {displayDescription(descriptionArr)}\n      </React.Fragment>\n    )\n  }\n}\n\nconst demeterPost = (post) => {\n  if (post.kind === 'Like' && post.post.kind === 'Repost') {\n    return post.post.post\n  } else if (post.kind === 'Like' || post.kind === 'Repost') {\n    return post.post\n  } else {\n    return post\n  }\n}\n\nconst displayDescription = (descriptionArr) => {\n  return (\n    <div\n      className='descriptionTextAndImage'\n    >\n      {descriptionArr.map((obj, i) => {\n        switch(obj.kind) {\n          case 'text':\n            return (\n              <div\n                className='descriptionText'\n                key={obj._id}\n                dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(obj.content) }}\n              />\n            )\n          case 'Image':\n            return (\n              <div\n                className='descriptionImgContainer'\n                key={obj._id}\n              >\n                <img \n                  className='descriptionImg' \n                  src={`${obj.src}`} \n                  alt={'usefilename'} \n                />\n              </div>\n            )\n          default:\n            return 'no keys matched postBody PhotoPost'\n        }\n      })}\n    </div>\n  )\n}\n\nconst handlePostClassName = (obj) => {\n  var demeterPost \n\n  if (obj.kind === 'Like') {\n    demeterPost = obj.post\n  } else {\n    demeterPost = obj\n  }\n  \n  var { kind } = demeterPost;\n\n  if (kind === 'TextPost') {\n    return 'post textPost'\n  } else if (kind === 'PhotoPost') {\n    return 'post photoPost'\n  } else if (kind === 'QuotePost') {\n    return 'post quotePost'\n  } else if (kind === 'LinkPost') {\n    return 'post linkPost'\n  } else if (kind === 'ChatPost') {\n    return 'post chatPost'\n  } else if (kind === 'AudioPost') {\n    return 'post audioPost'\n  } else if (kind === 'VideoPost') {\n    return 'post videoPost'\n  } else if (kind === 'Repost') {\n    if (demeterPost.post.kind === 'TextPost') {\n      return 'post repost textPost'\n    } else if (demeterPost.post.kind === 'PhotoPost') {\n      return 'post repost photoPost'\n    } else if (demeterPost.post.kind === 'QuotePost') {\n      return 'post repost quotePost'\n    } else if (demeterPost.post.kind === 'LinkPost') {\n      return 'post repost linkPost'\n    } else if (demeterPost.post.kind === 'ChatPost') {\n      return 'post repost chatPost'\n    } else if (demeterPost.post.kind === 'AudioPost') {\n      return 'post repost audioPost'\n    } else if (demeterPost.post.kind === 'VideoPost') {\n      return 'post repost videoPost'\n    }\n  }\n}\n\nconst handleDemeterActivityPost = (activity) => {\n  if (activity.post.kind === 'Repost') {\n    return activity.post.post\n  } else {\n    return activity.post\n  }\n}\n\n\nconst PostShowUtil = { \n  postHeader, \n  postBody, \n  repostFooter,\n  postTags,\n  handlePostClassName,\n  handleDemeterActivityPost\n}\n\nexport default PostShowUtil;"]},"metadata":{},"sourceType":"module"}