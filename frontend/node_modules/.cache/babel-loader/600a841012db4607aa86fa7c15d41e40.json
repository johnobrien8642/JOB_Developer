{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import DOMPurify from'dompurify';import{jsx as _jsx}from\"react/jsx-runtime\";var ChatPostInput=function ChatPostInput(_ref){var post=_ref.post,chat=_ref.chat,setChat=_ref.setChat;var _useState=useState(\"<strong>Brother Muzone:</strong> Well we can't stand out here all night...<br><br><strong> Omar Little:</strong> I suppose we can't...<br><br><strong> Brother Muzone:</strong> A man has to have a code.<br><br><strong> Omar Little:</strong> Oh indeed...\"),_useState2=_slicedToArray(_useState,2),placeholder=_useState2[0],setPlaceholder=_useState2[1];useEffect(function(){if(post){document.querySelector('.chatText').innerHTML=post.chat;}var firstSpace=document.createTextNode(' ');var chatDiv=document.querySelector('.chatText');chatDiv.appendChild(firstSpace);//eslint-disable-next-line\n},[]);var regexChat=function regexChat(){var chatDiv=document.querySelector('.chatText');var bolded=chatDiv.innerText.replace(/^(.*?:)/gm,'<strong>$1</strong>').split('\\n').join('<br/>');chatDiv.innerHTML=bolded;if(window.getSelection){var range=document.createRange();range.selectNodeContents(chatDiv);range.collapse(false);var sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);}};return/*#__PURE__*/_jsx(\"div\",{className:!placeholder?'chatText':'chatText placeholder',contentEditable:true,onInput:function onInput(e){regexChat();setChat(chat=e.target.innerHTML);},onFocus:function onFocus(){setPlaceholder(placeholder='');},onKeyDown:function onKeyDown(e){if(e.key==='Enter'){if(window.getSelection){var selection=window.getSelection(),range=selection.getRangeAt(0),br=document.createElement('br'),br2=document.createElement('br'),suffixNode;range.deleteContents();range.insertNode(br);range.collapse(false);range.insertNode(br2);range.setEndAfter(br2);range.collapse(false);range.insertNode(suffixNode=document.createTextNode(' '));range.collapse(true);range.setStartAfter(suffixNode);selection.removeAllRanges();selection.addRange(range);}}},dangerouslySetInnerHTML:{__html:DOMPurify.sanitize(post?post.chat:placeholder)}});};export default ChatPostInput;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/components/forms/inputTypes/Chat_Post_Input.js"],"names":["React","useEffect","useState","DOMPurify","ChatPostInput","post","chat","setChat","placeholder","setPlaceholder","document","querySelector","innerHTML","firstSpace","createTextNode","chatDiv","appendChild","regexChat","bolded","innerText","replace","split","join","window","getSelection","range","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","e","target","key","selection","getRangeAt","br","createElement","br2","suffixNode","deleteContents","insertNode","setEndAfter","setStartAfter","__html","sanitize"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport DOMPurify from 'dompurify';\n\nconst ChatPostInput = ({\n  post, \n  chat, \n  setChat\n}) => {\n  let [placeholder, setPlaceholder] = useState(\"<strong>Brother Muzone:</strong> Well we can't stand out here all night...<br><br><strong> Omar Little:</strong> I suppose we can't...<br><br><strong> Brother Muzone:</strong> A man has to have a code.<br><br><strong> Omar Little:</strong> Oh indeed...\")\n\n  useEffect(() => {\n    if (post) {\n      document.querySelector('.chatText').innerHTML = post.chat\n    }\n\n    var firstSpace = document.createTextNode(' ')\n    var chatDiv = document.querySelector('.chatText')\n    chatDiv.appendChild(firstSpace)\n    //eslint-disable-next-line\n  }, [])\n\n  const regexChat = () => {\n    var chatDiv = document.querySelector('.chatText')\n    \n    const bolded = chatDiv.innerText\n    .replace(/^(.*?:)/gm, '<strong>$1</strong>')\n    .split('\\n').join('<br/>')\n    \n    chatDiv.innerHTML = bolded\n    \n    if (window.getSelection) {\n      var range = document.createRange();\n      range.selectNodeContents(chatDiv)\n      range.collapse(false);\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }\n  \n  return (\n    <div\n      className={!placeholder ? 'chatText' : 'chatText placeholder'}\n      contentEditable={true}\n      onInput={e => {\n        regexChat()\n        \n        setChat(chat = e.target.innerHTML)\n      }}\n      onFocus={() => {\n        setPlaceholder(placeholder = '')\n      }}\n      onKeyDown={e => {\n        if (e.key === 'Enter') {\n          if (window.getSelection) {\n            var selection = window.getSelection(),\n            range = selection.getRangeAt(0),\n            br = document.createElement('br'),\n            br2 = document.createElement('br'),\n            suffixNode\n            range.deleteContents();\n            range.insertNode(br);\n            range.collapse(false)\n            range.insertNode(br2);\n            range.setEndAfter(br2);\n            range.collapse(false);\n            range.insertNode((suffixNode = document.createTextNode(' ')));\n            range.collapse(true)\n            range.setStartAfter(suffixNode);\n            selection.removeAllRanges();\n            selection.addRange(range);\n          }\n        }\n      }}\n      dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(post ? post.chat : placeholder) }}\n    >\n    </div>\n  )\n}\n\nexport default ChatPostInput;"]},"metadata":{},"sourceType":"module"}