{"ast":null,"code":"import React,{useEffect}from'react';import MainImageDnD from'../dragAndDrop/Main_Image_DnD';import MainImageOrRegisterPhotoInput from'./Main_Image_Or_Register_Photo_Input';import PostFormUtil from'../../../functions/post_form_util.js';import PostUpdateUtil from'../../../functions/post_update_util.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var reassemblePhotoPostMain=PostUpdateUtil.reassemblePhotoPostMain;var removeProfilePic=PostFormUtil.removeProfilePic;var PhotoPostOrRegisterInput=function PhotoPostOrRegisterInput(_ref){var edit=_ref.edit,register=_ref.register,previewProfilePicRef=_ref.previewProfilePicRef,profileImageFile=_ref.profileImageFile,setProfileImageFile=_ref.setProfileImageFile,post=_ref.post,formId=_ref.formId,main=_ref.main,mainImageFiles=_ref.mainImageFiles,setMainImageFiles=_ref.setMainImageFiles,render=_ref.render,setRender=_ref.setRender,objsToClean=_ref.objsToClean,errMessage=_ref.errMessage,setErrMessage=_ref.setErrMessage;useEffect(function(){if(post){reassemblePhotoPostMain(main,post.mainImages);setRender(render+1);}//eslint-disable-next-line\n},[]);var renderRemoveBtn=function renderRemoveBtn(previewProfilePicRef,profileImageFile,setProfileImageFile,edit,render,setRender){if(Object.keys(previewProfilePicRef.current).length>0){return/*#__PURE__*/_jsx(\"button\",{className:\"removeProPicBtn\",type:\"button\",onClick:function onClick(){removeProfilePic(previewProfilePicRef,profileImageFile,setProfileImageFile,edit,render,setRender);},children:\"X\"});}};var renderPhotoInput=function renderPhotoInput(register,previewProfilePicRef,profileImageFile,setProfileImageFile){if(Object.keys(previewProfilePicRef.current).length===0){return/*#__PURE__*/_jsx(MainImageOrRegisterPhotoInput,{register:register,previewProfilePicRef:previewProfilePicRef,profileImageFile:profileImageFile,setProfileImageFile:setProfileImageFile});}};if(register){return/*#__PURE__*/_jsxs(\"div\",{className:\"profilePicPreview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"previewImg\",children:[renderRemoveBtn(previewProfilePicRef,profileImageFile,setProfileImageFile,edit,render,setRender),/*#__PURE__*/_jsx(\"img\",{src:previewProfilePicRef.current.src,alt:previewProfilePicRef.current.alt})]}),renderPhotoInput(register,previewProfilePicRef,profileImageFile,setProfileImageFile)]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"mainPreview\",children:[main.current.map(function(obj,i){return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(MainImageDnD,{mainIdx:i,img:obj,main:main,mainImageFiles:mainImageFiles,setMainImageFiles:setMainImageFiles,objsToClean:objsToClean,render:render,setRender:setRender})},i);}),/*#__PURE__*/_jsx(MainImageOrRegisterPhotoInput,{formId:formId,main:main,mainImageFiles:mainImageFiles,setMainImageFiles:setMainImageFiles,render:render,setRender:setRender,errMessage:errMessage,setErrMessage:setErrMessage})]});}};export default PhotoPostOrRegisterInput;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/components/forms/inputTypes/Photo_Post_Or_Register_Photo_Input.js"],"names":["React","useEffect","MainImageDnD","MainImageOrRegisterPhotoInput","PostFormUtil","PostUpdateUtil","reassemblePhotoPostMain","removeProfilePic","PhotoPostOrRegisterInput","edit","register","previewProfilePicRef","profileImageFile","setProfileImageFile","post","formId","main","mainImageFiles","setMainImageFiles","render","setRender","objsToClean","errMessage","setErrMessage","mainImages","renderRemoveBtn","Object","keys","current","length","renderPhotoInput","src","alt","map","obj","i"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\n\nimport MainImageDnD from '../dragAndDrop/Main_Image_DnD';\nimport MainImageOrRegisterPhotoInput from './Main_Image_Or_Register_Photo_Input';\n\nimport PostFormUtil from '../../../functions/post_form_util.js';\nimport PostUpdateUtil from '../../../functions/post_update_util.js';\nconst { reassemblePhotoPostMain } = PostUpdateUtil;\nconst { removeProfilePic } = PostFormUtil;\n\nconst PhotoPostOrRegisterInput = ({\n  edit,\n  register,\n  previewProfilePicRef,\n  profileImageFile,\n  setProfileImageFile,\n  post,\n  formId, \n  main,\n  mainImageFiles,\n  setMainImageFiles,\n  render, \n  setRender,\n  objsToClean,\n  errMessage,\n  setErrMessage\n}) => {\n\n  useEffect(() => {\n    if (post) {\n      reassemblePhotoPostMain(main, post.mainImages)\n      setRender(render + 1)\n    }\n    //eslint-disable-next-line\n  }, [])\n\n  const renderRemoveBtn = (\n    previewProfilePicRef,\n    profileImageFile, \n    setProfileImageFile,\n    edit,\n    render,\n    setRender\n  ) => {\n    if (Object.keys(previewProfilePicRef.current).length > 0) {\n      return (\n        <button\n          className='removeProPicBtn'\n          type='button'\n          onClick={() => {\n            removeProfilePic(\n              previewProfilePicRef,\n              profileImageFile,\n              setProfileImageFile,\n              edit, render,\n              setRender\n            )\n          }}\n        >\n          X\n        </button>\n      )\n    }\n  }\n\n  const renderPhotoInput = (\n    register,\n    previewProfilePicRef,\n    profileImageFile,\n    setProfileImageFile\n  ) => {\n    if (Object.keys(previewProfilePicRef.current).length === 0) {\n      return (\n        <MainImageOrRegisterPhotoInput\n          register={register}\n          previewProfilePicRef={previewProfilePicRef}\n          profileImageFile={profileImageFile}\n          setProfileImageFile={setProfileImageFile}\n        />\n      )\n    }\n  }\n \n  if (register) {\n    return (\n      <div\n        className='profilePicPreview'\n      >\n        <div\n          className='previewImg'\n        >\n          {renderRemoveBtn(\n            previewProfilePicRef,\n            profileImageFile,\n            setProfileImageFile,\n            edit, render,\n            setRender\n          )}\n          <img \n            src={previewProfilePicRef.current.src}\n            alt={previewProfilePicRef.current.alt}\n          />\n        </div>\n\n        {renderPhotoInput(\n          register,\n          previewProfilePicRef,\n          profileImageFile,\n          setProfileImageFile\n        )}\n      </div>\n    )\n  } else {\n    return (\n      <div\n        className='mainPreview'\n      >\n        {main.current.map((obj, i) => {\n        return (\n          <React.Fragment\n            key={i}\n          >\n            <MainImageDnD \n              mainIdx={i}\n              img={obj}\n              main={main}\n              mainImageFiles={mainImageFiles}\n              setMainImageFiles={setMainImageFiles}\n              objsToClean={objsToClean}\n              render={render}\n              setRender={setRender}\n            />\n          </React.Fragment>\n          )\n        })}\n  \n        <MainImageOrRegisterPhotoInput\n          formId={formId}\n          main={main}\n          mainImageFiles={mainImageFiles}\n          setMainImageFiles={setMainImageFiles}\n          render={render}\n          setRender={setRender}\n          errMessage={errMessage}\n          setErrMessage={setErrMessage}\n        />\n      </div>\n    )\n  }\n}\n\nexport default PhotoPostOrRegisterInput;"]},"metadata":{},"sourceType":"module"}