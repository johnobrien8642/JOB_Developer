{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{useMutation}from'@apollo/client';import Cookies from'js-cookie';import UserSettingsUtil from'../functions/user_settings_util.js';import Queries from'../../../../graphql/queries.js';import Mutations from'../../../../graphql/mutations.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FETCH_USER=Queries.FETCH_USER;var UPDATE_USER_BLOG_DESCRIPTION=Mutations.UPDATE_USER_BLOG_DESCRIPTION;var blogDescriptionCache=UserSettingsUtil.blogDescriptionCache;var BlogDescription=function BlogDescription(_ref){var mobile=_ref.mobile,userBlogDescription=_ref.userBlogDescription;var blogDescriptionRef=useRef(userBlogDescription);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),blogDescription=_useState4[0],setBlogDescription=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setError=_useState8[1];var _useMutation=useMutation(UPDATE_USER_BLOG_DESCRIPTION,{update:function update(client,_ref2){var data=_ref2.data;var updateUserBlogDescription=data.updateUserBlogDescription;var currentUser=Cookies.get('currentUser');var query=FETCH_USER;blogDescriptionCache(client,updateUserBlogDescription,currentUser,query);},onCompleted:function onCompleted(data){console.log(data);blogDescriptionRef.current=data.updateUserBlogDescription.blogDescription;resetInputs();setActive(active=false);},onError:function onError(error){setError(errorMessage=error.message);}}),_useMutation2=_slicedToArray(_useMutation,1),updateUserBlogDescription=_useMutation2[0];var resetInputs=function resetInputs(){setBlogDescription(blogDescription='');setPassword(password='');setError(errorMessage='');};if(active){return/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();updateUserBlogDescription({variables:{blogDescription:blogDescription,password:password,user:Cookies.get('currentUser')}});},children:/*#__PURE__*/_jsxs(\"div\",{className:\"inputAndBtnContainer\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"blogDescriptionTextarea\",value:blogDescription,onChange:function onChange(e){setBlogDescription(blogDescription=e.target.value);}}),/*#__PURE__*/_jsxs(\"span\",{className:\"characterCount\",children:[150-blogDescription.length,\" characters left\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"errMessage\",children:errorMessage?\"\".concat(errorMessage):''}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm password\",value:password,onChange:function onChange(e){setPassword(password=e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",type:\"button\",onClick:function onClick(){resetInputs();setActive(active=false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"save\",type:\"submit\",children:\"Save\"})]})]})});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"settingContainer\",children:[/*#__PURE__*/_jsx(\"p\",{children:blogDescriptionRef.current}),/*#__PURE__*/_jsx(\"img\",{className:\"editPostBtn\",src:\"https://img.icons8.com/windows/64/000000/edit--v1.png\",alt:\"\",onClick:function onClick(){setActive(active=true);}})]});}};export default BlogDescription;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/user/util/components/Blog_Description.js"],"names":["React","useState","useRef","useMutation","Cookies","UserSettingsUtil","Queries","Mutations","FETCH_USER","UPDATE_USER_BLOG_DESCRIPTION","blogDescriptionCache","BlogDescription","mobile","userBlogDescription","blogDescriptionRef","active","setActive","blogDescription","setBlogDescription","password","setPassword","errorMessage","setError","update","client","data","updateUserBlogDescription","currentUser","get","query","onCompleted","console","log","current","resetInputs","onError","error","message","e","preventDefault","variables","user","target","value","length"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport UserSettingsUtil from '../functions/user_settings_util.js'\n\nimport Queries from '../../../../graphql/queries.js';\nimport Mutations from '../../../../graphql/mutations.js';\nconst { FETCH_USER } = Queries;\nconst { UPDATE_USER_BLOG_DESCRIPTION } = Mutations;\nconst { blogDescriptionCache } = UserSettingsUtil;\n\nconst BlogDescription = ({\n  mobile,\n  userBlogDescription\n}) => {\n  let blogDescriptionRef = useRef(userBlogDescription)\n  let [active, setActive] = useState(false);\n  let [blogDescription, setBlogDescription] = useState('');\n  let [password, setPassword] = useState('');\n  let [errorMessage, setError] = useState(null);\n\n  let [updateUserBlogDescription] = useMutation(UPDATE_USER_BLOG_DESCRIPTION, {\n    update(client, { data }) {\n      const { updateUserBlogDescription } = data;\n      var currentUser = Cookies.get('currentUser')\n      var query = FETCH_USER\n      \n      blogDescriptionCache(client, updateUserBlogDescription, currentUser, query)\n    },\n    onCompleted(data) {\n      console.log(data)\n      blogDescriptionRef.current = data.updateUserBlogDescription.blogDescription\n      resetInputs()\n      setActive(active = false)\n    },\n    onError(error) {\n      setError(errorMessage = error.message)\n    }\n  })\n\n  const resetInputs = () => {\n    setBlogDescription(blogDescription = '')\n    setPassword(password = '')\n    setError(errorMessage = '')\n  }\n\n  if (active) {\n    return (\n      <form\n        onSubmit={e => {\n          e.preventDefault()\n          updateUserBlogDescription({\n            variables: {\n              blogDescription: blogDescription,\n              password: password,\n              user: Cookies.get('currentUser')\n            }\n          })\n        }}\n      >\n\n        <div\n          className='inputAndBtnContainer'\n        >\n          <textarea\n            className='blogDescriptionTextarea'\n            value={blogDescription}\n            onChange={e => {\n              setBlogDescription(blogDescription = e.target.value)\n            }}\n          />\n          <span\n            className='characterCount'\n          >{150 - blogDescription.length} characters left</span>\n          \n          <p\n            className='errMessage'\n          >{errorMessage ? `${errorMessage}` : ''}</p>\n          <input\n            type='password'\n            placeholder='Confirm password'\n            value={password}\n            onChange={e => {\n              setPassword(password = e.target.value)\n            }}\n          />\n\n          <div>\n            <button\n              className='cancel'\n              type='button'\n              onClick={() => {\n                resetInputs()\n                setActive(active = false)\n              }}\n            >Cancel</button>\n            <button\n              className='save'\n              type='submit'\n            >Save</button>\n          </div>\n        </div>\n      </form>\n    )\n  } else {\n    return (\n      <div\n        className='settingContainer'\n      >\n        <p>{blogDescriptionRef.current}</p>\n        <img\n          className='editPostBtn'\n          src=\"https://img.icons8.com/windows/64/000000/edit--v1.png\"\n          alt=''\n          onClick={() => {\n            setActive(active = true)\n          }}\n        />\n      </div>\n    )\n  }\n}\n\nexport default BlogDescription;"]},"metadata":{},"sourceType":"module"}