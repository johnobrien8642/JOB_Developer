{"ast":null,"code":"import _regeneratorRuntime from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from'react';import{useMutation}from'@apollo/client';import{useHistory}from'react-router-dom';import Cookies from'js-cookie';import randomstring from'randomstring';import LinkPreview from'../../util/components/forms/Link_Preview';import BodyImageAndText from'../../util/components/forms/Body_Image_And_Text';import Tags from'../../util/components/forms/Tags';import ProfilePic from'../../../user/util/components/Profile_Pic';import ConfirmClose from'../../../nav/Confirm_Close';import Mutations from'../../../../graphql/mutations.js';import Queries from'../../../../graphql/queries.js';import PostFormUtil from'../../util/functions/post_form_util.js';import UpdateCacheUtil from'../../util/functions/update_cache_util.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var postCreate=UpdateCacheUtil.postCreate,postUpdate=UpdateCacheUtil.postUpdate;var bodyPost=PostFormUtil.bodyPost,handleFormData=PostFormUtil.handleFormData,stripAllImgs=PostFormUtil.stripAllImgs,handleUploadedFiles=PostFormUtil.handleUploadedFiles,resetDisplayIdx=PostFormUtil.resetDisplayIdx,fetchUrlMetadata=PostFormUtil.fetchUrlMetadata,handleMentions=PostFormUtil.handleMentions,discardMentions=PostFormUtil.discardMentions,handleAllTextLinkPost=PostFormUtil.handleAllTextLinkPost,preventScroll=PostFormUtil.preventScroll,allowScroll=PostFormUtil.allowScroll,handleTagInput=PostFormUtil.handleTagInput;var CREATE_OR_UPDATE_POST=Mutations.CREATE_OR_UPDATE_POST;var FETCH_USER_FEED=Queries.FETCH_USER_FEED;var LinkPostForm=function LinkPostForm(_ref){var mobile=_ref.mobile,user=_ref.user,post=_ref.post,update=_ref.update,setUpdate=_ref.setUpdate,linkPostActive=_ref.linkPostActive,setLinkPostActive=_ref.setLinkPostActive,postFormModal=_ref.postFormModal,setPostFormModal=_ref.setPostFormModal,postFormOpen=_ref.postFormOpen,setPostFormOpen=_ref.setPostFormOpen,uploading=_ref.uploading,setUploading=_ref.setUploading;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),link=_useState2[0],setLink=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pastLink=_useState4[0],setPastLink=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),siteName=_useState6[0],setSiteName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),imageUrl=_useState8[0],setImageUrl=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),title=_useState10[0],setTitle=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),linkDescription=_useState12[0],setLinkDescription=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),result=_useState14[0],setResult=_useState14[1];var objsToClean=useRef([]);var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),description=_useState16[0],setDescription=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),bodyImageFiles=_useState18[0],setBodyImageFiles=_useState18[1];var body=useRef([]);var allText=useRef('');var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),tag=_useState20[0],setTag=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),tags=_useState22[0],setTags=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),errMessage=_useState24[0],setErrMessage=_useState24[1];var _useState25=useState(0),_useState26=_slicedToArray(_useState25,2),render=_useState26[0],setRender=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),confirmClose=_useState28[0],setConfirmClose=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),displayBodyImageAndTextInput=_useState30[0],setDisplayBodyImageAndTextInput=_useState30[1];var history=useHistory();var formId='linkPostForm';var formInputId='linkPostInput';useEffect(function(){preventScroll(linkPostActive,document);},[linkPostActive]);useEffect(function(){resetDisplayIdx(body);});var _useMutation=useMutation(CREATE_OR_UPDATE_POST,{update:function update(client,_ref2){var data=_ref2.data;var createOrUpdatePost=data.createOrUpdatePost;var currentUser=Cookies.get('currentUser');var query=FETCH_USER_FEED;if(post){postUpdate(client,createOrUpdatePost,currentUser,query);}else{postCreate(client,createOrUpdatePost,currentUser,query);}},onCompleted:function onCompleted(){resetInputs();if(post){setUpdate(update=false);setUploading(uploading=false);}else{allowScroll(document);setLinkPostActive(linkPostActive=false);if(mobile){setPostFormOpen(postFormOpen=false);history.push('/dashboard');}setUploading(uploading=false);}},onError:function onError(error){console.log(error);}}),_useMutation2=_slicedToArray(_useMutation,1),createOrUpdatePost=_useMutation2[0];var resetInputs=function resetInputs(){setLink(link='');setPastLink(pastLink='');setResult(result='');setTitle(title='');setSiteName(siteName='');setImageUrl(imageUrl='');setLinkDescription(linkDescription='');setBodyImageFiles(bodyImageFiles=[]);body.current=[];allText.current='';setTag(tag='');setTags(tags=[]);setErrMessage(errMessage='');setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput=false);};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var bodyImagesFormData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();bodyImagesFormData=handleFormData(bodyImageFiles);Promise.all([bodyPost(bodyImagesFormData)]).then(function(_ref4){var _ref5=_slicedToArray(_ref4,1),bodyUploads=_ref5[0];var mentions=handleMentions(body,stripAllImgs);discardMentions(post,mentions,objsToClean);var descriptions=stripAllImgs(body);var linkObj={link:link,siteName:siteName,imageUrl:imageUrl,title:title,linkDescription:linkDescription};handleAllTextLinkPost(allText,descriptions,linkObj);var instanceData={variants:{linkObj:linkObj},allText:allText.current,descriptions:descriptions,descriptionImages:handleUploadedFiles(body,bodyUploads),mentions:mentions,user:Cookies.get('currentUser'),tags:tags,kind:'LinkPost',objsToClean:objsToClean.current,postId:post?post._id:null};createOrUpdatePost({variables:{instanceData:instanceData}});});case 3:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref3.apply(this,arguments);};}();var handleLinkPreview=function handleLinkPreview(){if(link!==pastLink&&link!==''){setPastLink(pastLink=link);fetchUrlMetadata(link).then(function(res){if(res.data.success===true){if(res.data.hasOwnProperty('ogImage')){setSiteName(siteName=res.data.ogSiteName||'');setImageUrl(imageUrl=res.data.ogImage.url);setTitle(title=res.data.ogTitle);setLinkDescription(linkDescription=res.data.ogDescription);setResult(result=res);}else{setSiteName(siteName=res.data.ogSiteName||'');setImageUrl(imageUrl='');setTitle(title=res.data.ogTitle);setLinkDescription(linkDescription=res.data.ogDescription);setResult(result=res);}}});}};var resetLink=function resetLink(){setLink(link='');setPastLink(pastLink='');setResult(result='');setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput=false);};var disabledBool=function disabledBool(){return!link&&body.current.length===0&&!description;};var handleLinkPostFormClass=function handleLinkPostFormClass(){if(linkPostActive&&!uploading||update){return'postForm linkPostForm active';}else if(linkPostActive&&uploading||uploading){return'postForm linkPostForm hidden';}else{return'postForm linkPostForm none';}};if(linkPostActive||update){return/*#__PURE__*/_jsxs(\"div\",{className:update?'postFormContainer update':'postFormContainer',children:[/*#__PURE__*/_jsx(ProfilePic,{user:update?post.user:user}),/*#__PURE__*/_jsx(\"div\",{className:handleLinkPostFormClass(),children:/*#__PURE__*/_jsxs(\"form\",{id:formId,onSubmit:function onSubmit(e){return handleSubmit(e);},onKeyPress:function onKeyPress(e){e.key==='Enter'&&e.preventDefault();},encType:'multipart/form-data',children:[/*#__PURE__*/_jsx(\"h3\",{className:\"userNameHeader\",children:update?post.user.blogName:user.blogName}),handleLinkPreview(),/*#__PURE__*/_jsx(LinkPreview,{displayBodyImageAndTextInput:displayBodyImageAndTextInput,setDisplayBodyImageAndTextInput:setDisplayBodyImageAndTextInput,post:post,update:update,link:link,setLink:setLink,pastLink:pastLink,setPastLink:setPastLink,result:result,siteName:siteName,setSiteName:setSiteName,imageUrl:imageUrl,setImageUrl:setImageUrl,title:title,setTitle:setTitle,linkDescription:linkDescription,setLinkDescription:setLinkDescription,resetLink:resetLink}),/*#__PURE__*/_jsx(BodyImageAndText,{displayBodyImageAndTextInput:displayBodyImageAndTextInput,post:post,update:update,formId:formId,formInputId:formInputId,objsToClean:objsToClean,body:body,bodyImageFiles:bodyImageFiles,setBodyImageFiles:setBodyImageFiles,description:description,setDescription:setDescription,render:render,setRender:setRender,errMessage:errMessage,setErrMessage:setErrMessage}),/*#__PURE__*/_jsx(Tags,{post:post,tag:tag,setTag:setTag,tags:tags,setTags:setTags}),/*#__PURE__*/_jsxs(\"div\",{className:\"closeOrPostContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"closeBtn\",onClick:function onClick(){if(disabledBool()){resetInputs();allowScroll(document);setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput=false);if(!update){setLinkPostActive(linkPostActive=false);setPostFormModal(postFormModal=false);}else{setUpdate(update=false);}if(mobile){setPostFormOpen(postFormOpen=false);}}else{setConfirmClose(confirmClose=true);}},children:\"Close\"}),/*#__PURE__*/_jsx(ConfirmClose,{mobile:mobile,update:update,setUpdate:setUpdate,confirmClose:confirmClose,setConfirmClose:setConfirmClose,allowScroll:allowScroll,resetInputs:resetInputs,setFormActive:setLinkPostActive,formActive:linkPostActive,setPostFormModal:setPostFormModal,postFormModal:postFormModal,postFormOpen:postFormOpen,setPostFormOpen:setPostFormOpen}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:disabledBool()?'formSubmitBtn disabled':'formSubmitBtn',disabled:disabledBool(),onClick:function onClick(){if(description){var textObj={kind:'text',srcType:'text',content:description,displayIdx:body.current.length,uniqId:randomstring.generate({length:12,charset:'alphabetic'})};body.current.push(textObj);setDescription(description='');}if(tag){handleTagInput(tag,setTag,tags,setTags);}if(!update){setPostFormModal(postFormModal=false);}setUploading(uploading=true);},children:post?'Update':'Post'})]})]})})]});}else{return/*#__PURE__*/_jsx(\"div\",{});}};export default LinkPostForm;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/types/create/LinkPostForm.js"],"names":["React","useState","useRef","useEffect","useMutation","useHistory","Cookies","randomstring","LinkPreview","BodyImageAndText","Tags","ProfilePic","ConfirmClose","Mutations","Queries","PostFormUtil","UpdateCacheUtil","postCreate","postUpdate","bodyPost","handleFormData","stripAllImgs","handleUploadedFiles","resetDisplayIdx","fetchUrlMetadata","handleMentions","discardMentions","handleAllTextLinkPost","preventScroll","allowScroll","handleTagInput","CREATE_OR_UPDATE_POST","FETCH_USER_FEED","LinkPostForm","mobile","user","post","update","setUpdate","linkPostActive","setLinkPostActive","postFormModal","setPostFormModal","postFormOpen","setPostFormOpen","uploading","setUploading","link","setLink","pastLink","setPastLink","siteName","setSiteName","imageUrl","setImageUrl","title","setTitle","linkDescription","setLinkDescription","result","setResult","objsToClean","description","setDescription","bodyImageFiles","setBodyImageFiles","body","allText","tag","setTag","tags","setTags","errMessage","setErrMessage","render","setRender","confirmClose","setConfirmClose","displayBodyImageAndTextInput","setDisplayBodyImageAndTextInput","history","formId","formInputId","document","client","data","createOrUpdatePost","currentUser","get","query","onCompleted","resetInputs","push","onError","error","console","log","current","handleSubmit","e","preventDefault","bodyImagesFormData","Promise","all","then","bodyUploads","mentions","descriptions","linkObj","instanceData","variants","descriptionImages","kind","postId","_id","variables","handleLinkPreview","res","success","hasOwnProperty","ogSiteName","ogImage","url","ogTitle","ogDescription","resetLink","disabledBool","length","handleLinkPostFormClass","key","blogName","textObj","srcType","content","displayIdx","uniqId","generate","charset"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useMutation } from '@apollo/client';\nimport { useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport randomstring from 'randomstring';\n\nimport LinkPreview from '../../util/components/forms/Link_Preview'\nimport BodyImageAndText from '../../util/components/forms/Body_Image_And_Text'\nimport Tags from '../../util/components/forms/Tags'\nimport ProfilePic from '../../../user/util/components/Profile_Pic';\nimport ConfirmClose from '../../../nav/Confirm_Close';\n\nimport Mutations from '../../../../graphql/mutations.js';\nimport Queries from '../../../../graphql/queries.js';\nimport PostFormUtil from '../../util/functions/post_form_util.js'\nimport UpdateCacheUtil from '../../util/functions/update_cache_util.js';\nconst { postCreate, postUpdate } = UpdateCacheUtil;\nconst { bodyPost, handleFormData, stripAllImgs,\n        handleUploadedFiles, resetDisplayIdx, \n        fetchUrlMetadata, handleMentions, \n        discardMentions, handleAllTextLinkPost,\n        preventScroll, allowScroll, handleTagInput } = PostFormUtil;\nconst { CREATE_OR_UPDATE_POST } = Mutations;\nconst { FETCH_USER_FEED } = Queries;\n\n\nconst LinkPostForm = ({\n  mobile,\n  user,\n  post, \n  update,\n  setUpdate,\n  linkPostActive,\n  setLinkPostActive,\n  postFormModal,\n  setPostFormModal,\n  postFormOpen,\n  setPostFormOpen,\n  uploading,\n  setUploading\n}) => {\n  let [link, setLink] = useState('');\n  let [pastLink, setPastLink] = useState('')\n  let [siteName, setSiteName] = useState('');\n  let [imageUrl, setImageUrl] = useState('');\n  let [title, setTitle] = useState('');\n  let [linkDescription, setLinkDescription] = useState('');\n  let [result, setResult] = useState('');\n\n  let objsToClean = useRef([]);\n  let [description, setDescription] = useState('');\n  let [bodyImageFiles, setBodyImageFiles] = useState([]);\n  let body = useRef([]);\n  let allText = useRef('');\n  let [tag, setTag] = useState('');\n  let [tags, setTags] = useState([]);\n  let [errMessage, setErrMessage] = useState('');\n  let [render, setRender] = useState(0);\n  let [confirmClose, setConfirmClose] = useState(false);\n  let [displayBodyImageAndTextInput, setDisplayBodyImageAndTextInput] = useState(false);\n  let history = useHistory();\n  const formId = 'linkPostForm';\n  const formInputId = 'linkPostInput';\n  \n  useEffect(() => {\n    \n    preventScroll(linkPostActive, document)\n\n  }, [linkPostActive])\n\n  useEffect(() => {\n    resetDisplayIdx(body)\n  })\n\n  let [createOrUpdatePost] = useMutation(CREATE_OR_UPDATE_POST, {\n    update(client, { data }) {\n      const { createOrUpdatePost } = data;\n      var currentUser = Cookies.get('currentUser')\n      var query = FETCH_USER_FEED\n      \n      if (post) {\n        postUpdate(client, createOrUpdatePost, currentUser, query)\n      } else {\n        postCreate(client, createOrUpdatePost, currentUser, query)\n      }\n    },\n    onCompleted() {\n      resetInputs();\n      if (post) {\n        setUpdate(update = false)\n        setUploading(uploading = false)\n      } else {\n        allowScroll(document)\n        setLinkPostActive(linkPostActive = false)\n        \n        if (mobile) {\n          setPostFormOpen(postFormOpen = false)\n          history.push('/dashboard')\n        }\n        setUploading(uploading = false)\n      }\n    },\n    onError(error) {\n      console.log(error)\n    }\n  });\n\n  const resetInputs = () => {\n    setLink(link = '');\n    setPastLink(pastLink = '');\n    setResult(result = '');\n    setTitle(title = '');\n    setSiteName(siteName = '');\n    setImageUrl(imageUrl = '');\n    setLinkDescription(linkDescription = '');\n    setBodyImageFiles(bodyImageFiles = []);\n    body.current = [];\n    allText.current = '';\n    setTag(tag = '');\n    setTags(tags = []);\n    setErrMessage(errMessage = '');\n    setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput = false)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    var bodyImagesFormData = handleFormData(bodyImageFiles)\n\n    Promise.all([\n      bodyPost(bodyImagesFormData)\n    ]).then(\n      ([bodyUploads]) => {\n\n        var mentions = handleMentions(body, stripAllImgs)\n        \n        discardMentions(post, mentions, objsToClean)\n\n        var descriptions = stripAllImgs(body)\n        \n        var linkObj = {\n          link, siteName, imageUrl,\n          title, linkDescription\n        }\n\n        handleAllTextLinkPost(allText, descriptions, linkObj)\n          \n        var instanceData = {\n          variants: {\n            linkObj: linkObj\n          },\n          allText: allText.current,\n          descriptions: descriptions,\n          descriptionImages: handleUploadedFiles(body, bodyUploads),\n          mentions: mentions,\n          user: Cookies.get('currentUser'),\n          tags, kind: 'LinkPost',\n          objsToClean: objsToClean.current,\n          postId: post ? post._id : null\n        };\n        \n        createOrUpdatePost({\n          variables: {\n            instanceData: instanceData\n          }\n        })\n      }\n    )\n  }\n  \n  const handleLinkPreview = () => {\n    if (link !== pastLink && link !== '') {\n      setPastLink(pastLink = link)\n      fetchUrlMetadata(link).then(res => {\n        if (res.data.success === true) {\n          if (res.data.hasOwnProperty('ogImage')) {\n            setSiteName(siteName = res.data.ogSiteName || '')\n            setImageUrl(imageUrl = res.data.ogImage.url)\n            setTitle(title = res.data.ogTitle)\n            setLinkDescription(linkDescription = res.data.ogDescription)\n            setResult(result = res)\n          } else {\n            setSiteName(siteName = res.data.ogSiteName || '')\n            setImageUrl(imageUrl = '')\n            setTitle(title = res.data.ogTitle)\n            setLinkDescription(linkDescription = res.data.ogDescription)\n            setResult(result = res)\n          }\n        }\n      })\n    }\n  }\n\n  const resetLink = () => {\n    setLink(link = '')\n    setPastLink(pastLink = '')\n    setResult(result = '')\n    setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput = false)\n  }\n\n  const disabledBool = () => {\n    return !link && \n    body.current.length === 0 && \n    !description\n  }\n\n  const handleLinkPostFormClass = () => {\n    if ((linkPostActive && !uploading) || update) {\n      return 'postForm linkPostForm active'\n    } else if ((linkPostActive && uploading) || uploading) {\n      return 'postForm linkPostForm hidden'\n    } else {\n      return 'postForm linkPostForm none'\n    }\n  }\n  \n  if (linkPostActive || update) {\n    return (\n      <div\n        className={update ? 'postFormContainer update' : 'postFormContainer'}\n      >\n\n      <ProfilePic user={update ? post.user : user} />\n\n      <div\n        className={handleLinkPostFormClass()}\n      >\n        <form\n          id={formId}\n          onSubmit={e => handleSubmit(e)}\n          onKeyPress={e => { e.key === 'Enter' && e.preventDefault() }}\n          encType={'multipart/form-data'}\n        >\n        \n        <h3\n          className='userNameHeader'\n        >{update ? post.user.blogName : user.blogName}</h3>\n  \n        {handleLinkPreview()}\n        \n        <LinkPreview\n          displayBodyImageAndTextInput={displayBodyImageAndTextInput}\n          setDisplayBodyImageAndTextInput={setDisplayBodyImageAndTextInput}\n          post={post}\n          update={update}\n          link={link}\n          setLink={setLink}\n          pastLink={pastLink}\n          setPastLink={setPastLink}\n          result={result}\n          siteName={siteName}\n          setSiteName={setSiteName}\n          imageUrl={imageUrl}\n          setImageUrl={setImageUrl}\n          title={title}\n          setTitle={setTitle}\n          linkDescription={linkDescription}\n          setLinkDescription={setLinkDescription}\n          resetLink={resetLink}\n        />\n  \n        <BodyImageAndText\n          displayBodyImageAndTextInput={displayBodyImageAndTextInput}\n          post={post}\n          update={update}\n          formId={formId}\n          formInputId={formInputId}\n          objsToClean={objsToClean}\n          body={body}\n          bodyImageFiles={bodyImageFiles}\n          setBodyImageFiles={setBodyImageFiles}\n          description={description}\n          setDescription={setDescription}\n          render={render}\n          setRender={setRender}\n          errMessage={errMessage}\n          setErrMessage={setErrMessage}\n        />\n  \n        <Tags\n          post={post}\n          tag={tag}\n          setTag={setTag}\n          tags={tags}\n          setTags={setTags}\n        />\n      \n        <div\n          className='closeOrPostContainer'\n        >\n          <div\n            className='closeBtn'\n            onClick={() => {\n              if (disabledBool()) {\n                  resetInputs()\n                  allowScroll(document)\n                  setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput = false)\n                  \n                  if (!update) {\n                    setLinkPostActive(linkPostActive = false)\n                    setPostFormModal(postFormModal = false)\n                  } else {\n                    setUpdate(update = false)\n                  }\n\n                  if (mobile) {\n                    setPostFormOpen(postFormOpen = false)\n                  }\n              } else {\n                setConfirmClose(confirmClose = true)\n              }\n            }}\n          >\n            Close\n          </div>\n\n          <ConfirmClose\n            mobile={mobile}\n            update={update}\n            setUpdate={setUpdate}\n            confirmClose={confirmClose}\n            setConfirmClose={setConfirmClose}\n            allowScroll={allowScroll}\n            resetInputs={resetInputs}\n            setFormActive={setLinkPostActive}\n            formActive={linkPostActive}\n            setPostFormModal={setPostFormModal}\n            postFormModal={postFormModal}\n            postFormOpen={postFormOpen}\n            setPostFormOpen={setPostFormOpen}\n          />\n\n\n          <button\n            type='submit'\n            className={disabledBool() ? 'formSubmitBtn disabled' : 'formSubmitBtn'}\n            disabled={disabledBool()}\n            onClick={() => {\n              if (description) {\n                var textObj = {\n                  kind: 'text',\n                  srcType: 'text',\n                  content: description,\n                  displayIdx: body.current.length,\n                  uniqId: randomstring.generate({\n                    length: 12,\n                    charset: 'alphabetic'\n                  })\n                }\n\n                body.current.push(textObj)\n              \n                setDescription(description = '')\n              }\n              \n              if (tag) {\n                handleTagInput(\n                  tag, setTag,\n                  tags, setTags\n                )\n              }\n              \n              if (!update) {\n                setPostFormModal(postFormModal = false)\n              }\n\n              setUploading(uploading = true)\n            }}\n          >\n            {post ? 'Update' : 'Post'}\n          </button>\n        </div>\n        </form>\n      </div>\n      </div>\n    )\n  } else {\n    return (\n      <div>\n      </div>\n    )\n  }\n}\n\nexport default LinkPostForm;"]},"metadata":{},"sourceType":"module"}