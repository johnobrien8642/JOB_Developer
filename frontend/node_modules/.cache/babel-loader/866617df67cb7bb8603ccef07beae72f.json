{"ast":null,"code":"var _jsxFileName = \"/Users/johnobrien/Desktop/JOB_Developer/client/src/components/feeds/User_Followers_Or_Following_Or_Activity_Feed.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect } from 'react';\nimport { useQuery, useApolloClient } from '@apollo/client';\nimport { useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport UserResult from '../search/resultTypes/User_Result';\nimport CheckOutTheseBlogs from '../dashboard/util/Check_Out_These_Blogs';\nimport Queries from '../../graphql/queries.js';\nimport FeedUtil from '../posts/util/functions/feed_util.js';\nimport ActivityUtil from '../nav/util/activity_util.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  handleActivity,\n  handleTimeAgo\n} = ActivityUtil;\nconst {\n  FETCH_USER_FOLLOWERS,\n  FETCH_FOLLOWED_USERS,\n  FETCH_ALL_ACTIVITY\n} = Queries;\nconst {\n  infiniteScroll,\n  updateCacheInfScrollUserFollowers,\n  updateCacheInfScrollFollowedUsers,\n  handleData,\n  setgqlQueryUserFollowedOrFollowingOrActivity\n} = FeedUtil;\n\nconst UserFollowersOrFollowingFeed = () => {\n  _s();\n\n  let feedArr = useRef([]);\n  let timeAgoRef = useRef([]);\n  let fetchMoreDiv = useRef(null);\n  let cursorId = useRef(null);\n  let fetchMoreDivId = useRef('#fetchMoreFollowers');\n  let gqlQuery = useRef(FETCH_USER_FOLLOWERS);\n  let query = useRef(Cookies.get('currentUser'));\n  let endOfPosts = useRef(false);\n  const client = useApolloClient();\n  let history = useHistory();\n  setgqlQueryUserFollowedOrFollowingOrActivity(history.location.pathname, gqlQuery, FETCH_USER_FOLLOWERS, FETCH_FOLLOWED_USERS, FETCH_ALL_ACTIVITY);\n  useEffect(() => {\n    var scroll;\n\n    if (history.location.pathname === '/followers') {\n      scroll = infiniteScroll(client, updateCacheInfScrollUserFollowers, query, gqlQuery, cursorId, fetchMoreDiv, fetchMoreDivId);\n    } else {\n      scroll = infiniteScroll(client, updateCacheInfScrollFollowedUsers, query, gqlQuery, cursorId, fetchMoreDiv, fetchMoreDivId);\n    }\n\n    return () => {\n      document.removeEventListener('scroll', scroll);\n      timeAgoRef.current = [];\n      refetch();\n    }; //eslint-disable-next-line\n  }, []);\n  let {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(gqlQuery.current, {\n    variables: {\n      query: Cookies.get('currentUser'),\n      cursorId: null\n    }\n  });\n  if (loading) return 'Loading...';\n  if (error) return `Error: ${error}`;\n  handleData(data, feedArr, cursorId, endOfPosts);\n\n  const handleHeader = () => {\n    if (history.location.pathname === '/followers') {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Followers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this);\n    } else if (history.location.pathname === '/following') {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Following\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Activity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"followContainer\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outerContainer\",\n      children: [handleHeader(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: history.location.pathname === '/activity' ? 'activity' : 'followFeedContainer',\n        children: feedArr.current.map((followOrActivity, i) => {\n          if (history.location.pathname === '/activity') {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [handleTimeAgo(followOrActivity, timeAgoRef), handleActivity(followOrActivity)]\n            }, followOrActivity._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 19\n            }, this);\n          } else {\n            var user = followOrActivity.hasOwnProperty('follows') ? followOrActivity.follows : followOrActivity.user;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"followResult\",\n              children: /*#__PURE__*/_jsxDEV(UserResult, {\n                user: user\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 21\n              }, this)\n            }, user._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 19\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"fetchMoreFollowers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CheckOutTheseBlogs, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserFollowersOrFollowingFeed, \"gftiTE521Qs3uIW1iSC70dcvpnE=\", false, function () {\n  return [useApolloClient, useHistory, useQuery];\n});\n\n_c = UserFollowersOrFollowingFeed;\nexport default UserFollowersOrFollowingFeed;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserFollowersOrFollowingFeed\");","map":{"version":3,"sources":["/Users/johnobrien/Desktop/JOB_Developer/client/src/components/feeds/User_Followers_Or_Following_Or_Activity_Feed.js"],"names":["React","useRef","useEffect","useQuery","useApolloClient","useHistory","Cookies","UserResult","CheckOutTheseBlogs","Queries","FeedUtil","ActivityUtil","handleActivity","handleTimeAgo","FETCH_USER_FOLLOWERS","FETCH_FOLLOWED_USERS","FETCH_ALL_ACTIVITY","infiniteScroll","updateCacheInfScrollUserFollowers","updateCacheInfScrollFollowedUsers","handleData","setgqlQueryUserFollowedOrFollowingOrActivity","UserFollowersOrFollowingFeed","feedArr","timeAgoRef","fetchMoreDiv","cursorId","fetchMoreDivId","gqlQuery","query","get","endOfPosts","client","history","location","pathname","scroll","document","removeEventListener","current","refetch","loading","error","data","variables","handleHeader","map","followOrActivity","i","_id","user","hasOwnProperty","follows"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport { useQuery, useApolloClient } from '@apollo/client';\nimport { useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\n\nimport UserResult from '../search/resultTypes/User_Result';\nimport CheckOutTheseBlogs from '../dashboard/util/Check_Out_These_Blogs';\n\nimport Queries from '../../graphql/queries.js';\nimport FeedUtil from '../posts/util/functions/feed_util.js';\nimport ActivityUtil from '../nav/util/activity_util.js';\nconst { handleActivity, handleTimeAgo } = ActivityUtil;\nconst { FETCH_USER_FOLLOWERS, \n        FETCH_FOLLOWED_USERS, \n        FETCH_ALL_ACTIVITY } = Queries;\nconst { infiniteScroll, \n        updateCacheInfScrollUserFollowers, \n        updateCacheInfScrollFollowedUsers,\n        handleData, \n        setgqlQueryUserFollowedOrFollowingOrActivity } = FeedUtil;\n\nconst UserFollowersOrFollowingFeed = () => {\n  let feedArr = useRef([]);\n  let timeAgoRef = useRef([]);\n  let fetchMoreDiv = useRef(null);\n  let cursorId = useRef(null);\n  let fetchMoreDivId = useRef('#fetchMoreFollowers');\n  let gqlQuery = useRef(FETCH_USER_FOLLOWERS)\n  let query = useRef(Cookies.get('currentUser'));\n  let endOfPosts = useRef(false);\n  const client = useApolloClient();\n  let history = useHistory();\n\n  setgqlQueryUserFollowedOrFollowingOrActivity(\n    history.location.pathname,\n    gqlQuery,\n    FETCH_USER_FOLLOWERS,\n    FETCH_FOLLOWED_USERS,\n    FETCH_ALL_ACTIVITY\n  )\n  \n  useEffect(() => {\n    var scroll;\n  \n    if (history.location.pathname === '/followers') {\n      scroll = infiniteScroll(\n        client, updateCacheInfScrollUserFollowers,\n        query, gqlQuery,\n        cursorId, fetchMoreDiv,\n        fetchMoreDivId\n      )\n    } else {\n      scroll = infiniteScroll(\n        client, updateCacheInfScrollFollowedUsers,\n        query, gqlQuery,\n        cursorId, fetchMoreDiv,\n        fetchMoreDivId\n      )\n    }\n\n    return () => {\n      document.removeEventListener('scroll', scroll)\n      timeAgoRef.current = []\n      refetch()\n    }\n\n    //eslint-disable-next-line\n  }, [])\n  \n  let { loading, error, data, refetch } = useQuery(gqlQuery.current, {\n    variables: {\n      query: Cookies.get('currentUser'),\n      cursorId: null\n    }\n  })\n\n  if (loading) return 'Loading...';\n  if (error) return `Error: ${error}`;\n  \n  handleData(data, feedArr, cursorId, endOfPosts)\n\n  const handleHeader = () => {\n    if (history.location.pathname === '/followers') {\n      return (\n        <h1>Followers</h1>\n      )\n    } else if (history.location.pathname === '/following'){\n      return (\n        <h1>Following</h1>\n      )\n    } else {\n      return (\n        <h1>Activity</h1>\n      )\n    }\n  }\n  \n  return(\n    <div\n      className='followContainer'\n    >\n        <div\n          className='outerContainer'\n        >\n\n          {handleHeader()}\n\n          <div\n            className={\n              history.location.pathname === '/activity' ?\n              'activity' :\n              'followFeedContainer'\n            }\n          >\n            {feedArr.current.map((followOrActivity, i) => {\n              if (history.location.pathname === '/activity') {\n                return (\n                  <div\n                    key={followOrActivity._id}\n                  >\n                    {handleTimeAgo(followOrActivity, timeAgoRef)}\n                    {handleActivity(followOrActivity)}\n                  </div>\n                )\n              } else {\n                var user = followOrActivity.hasOwnProperty('follows') ? \n                followOrActivity.follows : \n                followOrActivity.user\n                return (\n                  <div\n                    key={user._id}\n                    className='followResult'\n                  >\n                    <UserResult\n                      user={user}\n                    />\n                  </div>\n                )\n              }\n            })}\n          </div>\n          <div\n            id='fetchMoreFollowers'\n          >\n          </div>\n        </div>\n\n        <CheckOutTheseBlogs />\n    </div>\n  )\n}\n\nexport default UserFollowersOrFollowingFeed;"]},"metadata":{},"sourceType":"module"}