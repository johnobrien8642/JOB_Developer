{"ast":null,"code":"import _toConsumableArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React from'react';import ReactDOM from'react-dom';import{ApolloClient,InMemoryCache,ApolloProvider,HttpLink}from'@apollo/client';import{BrowserRouter}from'react-router-dom';import{onError}from'@apollo/client/link/error';import{setContext}from'@apollo/client/link/context';import Cookies from'js-cookie';import App from'./components/App';import'./index.css';import Queries from'./graphql/queries';import Mutations from'./graphql/mutations';import{jsx as _jsx}from\"react/jsx-runtime\";var IS_LOGGED_IN=Queries.IS_LOGGED_IN;var VERIFY_USER=Mutations.VERIFY_USER;var token=Cookies.get('auth-token');var port=process.env.PORT||5000;var authLink=setContext(function(_,_ref){var headers=_ref.headers;return{headers:_objectSpread(_objectSpread({},headers),{},{authorization:token?token:\"\"})};});var httpLink=new HttpLink({uri:'https://rumblr.app/graphql'});var errorLink=onError(function(_ref2){var graphQLErrors=_ref2.graphQLErrors,networkError=_ref2.networkError;if(graphQLErrors)graphQLErrors.forEach(function(_ref3){var message=_ref3.message,locations=_ref3.locations,path=_ref3.path;return console.log(\"[GraphQL error]: Message: \".concat(message,\", Location: \").concat(locations,\", Path: \").concat(path));});if(networkError)console.log(\"[Network error]: \".concat(networkError));});var client=new ApolloClient({link:authLink.concat(httpLink),cache:new InMemoryCache({typePolicies:{UserType:{fields:{userFollows:{merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return incoming;}},tagFollows:{merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return incoming;}}}},Query:{fields:{fetchLikesRepostsAndComments:{merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return incoming;}},fetchUserFeed:{keyArgs:['query'],merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];//post_form_util.js #updateCacheCreate and #updateCacheDelete,\n//object with __typename is added to the beginning of the array.\n//This tells merge function that we are adding or deleting a\n//post and would like the incoming array returned.\nif(incoming.length>0&&\"__typename\"in incoming[0]){return incoming.slice(1,incoming.length);}else{var elements=[].concat(_toConsumableArray(existing),_toConsumableArray(incoming)).reduce(function(array,current){return array.map(function(i){return i.__ref;}).includes(current.__ref)?array:[].concat(_toConsumableArray(array),[current]);},[]);return elements;}}},fetchTagFeed:{keyArgs:['query'],merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];//post_form_util.js #updateCacheCreate and #updateCacheDelete,\n//object with __typename is added to the beginning of the array.\n//This tells merge function that we are adding or deleting a\n//post and would like the incoming array returned.\nif(incoming.length>0&&\"__typename\"in incoming[0]){return incoming.slice(1,incoming.length);}else{var elements=[].concat(_toConsumableArray(existing),_toConsumableArray(incoming)).reduce(function(array,current){return array.map(function(i){return i.__ref;}).includes(current.__ref)?array:[].concat(_toConsumableArray(array),[current]);},[]);return elements;}}},fetchAllUserActivity:{keyArgs:['query'],merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];//post_form_util.js #updateCacheCreate and #updateCacheDelete,\n//object with __typename is added to the beginning of the array.\n//This tells merge function that we are adding or deleting a\n//post and would like the incoming array returned.\nif(incoming.length>0&&\"__typename\"in incoming[0]){return incoming.slice(1,incoming.length);}else{var elements=[].concat(_toConsumableArray(existing),_toConsumableArray(incoming)).reduce(function(array,current){return array.map(function(i){return i.__ref;}).includes(current.__ref)?array:[].concat(_toConsumableArray(array),[current]);},[]);return elements;}}},fetchUserFollowers:{keyArgs:['query'],merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];//post_form_util.js #updateCacheCreate and #updateCacheDelete,\n//object with __typename is added to the beginning of the array.\n//This tells merge function that we are adding or deleting a\n//post and would like the incoming array returned.\nif(incoming.length>0&&\"__typename\"in incoming[0]){return incoming.slice(1,incoming.length);}else{var elements=[].concat(_toConsumableArray(existing),_toConsumableArray(incoming)).reduce(function(array,current){return array.map(function(i){return i.__ref;}).includes(current.__ref)?array:[].concat(_toConsumableArray(array),[current]);},[]);return elements;}}},fetchFollowedUsers:{keyArgs:['query'],merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];//post_form_util.js #updateCacheCreate and #updateCacheDelete,\n//object with __typename is added to the beginning of the array.\n//This tells merge function that we are adding or deleting a\n//post and would like the incoming array returned.\nif(incoming.length>0&&\"__typename\"in incoming[0]){return incoming.slice(1,incoming.length);}else{var elements=[].concat(_toConsumableArray(existing),_toConsumableArray(incoming)).reduce(function(array,current){return array.map(function(i){return i.__ref;}).includes(current.__ref)?array:[].concat(_toConsumableArray(array),[current]);},[]);return elements;}}},fetchAllTagFeed:{keyArgs:['query'],merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];//post_form_util.js #updateCacheCreate and #updateCacheDelete,\n//object with __typename is added to the beginning of the array.\n//This tells merge function that we are adding or deleting a\n//post and would like the incoming array returned.\nif(incoming.length>0&&\"__typename\"in incoming[0]){return incoming.slice(1,incoming.length);}else{var elements=[].concat(_toConsumableArray(existing),_toConsumableArray(incoming)).reduce(function(array,current){return array.map(function(i){return i.__ref;}).includes(current.__ref)?array:[].concat(_toConsumableArray(array),[current]);},[]);return elements;}}},fetchCheckOutTheseBlogs:{merge:function merge(){var existing=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var incoming=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return incoming;}}}}}}),errorLink:errorLink});client.writeQuery({query:IS_LOGGED_IN,data:{isLoggedIn:Boolean(token)}});if(token){client.mutate({mutation:VERIFY_USER,variables:{token:token}}).then(function(_ref4){var data=_ref4.data;client.writeQuery({query:IS_LOGGED_IN,data:{isLoggedIn:data.verifyUser.loggedIn}});});}var Root=function Root(){return/*#__PURE__*/_jsx(ApolloProvider,{client:client,children:/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(App,{})})});};ReactDOM.render(/*#__PURE__*/_jsx(Root,{}),document.getElementById('root'));","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/index.js"],"names":["React","ReactDOM","ApolloClient","InMemoryCache","ApolloProvider","HttpLink","BrowserRouter","onError","setContext","Cookies","App","Queries","Mutations","IS_LOGGED_IN","VERIFY_USER","token","get","port","process","env","PORT","authLink","_","headers","authorization","httpLink","uri","errorLink","graphQLErrors","networkError","forEach","message","locations","path","console","log","client","link","concat","cache","typePolicies","UserType","fields","userFollows","merge","existing","incoming","tagFollows","Query","fetchLikesRepostsAndComments","fetchUserFeed","keyArgs","length","slice","elements","reduce","array","current","map","i","__ref","includes","fetchTagFeed","fetchAllUserActivity","fetchUserFollowers","fetchFollowedUsers","fetchAllTagFeed","fetchCheckOutTheseBlogs","writeQuery","query","data","isLoggedIn","Boolean","mutate","mutation","variables","then","verifyUser","loggedIn","Root","render","document","getElementById"],"mappings":"6UAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,OAASC,YAAT,CAAuBC,aAAvB,CACUC,cADV,CAC0BC,QAD1B,KAC0C,gBAD1C,CAEA,OAASC,aAAT,KAA8B,kBAA9B,CACA,OAASC,OAAT,KAAwB,2BAAxB,CACA,OAASC,UAAT,KAA2B,6BAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,kBAAhB,CACA,MAAO,aAAP,CAEA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,C,2CAEA,GAAQC,CAAAA,YAAR,CAAyBF,OAAzB,CAAQE,YAAR,CACA,GAAQC,CAAAA,WAAR,CAAwBF,SAAxB,CAAQE,WAAR,CAEA,GAAMC,CAAAA,KAAK,CAAGN,OAAO,CAACO,GAAR,CAAY,YAAZ,CAAd,CACA,GAAMC,CAAAA,IAAI,CAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,EAAoB,IAAjC,CAEA,GAAMC,CAAAA,QAAQ,CAAGb,UAAU,CAAC,SAACc,CAAD,MAAoB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,CAC9C,MAAO,CACLA,OAAO,gCACFA,OADE,MAELC,aAAa,CAAET,KAAK,CAAGA,KAAH,CAAW,EAF1B,EADF,CAAP,CAMD,CAP0B,CAA3B,CASA,GAAMU,CAAAA,QAAQ,CAAG,GAAIpB,CAAAA,QAAJ,CAAa,CAC5BqB,GAAG,CAAE,4BADuB,CAAb,CAAjB,CAIA,GAAMC,CAAAA,SAAS,CAAGpB,OAAO,CAAC,eAAqC,IAAlCqB,CAAAA,aAAkC,OAAlCA,aAAkC,CAAnBC,YAAmB,OAAnBA,YAAmB,CAC7D,GAAID,aAAJ,CACAA,aAAa,CAACE,OAAd,CAAsB,mBAAGC,CAAAA,OAAH,OAAGA,OAAH,CAAYC,SAAZ,OAAYA,SAAZ,CAAuBC,IAAvB,OAAuBA,IAAvB,OACpBC,CAAAA,OAAO,CAACC,GAAR,qCAC+BJ,OAD/B,wBACqDC,SADrD,oBACyEC,IADzE,EADoB,EAAtB,EAMA,GAAIJ,YAAJ,CAAkBK,OAAO,CAACC,GAAR,4BAAgCN,YAAhC,GACnB,CATwB,CAAzB,CAWA,GAAMO,CAAAA,MAAM,CAAG,GAAIlC,CAAAA,YAAJ,CAAiB,CAC9BmC,IAAI,CAAEhB,QAAQ,CAACiB,MAAT,CAAgBb,QAAhB,CADwB,CAE9Bc,KAAK,CAAE,GAAIpC,CAAAA,aAAJ,CAAkB,CACvBqC,YAAY,CAAE,CACZC,QAAQ,CAAE,CACRC,MAAM,CAAE,CACNC,WAAW,CAAE,CACXC,KADW,iBACyB,IAA9BC,CAAAA,QAA8B,2DAAnB,EAAmB,IAAfC,CAAAA,QAAe,2DAAJ,EAAI,CAClC,MAAOA,CAAAA,QAAP,CACD,CAHU,CADP,CAMNC,UAAU,CAAE,CACVH,KADU,iBAC0B,IAA9BC,CAAAA,QAA8B,2DAAnB,EAAmB,IAAfC,CAAAA,QAAe,2DAAJ,EAAI,CAClC,MAAOA,CAAAA,QAAP,CACD,CAHS,CANN,CADA,CADE,CAeZE,KAAK,CAAE,CACNN,MAAM,CAAE,CACNO,4BAA4B,CAAE,CAC5BL,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CACvC,MAAOA,CAAAA,QAAP,CACD,CAH2B,CADxB,CAMPI,aAAa,CAAE,CACbC,OAAO,CAAE,CAAC,OAAD,CADI,CAEXP,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CAEzC;AACA;AACA;AACA;AACA,GAAIA,QAAQ,CAACM,MAAT,CAAkB,CAAlB,EAAuB,cAAgBN,CAAAA,QAAQ,CAAC,CAAD,CAAnD,CAAwD,CACtD,MAAOA,CAAAA,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAkBP,QAAQ,CAACM,MAA3B,CAAP,CACD,CAFD,IAEO,CACL,GAAME,CAAAA,QAAQ,CAAG,6BAAIT,QAAJ,qBAAiBC,QAAjB,GAA2BS,MAA3B,CAAkC,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACrE,MAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAN,EAAX,EAAwBC,QAAxB,CAAiCJ,OAAO,CAACG,KAAzC,EAAkDJ,KAAlD,8BAA8DA,KAA9D,GAAqEC,OAArE,EAAP,CACD,CAFgB,CAEd,EAFc,CAAjB,CAIA,MAAOH,CAAAA,QAAP,CACD,CACF,CAjBY,CANR,CAyBPQ,YAAY,CAAE,CACZX,OAAO,CAAE,CAAC,OAAD,CADG,CAEVP,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CAEzC;AACA;AACA;AACA;AACA,GAAIA,QAAQ,CAACM,MAAT,CAAkB,CAAlB,EAAuB,cAAgBN,CAAAA,QAAQ,CAAC,CAAD,CAAnD,CAAwD,CACtD,MAAOA,CAAAA,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAkBP,QAAQ,CAACM,MAA3B,CAAP,CACD,CAFD,IAEO,CACL,GAAME,CAAAA,QAAQ,CAAG,6BAAIT,QAAJ,qBAAiBC,QAAjB,GAA2BS,MAA3B,CAAkC,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACrE,MAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAN,EAAX,EAAwBC,QAAxB,CAAiCJ,OAAO,CAACG,KAAzC,EAAkDJ,KAAlD,8BAA8DA,KAA9D,GAAqEC,OAArE,EAAP,CACD,CAFgB,CAEd,EAFc,CAAjB,CAIA,MAAOH,CAAAA,QAAP,CACD,CACF,CAjBW,CAzBP,CA4CPS,oBAAoB,CAAE,CACpBZ,OAAO,CAAE,CAAC,OAAD,CADW,CAElBP,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CACzC;AACA;AACA;AACA;AACA,GAAIA,QAAQ,CAACM,MAAT,CAAkB,CAAlB,EAAuB,cAAgBN,CAAAA,QAAQ,CAAC,CAAD,CAAnD,CAAwD,CACtD,MAAOA,CAAAA,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAkBP,QAAQ,CAACM,MAA3B,CAAP,CACD,CAFD,IAEO,CACL,GAAME,CAAAA,QAAQ,CAAG,6BAAIT,QAAJ,qBAAiBC,QAAjB,GAA2BS,MAA3B,CAAkC,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACrE,MAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAN,EAAX,EAAwBC,QAAxB,CAAiCJ,OAAO,CAACG,KAAzC,EAAkDJ,KAAlD,8BAA8DA,KAA9D,GAAqEC,OAArE,EAAP,CACD,CAFgB,CAEd,EAFc,CAAjB,CAIA,MAAOH,CAAAA,QAAP,CACD,CACF,CAhBmB,CA5Cf,CA8DPU,kBAAkB,CAAE,CAClBb,OAAO,CAAE,CAAC,OAAD,CADS,CAEhBP,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CACzC;AACA;AACA;AACA;AACA,GAAIA,QAAQ,CAACM,MAAT,CAAkB,CAAlB,EAAuB,cAAgBN,CAAAA,QAAQ,CAAC,CAAD,CAAnD,CAAwD,CACtD,MAAOA,CAAAA,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAkBP,QAAQ,CAACM,MAA3B,CAAP,CACD,CAFD,IAEO,CACL,GAAME,CAAAA,QAAQ,CAAG,6BAAIT,QAAJ,qBAAiBC,QAAjB,GAA2BS,MAA3B,CAAkC,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACrE,MAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAN,EAAX,EAAwBC,QAAxB,CAAiCJ,OAAO,CAACG,KAAzC,EAAkDJ,KAAlD,8BAA8DA,KAA9D,GAAqEC,OAArE,EAAP,CACD,CAFgB,CAEd,EAFc,CAAjB,CAIA,MAAOH,CAAAA,QAAP,CACD,CACF,CAhBiB,CA9Db,CAgFPW,kBAAkB,CAAE,CAClBd,OAAO,CAAE,CAAC,OAAD,CADS,CAEhBP,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CACzC;AACA;AACA;AACA;AACA,GAAIA,QAAQ,CAACM,MAAT,CAAkB,CAAlB,EAAuB,cAAgBN,CAAAA,QAAQ,CAAC,CAAD,CAAnD,CAAwD,CACtD,MAAOA,CAAAA,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAkBP,QAAQ,CAACM,MAA3B,CAAP,CACD,CAFD,IAEO,CACL,GAAME,CAAAA,QAAQ,CAAG,6BAAIT,QAAJ,qBAAiBC,QAAjB,GAA2BS,MAA3B,CAAkC,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACrE,MAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAN,EAAX,EAAwBC,QAAxB,CAAiCJ,OAAO,CAACG,KAAzC,EAAkDJ,KAAlD,8BAA8DA,KAA9D,GAAqEC,OAArE,EAAP,CACD,CAFgB,CAEd,EAFc,CAAjB,CAIA,MAAOH,CAAAA,QAAP,CACD,CACF,CAhBiB,CAhFb,CAkGPY,eAAe,CAAE,CACff,OAAO,CAAE,CAAC,OAAD,CADM,CAEbP,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CACzC;AACA;AACA;AACA;AACA,GAAIA,QAAQ,CAACM,MAAT,CAAkB,CAAlB,EAAuB,cAAgBN,CAAAA,QAAQ,CAAC,CAAD,CAAnD,CAAwD,CACtD,MAAOA,CAAAA,QAAQ,CAACO,KAAT,CAAe,CAAf,CAAkBP,QAAQ,CAACM,MAA3B,CAAP,CACD,CAFD,IAEO,CACL,GAAME,CAAAA,QAAQ,CAAG,6BAAIT,QAAJ,qBAAiBC,QAAjB,GAA2BS,MAA3B,CAAkC,SAACC,KAAD,CAAQC,OAAR,CAAoB,CACrE,MAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,KAAN,EAAX,EAAwBC,QAAxB,CAAiCJ,OAAO,CAACG,KAAzC,EAAkDJ,KAAlD,8BAA8DA,KAA9D,GAAqEC,OAArE,EAAP,CACD,CAFgB,CAEd,EAFc,CAAjB,CAIA,MAAOH,CAAAA,QAAP,CACD,CACF,CAhBc,CAlGV,CAoHPa,uBAAuB,CAAE,CACvBvB,KAAK,CAAE,gBAAkC,IAAjCC,CAAAA,QAAiC,2DAAtB,EAAsB,IAAlBC,CAAAA,QAAkB,2DAAP,EAAO,CACvC,MAAOA,CAAAA,QAAP,CACD,CAHsB,CApHlB,CADF,CAfK,CADS,CAAlB,CAFuB,CAgJ9BnB,SAAS,CAATA,SAhJ8B,CAAjB,CAAf,CAmJAS,MAAM,CAACgC,UAAP,CAAkB,CAChBC,KAAK,CAAExD,YADS,CAEhByD,IAAI,CAAE,CACJC,UAAU,CAAEC,OAAO,CAACzD,KAAD,CADf,CAFU,CAAlB,EAOA,GAAIA,KAAJ,CAAW,CACTqB,MAAM,CACHqC,MADH,CACU,CAAEC,QAAQ,CAAE5D,WAAZ,CAAyB6D,SAAS,CAAE,CAAE5D,KAAK,CAALA,KAAF,CAApC,CADV,EAEG6D,IAFH,CAEQ,eAAc,IAAXN,CAAAA,IAAW,OAAXA,IAAW,CAClBlC,MAAM,CAACgC,UAAP,CAAkB,CAChBC,KAAK,CAAExD,YADS,CAEhByD,IAAI,CAAE,CACJC,UAAU,CAAED,IAAI,CAACO,UAAL,CAAgBC,QADxB,CAFU,CAAlB,EAMD,CATH,EAUD,CAED,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjB,mBACE,KAAC,cAAD,EAAgB,MAAM,CAAE3C,MAAxB,uBACE,KAAC,aAAD,wBACE,KAAC,GAAD,IADF,EADF,EADF,CAOD,CARD,CAUAnC,QAAQ,CAAC+E,MAAT,cAAgB,KAAC,IAAD,IAAhB,CAA0BC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAA1B","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ApolloClient, InMemoryCache,\n          ApolloProvider, HttpLink } from '@apollo/client';\nimport { BrowserRouter } from 'react-router-dom';\nimport { onError } from '@apollo/client/link/error';\nimport { setContext } from '@apollo/client/link/context';\nimport Cookies from 'js-cookie';\n\nimport App from './components/App';\nimport './index.css';\n\nimport Queries from './graphql/queries'\nimport Mutations from './graphql/mutations'\n\nconst { IS_LOGGED_IN } = Queries;\nconst { VERIFY_USER } = Mutations;\n\nconst token = Cookies.get('auth-token');\nconst port = process.env.PORT || 5000;\n\nconst authLink = setContext((_, { headers }) => {\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? token : \"\",\n    }\n  }\n});\n\nconst httpLink = new HttpLink({\n  uri: 'https://rumblr.app/graphql'\n});\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (graphQLErrors)\n  graphQLErrors.forEach(({ message, locations, path }) =>\n    console.log(\n      `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n    ),\n  );\n\n  if (networkError) console.log(`[Network error]: ${networkError}`);\n});\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache({\n    typePolicies: {\n      UserType: {\n        fields: {\n          userFollows: {\n            merge(existing = [], incoming = []) {\n              return incoming\n            }\n          },\n          tagFollows: {\n            merge(existing = [], incoming = []) {\n              return incoming\n            }\n          }\n        }\n      },\n      Query: {\n       fields: {\n         fetchLikesRepostsAndComments: {\n           merge: (existing = [], incoming = []) => {\n             return incoming\n           }\n        },\n        fetchUserFeed: {\n          keyArgs: ['query'],\n            merge: (existing = [], incoming = []) => {\n\n            //post_form_util.js #updateCacheCreate and #updateCacheDelete,\n            //object with __typename is added to the beginning of the array.\n            //This tells merge function that we are adding or deleting a\n            //post and would like the incoming array returned.\n            if (incoming.length > 0 && \"__typename\" in incoming[0]) {\n              return incoming.slice(1, incoming.length)\n            } else {\n              const elements = [...existing, ...incoming].reduce((array, current) => {\n                return array.map(i => i.__ref).includes(current.__ref) ? array : [...array, current];\n              }, []);\n            \n              return elements\n            }\n          }\n        },\n        fetchTagFeed: {\n          keyArgs: ['query'],\n            merge: (existing = [], incoming = []) => {\n\n            //post_form_util.js #updateCacheCreate and #updateCacheDelete,\n            //object with __typename is added to the beginning of the array.\n            //This tells merge function that we are adding or deleting a\n            //post and would like the incoming array returned.\n            if (incoming.length > 0 && \"__typename\" in incoming[0]) {\n              return incoming.slice(1, incoming.length)\n            } else {\n              const elements = [...existing, ...incoming].reduce((array, current) => {\n                return array.map(i => i.__ref).includes(current.__ref) ? array : [...array, current];\n              }, []);\n            \n              return elements\n            }\n          }\n        },\n        fetchAllUserActivity: {\n          keyArgs: ['query'],\n            merge: (existing = [], incoming = []) => {\n            //post_form_util.js #updateCacheCreate and #updateCacheDelete,\n            //object with __typename is added to the beginning of the array.\n            //This tells merge function that we are adding or deleting a\n            //post and would like the incoming array returned.\n            if (incoming.length > 0 && \"__typename\" in incoming[0]) {\n              return incoming.slice(1, incoming.length)\n            } else {\n              const elements = [...existing, ...incoming].reduce((array, current) => {\n                return array.map(i => i.__ref).includes(current.__ref) ? array : [...array, current];\n              }, []);\n            \n              return elements\n            }\n          }\n        },\n        fetchUserFollowers: {\n          keyArgs: ['query'],\n            merge: (existing = [], incoming = []) => {\n            //post_form_util.js #updateCacheCreate and #updateCacheDelete,\n            //object with __typename is added to the beginning of the array.\n            //This tells merge function that we are adding or deleting a\n            //post and would like the incoming array returned.\n            if (incoming.length > 0 && \"__typename\" in incoming[0]) {\n              return incoming.slice(1, incoming.length)\n            } else {\n              const elements = [...existing, ...incoming].reduce((array, current) => {\n                return array.map(i => i.__ref).includes(current.__ref) ? array : [...array, current];\n              }, []);\n            \n              return elements\n            }\n          }\n        },\n        fetchFollowedUsers: {\n          keyArgs: ['query'],\n            merge: (existing = [], incoming = []) => {\n            //post_form_util.js #updateCacheCreate and #updateCacheDelete,\n            //object with __typename is added to the beginning of the array.\n            //This tells merge function that we are adding or deleting a\n            //post and would like the incoming array returned.\n            if (incoming.length > 0 && \"__typename\" in incoming[0]) {\n              return incoming.slice(1, incoming.length)\n            } else {\n              const elements = [...existing, ...incoming].reduce((array, current) => {\n                return array.map(i => i.__ref).includes(current.__ref) ? array : [...array, current];\n              }, []);\n            \n              return elements\n            }\n          }\n        },\n        fetchAllTagFeed: {\n          keyArgs: ['query'],\n            merge: (existing = [], incoming = []) => {\n            //post_form_util.js #updateCacheCreate and #updateCacheDelete,\n            //object with __typename is added to the beginning of the array.\n            //This tells merge function that we are adding or deleting a\n            //post and would like the incoming array returned.\n            if (incoming.length > 0 && \"__typename\" in incoming[0]) {\n              return incoming.slice(1, incoming.length)\n            } else {\n              const elements = [...existing, ...incoming].reduce((array, current) => {\n                return array.map(i => i.__ref).includes(current.__ref) ? array : [...array, current];\n              }, []);\n            \n              return elements\n            }\n          }\n        },\n        fetchCheckOutTheseBlogs: {\n          merge: (existing = [], incoming = []) => {\n            return incoming\n          }\n        }\n      }\n    }\n  }\n  }),\n  errorLink\n})\n\nclient.writeQuery({\n  query: IS_LOGGED_IN,\n  data: {\n    isLoggedIn: Boolean(token)\n  }\n})\n\nif (token) {\n  client\n    .mutate({ mutation: VERIFY_USER, variables: { token } })\n    .then(({ data }) => {\n      client.writeQuery({\n        query: IS_LOGGED_IN,\n        data: {\n          isLoggedIn: data.verifyUser.loggedIn\n        }\n      })\n    })\n}\n\nconst Root = () => {\n  return (\n    <ApolloProvider client={client}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </ApolloProvider>\n  )\n}\n\nReactDOM.render(<Root />, document.getElementById('root'));\n\n\n"]},"metadata":{},"sourceType":"module"}