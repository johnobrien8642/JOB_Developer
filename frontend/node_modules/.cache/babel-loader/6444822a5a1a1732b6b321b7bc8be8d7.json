{"ast":null,"code":"import React,{useEffect}from'react';import AudioPlayer from'react-h5-audio-player';import*as mm from'music-metadata-browser';import PostFormUtil from'../../../functions/post_form_util.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var previewAudio=PostFormUtil.previewAudio,removeAudioObj=PostFormUtil.removeAudioObj;var AudioFileInput=function AudioFileInput(_ref){var displayBodyImageAndTextInput=_ref.displayBodyImageAndTextInput,setDisplayBodyImageAndTextInput=_ref.setDisplayBodyImageAndTextInput,post=_ref.post,update=_ref.update,audioFile=_ref.audioFile,setAudioFile=_ref.setAudioFile,title=_ref.title,setTitle=_ref.setTitle,artist=_ref.artist,setArtist=_ref.setArtist,album=_ref.album,setAlbum=_ref.setAlbum,src=_ref.src,setSrc=_ref.setSrc,audioObj=_ref.audioObj,setAudioObj=_ref.setAudioObj,active=_ref.active,setActive=_ref.setActive,objsToClean=_ref.objsToClean;useEffect(function(){if(post){//eslint-disable-next-line\nsetTitle(title=post.audioMeta.title);//eslint-disable-next-line\nsetArtist(artist=post.audioMeta.artist);//eslint-disable-next-line\nsetAlbum(album=post.audioMeta.album);//eslint-disable-next-line\nsetSrc(src=post.audioFile.url);//eslint-disable-next-line\nsetActive(active=true);}//eslint-disable-next-line\n},[]);useEffect(function(){if(audioFile||src){//eslint-disable-next-line\nsetDisplayBodyImageAndTextInput(displayBodyImageAndTextInput=true);}},[setDisplayBodyImageAndTextInput,displayBodyImageAndTextInput]);var renderUpdateFileInput=function renderUpdateFileInput(){if(update){return/*#__PURE__*/ (// <div>\n_jsxs(\"label\",{className:\"audioFileInputCustomLabel\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/nolan/64/headphones.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Upload a different audio file\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"audioFileInput\",type:\"file\",accept:\".mp3, .mp4, .wav, .aiff\",onChange:function onChange(e){previewAudio(e,mm,audioFile,setAudioFile,title,setTitle,artist,setArtist,album,setAlbum,src,setSrc,active,setActive,objsToClean,post);document.getElementById('audioFileInput').value='';}})]})// </div>\n);}};if(active){return/*#__PURE__*/_jsxs(\"div\",{className:\"audioFilePlayer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"removeBtn\",type:\"button\",disabled:update?true:false,onClick:function onClick(){removeAudioObj(post,audioObj,setAudioObj,audioFile,setAudioFile,active,setActive,objsToClean);},children:\"X\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Title:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:function onChange(e){setTitle(title=e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Artist:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:artist,onChange:function onChange(e){setArtist(artist=e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Album:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:album,onChange:function onChange(e){setAlbum(album=e.target.value);}})]}),/*#__PURE__*/_jsx(AudioPlayer,{src:src}),renderUpdateFileInput()]});}else{return/*#__PURE__*/_jsxs(\"label\",{className:\"audioFileInputCustomLabel\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/nolan/64/headphones.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Upload an audio file\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"audioFileInput\",type:\"file\",accept:\".mp3, .mp4, .wav, .aiff\",onChange:function onChange(e){previewAudio(e,mm,audioFile,setAudioFile,title,setTitle,artist,setArtist,album,setAlbum,src,setSrc,active,setActive,objsToClean,post);document.getElementById('audioFileInput').value='';}})]});}};export default AudioFileInput;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/components/forms/inputTypes/Audio_File_Input.js"],"names":["React","useEffect","AudioPlayer","mm","PostFormUtil","previewAudio","removeAudioObj","AudioFileInput","displayBodyImageAndTextInput","setDisplayBodyImageAndTextInput","post","update","audioFile","setAudioFile","title","setTitle","artist","setArtist","album","setAlbum","src","setSrc","audioObj","setAudioObj","active","setActive","objsToClean","audioMeta","url","renderUpdateFileInput","e","document","getElementById","value","target"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport AudioPlayer from 'react-h5-audio-player';\nimport * as mm from 'music-metadata-browser';\nimport PostFormUtil from '../../../functions/post_form_util.js'\nconst { previewAudio, removeAudioObj } = PostFormUtil;\n\nconst AudioFileInput = ({\n  displayBodyImageAndTextInput,\n  setDisplayBodyImageAndTextInput,\n  post, \n  update, \n  audioFile,\n  setAudioFile,\n  title, \n  setTitle, \n  artist, \n  setArtist, \n  album,\n  setAlbum,\n  src,\n  setSrc,\n  audioObj, setAudioObj, \n  active, setActive,\n  objsToClean\n}) => {\n\n  useEffect(() => {\n    if (post) {\n      //eslint-disable-next-line\n      setTitle(title = post.audioMeta.title)\n      //eslint-disable-next-line\n      setArtist(artist = post.audioMeta.artist) \n      //eslint-disable-next-line\n      setAlbum(album = post.audioMeta.album) \n      //eslint-disable-next-line\n      setSrc(src = post.audioFile.url) \n      //eslint-disable-next-line\n      setActive(active = true)\n    }\n\n    //eslint-disable-next-line\n  }, [])\n\n  useEffect(() => {\n    if (audioFile || src) {\n      //eslint-disable-next-line\n      setDisplayBodyImageAndTextInput(displayBodyImageAndTextInput = true)\n    }\n\n  }, [setDisplayBodyImageAndTextInput, displayBodyImageAndTextInput])\n\n  const renderUpdateFileInput = () => {\n    if (update) {\n      return (\n        // <div>\n        <label\n          className='audioFileInputCustomLabel'\n        >\n          <div>\n            <img \n              src=\"https://img.icons8.com/nolan/64/headphones.png\"\n              alt=''\n            />\n            <span>Upload a different audio file</span>\n          </div>\n          <input\n            id='audioFileInput'\n            type='file'\n            accept='.mp3, .mp4, .wav, .aiff'\n            onChange={e => {\n              previewAudio(\n                e,\n                mm,\n                audioFile,\n                setAudioFile,\n                title, \n                setTitle, \n                artist,\n                setArtist, \n                album,\n                setAlbum,\n                src,\n                setSrc,\n                active,\n                setActive,\n                objsToClean,\n                post,\n              )\n\n              document.getElementById('audioFileInput').value = ''\n            }}\n          />\n        </label>\n        // </div>\n      )\n    }\n  }\n\n  if (active) {\n    return (\n      <div\n        className='audioFilePlayer'\n      >\n        <button\n          className='removeBtn'\n          type='button'\n          disabled={update ? true : false}\n          onClick={() =>  {\n            removeAudioObj(\n              post,\n              audioObj,\n              setAudioObj,\n              audioFile,\n              setAudioFile,\n              active, \n              setActive,\n              objsToClean\n            )\n          }}\n        >\n          X\n        </button>\n        <p>Title:\n          <input \n            type='text'\n            value={title}\n            onChange={e => {\n              setTitle(title = e.target.value)\n            }}\n          /> \n        </p>\n        <p>Artist: \n          <input \n            type='text'\n            value={artist}\n            onChange={e => {\n              setArtist(artist = e.target.value) \n            }}\n          />\n        </p>\n        <p>Album: \n          <input \n            type='text'\n            value={album}\n            onChange={e => {\n              setAlbum(album = e.target.value) \n            }}\n          />\n        </p>\n        <AudioPlayer\n          src={src}\n        />\n        {renderUpdateFileInput()}\n      </div>\n    )\n  } else {\n    return(\n      <label\n        className='audioFileInputCustomLabel'\n      >\n        <div>\n          <img \n            src=\"https://img.icons8.com/nolan/64/headphones.png\"\n            alt=''\n          />\n          <span>Upload an audio file</span>\n        </div>\n        <input\n          id='audioFileInput'\n          type='file'\n          accept='.mp3, .mp4, .wav, .aiff'\n          onChange={e => {\n            previewAudio(\n              e,\n              mm,\n              audioFile,\n              setAudioFile,\n              title, \n              setTitle, \n              artist,\n              setArtist, \n              album,\n              setAlbum,\n              src,\n              setSrc,\n              active,\n              setActive,\n              objsToClean,\n              post,\n            )\n            document.getElementById('audioFileInput').value = ''\n          }}\n        />\n      </label>\n    )\n  }\n}\n\nexport default AudioFileInput;"]},"metadata":{},"sourceType":"module"}