{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useMutation}from'@apollo/client';import Cookies from'js-cookie';import Queries from'../../../../graphql/queries.js';import Mutations from'../../../../graphql/mutations.js';import UpdateCacheUtil from'../../../posts/util/functions/update_cache_util.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var filterTag=UpdateCacheUtil.filterTag;var ADD_FILTER_TAG=Mutations.ADD_FILTER_TAG,DELETE_FILTER_TAG=Mutations.DELETE_FILTER_TAG;var FETCH_USER=Queries.FETCH_USER;var FilterTagInput=function FilterTagInput(_ref){var mobile=_ref.mobile,user=_ref.user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),tag=_useState2[0],setTag=_useState2[1];var _useState3=useState(user.filteredTags.length>0?true:false),_useState4=_slicedToArray(_useState3,2),active=_useState4[0],setActive=_useState4[1];var _useMutation=useMutation(ADD_FILTER_TAG,{update:function update(client,_ref2){var data=_ref2.data;var addFilterTag=data.addFilterTag;var currentUser=Cookies.get('currentUser');var query=FETCH_USER;filterTag(client,addFilterTag,currentUser,query);},onCompleted:function onCompleted(){setTag(tag='');}}),_useMutation2=_slicedToArray(_useMutation,1),addFilterTag=_useMutation2[0];var _useMutation3=useMutation(DELETE_FILTER_TAG,{update:function update(client,_ref3){var data=_ref3.data;var deleteFilterTag=data.deleteFilterTag;var currentUser=Cookies.get('currentUser');var query=FETCH_USER;filterTag(client,deleteFilterTag,currentUser,query);},onCompleted:function onCompleted(){setTag(tag='');}}),_useMutation4=_slicedToArray(_useMutation3,1),deleteFilterTag=_useMutation4[0];if(active){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();addFilterTag({variables:{tag:tag,user:Cookies.get('currentUser')}});},children:/*#__PURE__*/_jsxs(\"div\",{className:\"filterTagInputContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Filter a tag\",value:tag,onChange:function onChange(e){setTag(tag=e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"addBtn\",type:\"submit\",disabled:tag?false:true,children:\"Add\"})]})}),/*#__PURE__*/_jsx(\"ul\",{children:user.filteredTags.map(function(tag,i){return/*#__PURE__*/_jsxs(\"li\",{className:\"filteredTag\",children:[/*#__PURE__*/_jsx(\"span\",{children:tag}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){deleteFilterTag({variables:{tag:tag,user:Cookies.get('currentUser')}});},children:\"Remove\"})]},tag._id);})})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"settingContainer\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You're not filtering any tags\"}),/*#__PURE__*/_jsx(\"img\",{className:\"editPostBtn\",src:\"https://img.icons8.com/windows/64/000000/edit--v1.png\",alt:\"\",onClick:function onClick(){setActive(active=true);}})]});}};export default FilterTagInput;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/user/util/components/Filter_Tag_Input.js"],"names":["React","useState","useMutation","Cookies","Queries","Mutations","UpdateCacheUtil","filterTag","ADD_FILTER_TAG","DELETE_FILTER_TAG","FETCH_USER","FilterTagInput","mobile","user","tag","setTag","filteredTags","length","active","setActive","update","client","data","addFilterTag","currentUser","get","query","onCompleted","deleteFilterTag","e","preventDefault","variables","target","value","map","i","_id"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,MAAOC,CAAAA,OAAP,KAAoB,gCAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,kCAAtB,CACA,MAAOC,CAAAA,eAAP,KAA4B,oDAA5B,C,wFACA,GAAQC,CAAAA,SAAR,CAAsBD,eAAtB,CAAQC,SAAR,CACA,GAAQC,CAAAA,cAAR,CAA8CH,SAA9C,CAAQG,cAAR,CAAwBC,iBAAxB,CAA8CJ,SAA9C,CAAwBI,iBAAxB,CACA,GAAQC,CAAAA,UAAR,CAAuBN,OAAvB,CAAQM,UAAR,CAGA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,MAGjB,IAFJC,CAAAA,MAEI,MAFJA,MAEI,CADJC,IACI,MADJA,IACI,CACJ,cAAoBZ,QAAQ,CAAC,EAAD,CAA5B,wCAAKa,GAAL,eAAUC,MAAV,eACA,eAA0Bd,QAAQ,CAACY,IAAI,CAACG,YAAL,CAAkBC,MAAlB,CAA2B,CAA3B,CAA+B,IAA/B,CAAsC,KAAvC,CAAlC,yCAAKC,MAAL,eAAaC,SAAb,eACA,iBAAqBjB,WAAW,CAACM,cAAD,CAAiB,CAC/CY,MAD+C,iBACxCC,MADwC,OACtB,IAARC,CAAAA,IAAQ,OAARA,IAAQ,CACvB,GAAQC,CAAAA,YAAR,CAAyBD,IAAzB,CAAQC,YAAR,CACA,GAAIC,CAAAA,WAAW,CAAGrB,OAAO,CAACsB,GAAR,CAAY,aAAZ,CAAlB,CACA,GAAIC,CAAAA,KAAK,CAAGhB,UAAZ,CAEAH,SAAS,CAACc,MAAD,CAASE,YAAT,CAAuBC,WAAvB,CAAoCE,KAApC,CAAT,CACD,CAP8C,CAQ/CC,WAR+C,uBAQjC,CACZZ,MAAM,CAACD,GAAG,CAAG,EAAP,CAAN,CACD,CAV8C,CAAjB,CAAhC,8CAAKS,YAAL,kBAaA,kBAAwBrB,WAAW,CAACO,iBAAD,CAAoB,CACrDW,MADqD,iBAC9CC,MAD8C,OAC5B,IAARC,CAAAA,IAAQ,OAARA,IAAQ,CACvB,GAAQM,CAAAA,eAAR,CAA4BN,IAA5B,CAAQM,eAAR,CACA,GAAIJ,CAAAA,WAAW,CAAGrB,OAAO,CAACsB,GAAR,CAAY,aAAZ,CAAlB,CACA,GAAIC,CAAAA,KAAK,CAAGhB,UAAZ,CAEAH,SAAS,CAACc,MAAD,CAASO,eAAT,CAA0BJ,WAA1B,CAAuCE,KAAvC,CAAT,CACD,CAPoD,CAQrDC,WARqD,uBAQvC,CACZZ,MAAM,CAACD,GAAG,CAAG,EAAP,CAAN,CACD,CAVoD,CAApB,CAAnC,+CAAKc,eAAL,kBAaA,GAAIV,MAAJ,CAAY,CACV,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,aACA,QAAQ,CAAE,kBAAAW,CAAC,CAAI,CACbA,CAAC,CAACC,cAAF,GACAP,YAAY,CAAC,CACTQ,SAAS,CAAE,CACTjB,GAAG,CAAEA,GADI,CAETD,IAAI,CAAEV,OAAO,CAACsB,GAAR,CAAY,aAAZ,CAFG,CADF,CAAD,CAAZ,CAMC,CATH,uBAWE,aACE,SAAS,CAAC,yBADZ,wBAGE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,cAFd,CAGE,KAAK,CAAEX,GAHT,CAIE,QAAQ,CAAE,kBAAAe,CAAC,CAAI,CACbd,MAAM,CAACD,GAAG,CAAGe,CAAC,CAACG,MAAF,CAASC,KAAhB,CAAN,CACD,CANH,EAHF,cAWE,eACE,SAAS,CAAC,QADZ,CAEE,IAAI,CAAC,QAFP,CAGE,QAAQ,CAAEnB,GAAG,CAAG,KAAH,CAAW,IAH1B,iBAXF,GAXF,EADF,cAgCE,oBACGD,IAAI,CAACG,YAAL,CAAkBkB,GAAlB,CAAsB,SAACpB,GAAD,CAAMqB,CAAN,CAAY,CACjC,mBACE,YACE,SAAS,CAAC,aADZ,wBAIE,sBAAOrB,GAAP,EAJF,cAKE,eACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,kBAAM,CACbc,eAAe,CAAC,CACdG,SAAS,CAAE,CACXjB,GAAG,CAAEA,GADM,CAETD,IAAI,CAAEV,OAAO,CAACsB,GAAR,CAAY,aAAZ,CAFG,CADG,CAAD,CAAf,CAMD,CATH,oBALF,GAEOX,GAAG,CAACsB,GAFX,CADF,CAqBD,CAtBA,CADH,EAhCF,GADF,CA4DD,CA7DD,IA6DO,CACL,mBACE,aACE,SAAS,CAAC,kBADZ,wBAGE,oDAHF,cAIE,YACE,SAAS,CAAC,aADZ,CAEE,GAAG,CAAC,uDAFN,CAGE,GAAG,CAAC,EAHN,CAIE,OAAO,CAAE,kBAAM,CACbjB,SAAS,CAACD,MAAM,CAAG,IAAV,CAAT,CACD,CANH,EAJF,GADF,CAeD,CACF,CA9GD,CAgHA,cAAeP,CAAAA,cAAf","sourcesContent":["import React, { useState } from 'react'\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport Queries from '../../../../graphql/queries.js';\nimport Mutations from '../../../../graphql/mutations.js';\nimport UpdateCacheUtil from '../../../posts/util/functions/update_cache_util.js';\nconst { filterTag } = UpdateCacheUtil;\nconst { ADD_FILTER_TAG, DELETE_FILTER_TAG } = Mutations;\nconst { FETCH_USER } = Queries;\n\n\nconst FilterTagInput = ({\n  mobile,\n  user\n}) => {\n  let [tag, setTag] = useState('')\n  let [active, setActive] = useState(user.filteredTags.length > 0 ? true : false)\n  let [addFilterTag] = useMutation(ADD_FILTER_TAG, {\n    update(client, { data }) {\n      const { addFilterTag } = data;\n      var currentUser = Cookies.get('currentUser')\n      var query = FETCH_USER\n      \n      filterTag(client, addFilterTag, currentUser, query)\n    },\n    onCompleted() {\n      setTag(tag = '')\n    }\n  })\n\n  let [deleteFilterTag] = useMutation(DELETE_FILTER_TAG, {\n    update(client, { data }) {\n      const { deleteFilterTag } = data;\n      var currentUser = Cookies.get('currentUser')\n      var query = FETCH_USER\n      \n      filterTag(client, deleteFilterTag, currentUser, query)\n    },\n    onCompleted() {\n      setTag(tag = '')\n    }\n  })\n\n  if (active) {\n    return (\n      <React.Fragment>\n        <form\n        onSubmit={e => {\n          e.preventDefault()    \n          addFilterTag({\n              variables: {\n                tag: tag,\n                user: Cookies.get('currentUser')\n              }\n            })\n          }}\n        >\n          <div\n            className='filterTagInputContainer'\n          >\n            <input\n              type='text'\n              placeholder='Filter a tag'\n              value={tag}\n              onChange={e => {\n                setTag(tag = e.target.value)\n              }}\n            />\n            <button\n              className='addBtn'\n              type='submit'\n              disabled={tag ? false : true}\n            >\n              Add\n            </button>\n          </div>\n        </form>\n        <ul>\n          {user.filteredTags.map((tag, i) => {\n            return (\n              <li\n                className='filteredTag'\n                key={tag._id}\n              >\n                <span>{tag}</span>\n                <button\n                  type='button'\n                  onClick={() => {\n                    deleteFilterTag({\n                      variables: {\n                      tag: tag,\n                        user: Cookies.get('currentUser')\n                      }\n                    })\n                  }}\n                >\n                  Remove\n                </button>\n              </li>\n            )\n          })}\n        </ul>\n      </React.Fragment>\n    )\n  } else {\n    return (\n      <div\n        className='settingContainer'\n      >\n        <p>You're not filtering any tags</p>\n        <img\n          className='editPostBtn'\n          src=\"https://img.icons8.com/windows/64/000000/edit--v1.png\"\n          alt=''\n          onClick={() => {\n            setActive(active = true)\n          }}\n        />\n      </div>\n    )\n  }\n}\n\nexport default FilterTagInput;"]},"metadata":{},"sourceType":"module"}