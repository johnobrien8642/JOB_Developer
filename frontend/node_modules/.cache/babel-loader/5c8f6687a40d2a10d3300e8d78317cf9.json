{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{useMutation}from'@apollo/client';import Cookies from'js-cookie';import UserSettingsUtil from'../functions/user_settings_util.js';import Queries from'../../../../graphql/queries.js';import Mutations from'../../../../graphql/mutations.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FETCH_USER=Queries.FETCH_USER;var UPDATE_USER_EMAIL=Mutations.UPDATE_USER_EMAIL;var updateCacheUpdateEmail=UserSettingsUtil.updateCacheUpdateEmail;var Email=function Email(_ref){var userEmail=_ref.userEmail;var emailRef=useRef(userEmail);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setError=_useState8[1];var _useMutation=useMutation(UPDATE_USER_EMAIL,{update:function update(client,_ref2){var data=_ref2.data;var updateUserEmail=data.updateUserEmail;var currentUser=Cookies.get('currentUser');var query=FETCH_USER;updateCacheUpdateEmail(client,updateUserEmail,currentUser,query);},onCompleted:function onCompleted(data){emailRef.current=data.updateUserEmail.email;resetInputs();setActive(active=false);},onError:function onError(error){setError(errorMessage=error.message);}}),_useMutation2=_slicedToArray(_useMutation,1),updateUserEmail=_useMutation2[0];var resetInputs=function resetInputs(){setEmail(email='');setPassword(password='');setError(errorMessage='');};if(active){return/*#__PURE__*/_jsx(\"form\",{className:\"upload\",onSubmit:function onSubmit(e){e.preventDefault();updateUserEmail({variables:{email:email,password:password,user:Cookies.get('currentUser')}});},children:/*#__PURE__*/_jsxs(\"div\",{className:\"inputAndBtnContainer\",children:[/*#__PURE__*/_jsx(\"input\",{value:userEmail,onChange:function onChange(e){setEmail(email=e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{className:\"errMessage\",children:errorMessage?\"\".concat(errorMessage):''}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm password\",value:password,onChange:function onChange(e){setPassword(password=e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",type:\"button\",onClick:function onClick(){resetInputs();setActive(active=false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"save\",type:\"submit\",children:\"Save\"})]})]})});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"settingContainer\",children:[/*#__PURE__*/_jsx(\"p\",{children:emailRef.current}),/*#__PURE__*/_jsx(\"img\",{className:\"editPostBtn\",src:\"https://img.icons8.com/windows/64/000000/edit--v1.png\",alt:\"\",onClick:function onClick(){setActive(active=true);}})]});}};export default Email;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/user/util/components/Email.js"],"names":["React","useState","useRef","useMutation","Cookies","UserSettingsUtil","Queries","Mutations","FETCH_USER","UPDATE_USER_EMAIL","updateCacheUpdateEmail","Email","userEmail","emailRef","active","setActive","email","setEmail","password","setPassword","errorMessage","setError","update","client","data","updateUserEmail","currentUser","get","query","onCompleted","current","resetInputs","onError","error","message","e","preventDefault","variables","user","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport UserSettingsUtil from '../functions/user_settings_util.js'\n\nimport Queries from '../../../../graphql/queries.js';\nimport Mutations from '../../../../graphql/mutations.js';\nconst { FETCH_USER } = Queries;\nconst { UPDATE_USER_EMAIL } = Mutations;\nconst { updateCacheUpdateEmail } = UserSettingsUtil;\n\nconst Email = ({\n  userEmail\n}) => {\n  let emailRef = useRef(userEmail)\n  let [active, setActive] = useState(false);\n  let [email, setEmail] = useState('');\n  let [password, setPassword] = useState('');\n  let [errorMessage, setError] = useState(null);\n\n  let [updateUserEmail] = useMutation(UPDATE_USER_EMAIL, {\n    update(client, { data }) {\n      const { updateUserEmail } = data;\n      var currentUser = Cookies.get('currentUser')\n      var query = FETCH_USER\n      \n      updateCacheUpdateEmail(client, updateUserEmail, currentUser, query)\n    },\n    onCompleted(data) {\n      emailRef.current = data.updateUserEmail.email\n      resetInputs()\n      setActive(active = false)\n    },\n    onError(error) {\n      setError(errorMessage = error.message)\n    }\n  })\n\n  const resetInputs = () => {\n    setEmail(email = '')\n    setPassword(password = '')\n    setError(errorMessage = '')\n  }\n\n  if (active) {\n    return (\n      <form\n        className='upload'\n        onSubmit={e => {\n          e.preventDefault()\n          updateUserEmail({\n            variables: {\n              email: email,\n              password: password,\n              user: Cookies.get('currentUser')\n            }\n          })\n        }}\n      >\n        <div\n          className='inputAndBtnContainer'\n        >\n          <input\n            value={userEmail}\n            onChange={e => {\n              setEmail(email = e.target.value)\n            }}\n          />\n          <p\n            className='errMessage'\n          >{errorMessage ? `${errorMessage}` : ''}</p>\n          <input\n            type='password'\n            placeholder='Confirm password'\n            value={password}\n            onChange={e => {\n              setPassword(password = e.target.value)\n            }}\n          />\n          <div>\n            <button\n              className='cancel'\n              type='button'\n              onClick={() => {\n                resetInputs()\n                setActive(active = false)\n              }}\n            >\n              Cancel\n            </button>\n            <button\n              className='save'\n              type='submit'\n            >\n              Save\n            </button>\n          </div>\n        </div>\n      </form>\n    )\n  } else {\n    return (\n      <div\n        className='settingContainer'\n      >\n        <p>{emailRef.current}</p>\n        <img\n          className='editPostBtn'\n          src=\"https://img.icons8.com/windows/64/000000/edit--v1.png\"\n          alt=''\n          onClick={() => {\n            setActive(active = true)\n          }}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Email;"]},"metadata":{},"sourceType":"module"}