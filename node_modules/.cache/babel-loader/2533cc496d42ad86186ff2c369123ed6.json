{"ast":null,"code":"var _jsxFileName = \"/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/components/forms/inputTypes/Chat_Post_Input.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport DOMPurify from 'dompurify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChatPostInput = ({\n  post,\n  chat,\n  setChat\n}) => {\n  _s();\n\n  let [placeholder, setPlaceholder] = useState(\"<strong>Brother Muzone:</strong> Well we can't stand out here all night...<br><br><strong> Omar Little:</strong> I suppose we can't...<br><br><strong> Brother Muzone:</strong> A man has to have a code.<br><br><strong> Omar Little:</strong> Oh indeed...\");\n  useEffect(() => {\n    if (post) {\n      document.querySelector('.chatText').innerHTML = post.chat;\n    }\n\n    var firstSpace = document.createTextNode(' ');\n    var chatDiv = document.querySelector('.chatText');\n    chatDiv.appendChild(firstSpace); //eslint-disable-next-line\n  }, []);\n\n  const regexChat = () => {\n    var chatDiv = document.querySelector('.chatText');\n    const bolded = chatDiv.innerText.replace(/^(.*?:)/gm, '<strong>$1</strong>').split('\\n').join('<br/>');\n    chatDiv.innerHTML = bolded;\n\n    if (window.getSelection) {\n      var range = document.createRange();\n      range.selectNodeContents(chatDiv);\n      range.collapse(false);\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: !placeholder ? 'chatText' : 'chatText placeholder',\n    contentEditable: true,\n    onInput: e => {\n      regexChat();\n      setChat(chat = e.target.innerHTML);\n    },\n    onFocus: () => {\n      setPlaceholder(placeholder = '');\n    },\n    onKeyDown: e => {\n      if (e.key === 'Enter') {\n        if (window.getSelection) {\n          var selection = window.getSelection(),\n              range = selection.getRangeAt(0),\n              br = document.createElement('br'),\n              br2 = document.createElement('br'),\n              suffixNode;\n          range.deleteContents();\n          range.insertNode(br);\n          range.collapse(false);\n          range.insertNode(br2);\n          range.setEndAfter(br2);\n          range.collapse(false);\n          range.insertNode(suffixNode = document.createTextNode(' '));\n          range.collapse(true);\n          range.setStartAfter(suffixNode);\n          selection.removeAllRanges();\n          selection.addRange(range);\n        }\n      }\n    },\n    dangerouslySetInnerHTML: {\n      __html: DOMPurify.sanitize(post ? post.chat : placeholder)\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChatPostInput, \"TfD8eciEk8RFHlxXyNtdnKSBhnU=\");\n\n_c = ChatPostInput;\nexport default ChatPostInput;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatPostInput\");","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/posts/util/components/forms/inputTypes/Chat_Post_Input.js"],"names":["React","useEffect","useState","DOMPurify","ChatPostInput","post","chat","setChat","placeholder","setPlaceholder","document","querySelector","innerHTML","firstSpace","createTextNode","chatDiv","appendChild","regexChat","bolded","innerText","replace","split","join","window","getSelection","range","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","e","target","key","selection","getRangeAt","br","createElement","br2","suffixNode","deleteContents","insertNode","setEndAfter","setStartAfter","__html","sanitize"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport DOMPurify from 'dompurify';\n\nconst ChatPostInput = ({\n  post, \n  chat, \n  setChat\n}) => {\n  let [placeholder, setPlaceholder] = useState(\"<strong>Brother Muzone:</strong> Well we can't stand out here all night...<br><br><strong> Omar Little:</strong> I suppose we can't...<br><br><strong> Brother Muzone:</strong> A man has to have a code.<br><br><strong> Omar Little:</strong> Oh indeed...\")\n\n  useEffect(() => {\n    if (post) {\n      document.querySelector('.chatText').innerHTML = post.chat\n    }\n\n    var firstSpace = document.createTextNode(' ')\n    var chatDiv = document.querySelector('.chatText')\n    chatDiv.appendChild(firstSpace)\n    //eslint-disable-next-line\n  }, [])\n\n  const regexChat = () => {\n    var chatDiv = document.querySelector('.chatText')\n    \n    const bolded = chatDiv.innerText\n    .replace(/^(.*?:)/gm, '<strong>$1</strong>')\n    .split('\\n').join('<br/>')\n    \n    chatDiv.innerHTML = bolded\n    \n    if (window.getSelection) {\n      var range = document.createRange();\n      range.selectNodeContents(chatDiv)\n      range.collapse(false);\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    }\n  }\n  \n  return (\n    <div\n      className={!placeholder ? 'chatText' : 'chatText placeholder'}\n      contentEditable={true}\n      onInput={e => {\n        regexChat()\n        \n        setChat(chat = e.target.innerHTML)\n      }}\n      onFocus={() => {\n        setPlaceholder(placeholder = '')\n      }}\n      onKeyDown={e => {\n        if (e.key === 'Enter') {\n          if (window.getSelection) {\n            var selection = window.getSelection(),\n            range = selection.getRangeAt(0),\n            br = document.createElement('br'),\n            br2 = document.createElement('br'),\n            suffixNode\n            range.deleteContents();\n            range.insertNode(br);\n            range.collapse(false)\n            range.insertNode(br2);\n            range.setEndAfter(br2);\n            range.collapse(false);\n            range.insertNode((suffixNode = document.createTextNode(' ')));\n            range.collapse(true)\n            range.setStartAfter(suffixNode);\n            selection.removeAllRanges();\n            selection.addRange(range);\n          }\n        }\n      }}\n      dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(post ? post.chat : placeholder) }}\n    >\n    </div>\n  )\n}\n\nexport default ChatPostInput;"]},"metadata":{},"sourceType":"module"}