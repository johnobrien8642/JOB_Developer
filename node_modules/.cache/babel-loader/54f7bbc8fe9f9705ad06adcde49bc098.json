{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{Link}from'react-router-dom';import{useQuery}from'@apollo/client';import Cookies from'js-cookie';import Logout from'../auth/Logout';import Queries from'../../graphql/queries.js';import PostFormUtil from'../posts/util/functions/post_form_util.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FETCH_ACTIVITY_COUNTS=Queries.FETCH_ACTIVITY_COUNTS;var allowScroll=PostFormUtil.allowScroll;var MobileMenuDD=function MobileMenuDD(_ref){var menuOpen=_ref.menuOpen,openMenu=_ref.openMenu,settingsOpen=_ref.settingsOpen,openSettings=_ref.openSettings,userDetailsCounts=_ref.userDetailsCounts,scrollYRef2=_ref.scrollYRef2;var cursorId=useRef(new Date().getTime());useEffect(function(){if(!menuOpen||menuOpen){window.scrollTo(0,scrollYRef2.current);}//eslint-disable-next-line\nreturn function(){refetch();};},[menuOpen,settingsOpen,scrollYRef2]);var _useQuery=useQuery(FETCH_ACTIVITY_COUNTS,{variables:{query:Cookies.get('currentUser'),cursorId:cursorId.current.toString()},pollInterval:10000}),data=_useQuery.data,refetch=_useQuery.refetch;var user=userDetailsCounts.user;var renderActivityCount=function renderActivityCount(){if(data){if(data.fetchActivityCount){return/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:data.fetchActivityCount});}else{return/*#__PURE__*/_jsx(\"span\",{className:\"count\"});}}};if(user){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:menuOpen&&!settingsOpen?'mobileMenuDD open':'mobileMenuDD',children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard/create\",className:\"mobileMenuItem createAPost\",onClick:function onClick(){allowScroll(document);openMenu(menuOpen=false);},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/metro/26/ffffff/edit.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Create a post\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mobileMenuItem\",children:/*#__PURE__*/_jsxs(Link,{className:\"dashboard\",to:\"/dashboard\",onClick:function onClick(){allowScroll(document);openMenu(menuOpen=false);},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/ios-glyphs/38/ffffff/home-page.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Dashboard\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mobileMenuItem\",children:/*#__PURE__*/_jsxs(Link,{className:\"discover\",to:\"/discover\",onClick:function onClick(){allowScroll(document);openMenu(menuOpen=false);},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/ios/34/ffffff/compass--v1.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Discover\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobileMenuItem\",onClick:function onClick(){cursorId.current=new Date().getTime();},children:[/*#__PURE__*/_jsxs(Link,{className:\"activity\",to:\"/activity\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/fluent-systems-filled/38/ffffff/lightning-bolt.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Activity\"})]}),renderActivityCount()]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobileMenuItem\",children:[/*#__PURE__*/_jsxs(Link,{className:\"likes\",to:\"/likes\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/material-sharp/24/ffffff/like--v1.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Likes\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:user.totalLikeCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobileMenuItem\",children:[/*#__PURE__*/_jsxs(Link,{className:\"following\",to:\"/following\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/metro/26/ffffff/gender-neutral-user.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Following\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:user.userFollowCount})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mobileMenuItem\",onClick:function onClick(){openSettings(settingsOpen=true);},children:/*#__PURE__*/_jsxs(Link,{className:\"settings\",to:\"/settings/account\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/material-sharp/24/ffffff/settings.png\",alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Settings\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mobileMenuItem blogDetailHeader\",children:/*#__PURE__*/_jsxs(Link,{to:\"/view/blog/\".concat(user.blogName),children:[/*#__PURE__*/_jsx(\"h3\",{children:user.blogName}),/*#__PURE__*/_jsx(\"p\",{children:user.blogDescription})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobileMenuItem blogDetailData\",children:[/*#__PURE__*/_jsx(Link,{to:\"/view/blog/\".concat(user.blogName),children:/*#__PURE__*/_jsx(\"p\",{children:\"Posts\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"count\",children:user.userPostsCount})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mobileMenuItem blogDetailData\",children:[/*#__PURE__*/_jsx(Link,{to:\"/followers\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Followers\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"followerCount\",children:user.followersCount})]}),/*#__PURE__*/_jsx(Logout,{})]}),/*#__PURE__*/_jsx(\"div\",{className:menuOpen?'mobileMenuDDModal open':'mobileMenuDDModal',onClick:function onClick(){allowScroll(document);openMenu(menuOpen=false);}})]});}else{return/*#__PURE__*/_jsx(\"div\",{});}};export default MobileMenuDD;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/nav/Mobile_Menu_DD.js"],"names":["React","useEffect","useRef","Link","useQuery","Cookies","Logout","Queries","PostFormUtil","FETCH_ACTIVITY_COUNTS","allowScroll","MobileMenuDD","menuOpen","openMenu","settingsOpen","openSettings","userDetailsCounts","scrollYRef2","cursorId","Date","getTime","window","scrollTo","current","refetch","variables","query","get","toString","pollInterval","data","user","renderActivityCount","fetchActivityCount","document","totalLikeCount","userFollowCount","blogName","blogDescription","userPostsCount","followersCount"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useQuery } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport Logout from '../auth/Logout';\n\nimport Queries from '../../graphql/queries.js';\nimport PostFormUtil from '../posts/util/functions/post_form_util.js';\nconst { FETCH_ACTIVITY_COUNTS } = Queries;\nconst { allowScroll } = PostFormUtil;\n\nconst MobileMenuDD = ({\n  menuOpen,\n  openMenu,\n  settingsOpen,\n  openSettings,\n  userDetailsCounts,\n  scrollYRef2\n}) => {\n  let cursorId = useRef(new Date().getTime())\n\n  useEffect(() => {\n    if (!menuOpen || menuOpen) {\n      window.scrollTo(0, scrollYRef2.current)\n    }\n\n    //eslint-disable-next-line\n    return () => {\n      refetch()\n    }\n  }, [menuOpen, settingsOpen, scrollYRef2])\n\n  let { data, refetch } = useQuery(FETCH_ACTIVITY_COUNTS, {\n    variables: {\n      query: Cookies.get('currentUser'),\n      cursorId: cursorId.current.toString()\n    },\n    pollInterval: 10000\n  })\n\n  const { user } = userDetailsCounts;\n\n  const renderActivityCount = () => {\n    if (data) {\n      if (data.fetchActivityCount) {\n        return <span className='count'>{data.fetchActivityCount}</span>\n      } else {\n        return <span className='count'></span>\n      }\n    }\n  }\n\n  if (user) {\n    return (\n      <React.Fragment> \n        <div\n          className={menuOpen && !settingsOpen ? 'mobileMenuDD open' : 'mobileMenuDD'}\n        >\n          <Link\n            to='/dashboard/create'\n            className='mobileMenuItem createAPost'\n            onClick={() => {\n              allowScroll(document)\n              openMenu(menuOpen = false)\n            }}\n          >\n            <div>\n            <img\n              src=\"https://img.icons8.com/metro/26/ffffff/edit.png\"\n              alt=''\n            />\n            <span>Create a post</span>\n            </div>\n          </Link>\n    \n  \n          <div\n            className='mobileMenuItem'\n          >\n            <Link\n              className='dashboard'\n              to='/dashboard'\n                onClick={() => {\n                  allowScroll(document)\n                  openMenu(menuOpen = false)\n                }}\n            >\n              <img\n                src=\"https://img.icons8.com/ios-glyphs/38/ffffff/home-page.png\"\n                alt=''\n              />\n              <span>Dashboard</span>\n            </Link>\n          </div>\n  \n          <div\n            className='mobileMenuItem'\n          >\n            <Link\n              className='discover'\n              to='/discover'\n              onClick={() => {\n                allowScroll(document)\n                openMenu(menuOpen = false)\n              }}\n            >\n              <img\n                src=\"https://img.icons8.com/ios/34/ffffff/compass--v1.png\"\n                alt=''\n              />\n              <span>Discover</span>\n            </Link>\n          </div>\n  \n          <div\n            className='mobileMenuItem'\n            onClick={() => {\n              cursorId.current = new Date().getTime()\n            }}\n          >\n            <Link\n              className='activity'\n              to={`/activity`}\n            >\n              <img\n                src=\"https://img.icons8.com/fluent-systems-filled/38/ffffff/lightning-bolt.png\"\n                alt=''\n              />\n              <span>Activity</span>\n            </Link>\n  \n            \n            {renderActivityCount()}\n          </div>\n  \n          <div\n            className='mobileMenuItem'\n          >\n            <Link\n              className='likes'\n              to='/likes'\n            >\n              <img \n                src=\"https://img.icons8.com/material-sharp/24/ffffff/like--v1.png\"\n                alt=''\n              />\n                <span>Likes</span>\n            </Link>\n            <span className='count'>{user.totalLikeCount}</span>\n          </div>\n  \n          <div\n            className='mobileMenuItem'\n          >\n            <Link \n              className='following'\n              to='/following'\n            >\n              <img\n                src=\"https://img.icons8.com/metro/26/ffffff/gender-neutral-user.png\"\n                alt=''\n              />\n                <span>Following</span>\n            </Link>\n            <span className='count'>{user.userFollowCount}</span>\n          </div>\n  \n          <div\n            className='mobileMenuItem'\n            onClick={() => {\n              openSettings(settingsOpen = true)\n            }}\n          >\n            <Link\n              className='settings'\n              to='/settings/account'\n            >\n              <img\n                src=\"https://img.icons8.com/material-sharp/24/ffffff/settings.png\"\n                alt=''\n              />\n              <span>Settings</span>\n            </Link>\n          </div>\n  \n          <div\n            className='mobileMenuItem blogDetailHeader'\n          >\n            <Link\n              to={`/view/blog/${user.blogName}`} \n            >\n              <h3>{user.blogName}</h3>\n              <p>{user.blogDescription}</p>\n            </Link>\n          </div>\n  \n          <div\n            className='mobileMenuItem blogDetailData'\n          >\n            <Link\n              to={`/view/blog/${user.blogName}`}\n            >\n              <p>Posts</p>\n            </Link>\n            <span className='count'>{user.userPostsCount}</span>\n          </div>\n  \n          <div\n            className='mobileMenuItem blogDetailData'\n          >\n            <Link\n              to={`/followers`}\n            >\n              <p>Followers</p>\n            </Link>\n            <span className='followerCount'>{user.followersCount}</span>\n          </div>\n          <Logout />\n        </div>\n        <div\n          className={menuOpen ? 'mobileMenuDDModal open' : 'mobileMenuDDModal'}\n          onClick={() => {\n            allowScroll(document)\n            openMenu(menuOpen = false)\n          }}\n        />\n      </React.Fragment>\n    )\n  } else {\n    return (\n      <div>\n      </div>\n    )\n\n  }\n}\n\nexport default MobileMenuDD;"]},"metadata":{},"sourceType":"module"}