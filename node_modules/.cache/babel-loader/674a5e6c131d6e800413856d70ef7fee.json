{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useMutation}from'@apollo/client';import{useHistory}from'react-router-dom';import Cookies from'js-cookie';import Mutations from'../../graphql/mutations';import Queries from'../../graphql/queries';import{jsx as _jsx}from\"react/jsx-runtime\";var LOGOUT_USER=Mutations.LOGOUT_USER;var IS_LOGGED_IN=Queries.IS_LOGGED_IN;var Logout=function Logout(_ref){var listener=_ref.listener;var history=useHistory();var _useMutation=useMutation(LOGOUT_USER,{update:function update(client,_ref2){var data=_ref2.data;client.writeQuery({query:IS_LOGGED_IN,data:{isLoggedIn:data.logoutUser.loggedIn}});},onCompleted:function onCompleted(){document.removeEventListener('click',listener,true);Cookies.set('auth-token','');Cookies.set('currentUser','');history.push('/');},onError:function onError(error){console.log(error);}}),_useMutation2=_slicedToArray(_useMutation,1),Logout=_useMutation2[0];return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"logout\",type:\"button\",onClick:function onClick(e){Logout({variables:{token:Cookies.get('auth-token')}});},children:\"Log out\"})});};export default Logout;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/auth/Logout.js"],"names":["React","useMutation","useHistory","Cookies","Mutations","Queries","LOGOUT_USER","IS_LOGGED_IN","Logout","listener","history","update","client","data","writeQuery","query","isLoggedIn","logoutUser","loggedIn","onCompleted","document","removeEventListener","set","push","onError","error","console","log","e","variables","token","get"],"mappings":"mKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CAEA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,C,2CACA,GAAQC,CAAAA,WAAR,CAAwBF,SAAxB,CAAQE,WAAR,CACA,GAAQC,CAAAA,YAAR,CAAyBF,OAAzB,CAAQE,YAAR,CAEA,GAAMC,CAAAA,MAAM,CAAG,qBAET,IADJC,CAAAA,QACI,MADJA,QACI,CACJ,GAAIC,CAAAA,OAAO,CAAGR,UAAU,EAAxB,CAEA,iBAAmBD,WAAW,CAACK,WAAD,CAAc,CAC1CK,MAD0C,iBACnCC,MADmC,OACjB,IAARC,CAAAA,IAAQ,OAARA,IAAQ,CACvBD,MAAM,CAACE,UAAP,CAAkB,CAChBC,KAAK,CAAER,YADS,CAEhBM,IAAI,CAAE,CACJG,UAAU,CAAEH,IAAI,CAACI,UAAL,CAAgBC,QADxB,CAFU,CAAlB,EAMD,CARyC,CAS1CC,WAT0C,uBAS5B,CACZC,QAAQ,CAACC,mBAAT,CAA6B,OAA7B,CAAsCZ,QAAtC,CAAgD,IAAhD,EACAN,OAAO,CAACmB,GAAR,CAAY,YAAZ,CAA0B,EAA1B,EACAnB,OAAO,CAACmB,GAAR,CAAY,aAAZ,CAA2B,EAA3B,EACAZ,OAAO,CAACa,IAAR,CAAa,GAAb,EACD,CAdyC,CAe1CC,OAf0C,kBAelCC,KAfkC,CAe3B,CACbC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAjByC,CAAd,CAA9B,8CAAQjB,MAAR,kBAoBA,mBACE,KAAC,KAAD,CAAO,QAAP,wBACE,eACE,SAAS,CAAC,QADZ,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAE,iBAAAoB,CAAC,CAAI,CACZpB,MAAM,CAAC,CACLqB,SAAS,CAAE,CACTC,KAAK,CAAE3B,OAAO,CAAC4B,GAAR,CAAY,YAAZ,CADE,CADN,CAAD,CAAN,CAKD,CATH,qBADF,EADF,CAiBD,CA1CD,CA4CA,cAAevB,CAAAA,MAAf","sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/client';\nimport { useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\n\nimport Mutations from '../../graphql/mutations';\nimport Queries from '../../graphql/queries';\nconst { LOGOUT_USER } = Mutations;\nconst { IS_LOGGED_IN } = Queries;\n\nconst Logout = ({\n  listener\n}) => {\n  let history = useHistory();\n\n  const [ Logout ] = useMutation(LOGOUT_USER, {\n    update(client, { data }) {\n      client.writeQuery({\n        query: IS_LOGGED_IN,\n        data: {\n          isLoggedIn: data.logoutUser.loggedIn,\n        }\n      })\n    },\n    onCompleted() {\n      document.removeEventListener('click', listener, true)\n      Cookies.set('auth-token', '')\n      Cookies.set('currentUser', '')\n      history.push('/')\n    },\n    onError(error) {\n      console.log(error)\n    }\n  })\n\n  return (\n    <React.Fragment>\n      <button\n        className='logout'\n        type='button'\n        onClick={e => {\n          Logout({ \n            variables: { \n              token: Cookies.get('auth-token')\n            }\n          })\n        }}\n      >\n        Log out\n      </button>\n    </React.Fragment>\n  )\n}\n\nexport default Logout;"]},"metadata":{},"sourceType":"module"}