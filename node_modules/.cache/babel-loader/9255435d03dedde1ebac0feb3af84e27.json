{"ast":null,"code":"var _jsxFileName = \"/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/user/util/components/Email.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\nimport UserSettingsUtil from '../functions/user_settings_util.js';\nimport Queries from '../../../../graphql/queries.js';\nimport Mutations from '../../../../graphql/mutations.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  FETCH_USER\n} = Queries;\nconst {\n  UPDATE_USER_EMAIL\n} = Mutations;\nconst {\n  updateCacheUpdateEmail\n} = UserSettingsUtil;\n\nconst Email = ({\n  userEmail\n}) => {\n  _s();\n\n  let emailRef = useRef(userEmail);\n  let [active, setActive] = useState(false);\n  let [email, setEmail] = useState('');\n  let [password, setPassword] = useState('');\n  let [errorMessage, setError] = useState(null);\n  let [updateUserEmail] = useMutation(UPDATE_USER_EMAIL, {\n    update(client, {\n      data\n    }) {\n      const {\n        updateUserEmail\n      } = data;\n      var currentUser = Cookies.get('currentUser');\n      var query = FETCH_USER;\n      updateCacheUpdateEmail(client, updateUserEmail, currentUser, query);\n    },\n\n    onCompleted(data) {\n      emailRef.current = data.updateUserEmail.email;\n      resetInputs();\n      setActive(active = false);\n    },\n\n    onError(error) {\n      setError(errorMessage = error.message);\n    }\n\n  });\n\n  const resetInputs = () => {\n    setEmail(email = '');\n    setPassword(password = '');\n    setError(errorMessage = '');\n  };\n\n  if (active) {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"upload\",\n      onSubmit: e => {\n        e.preventDefault();\n        updateUserEmail({\n          variables: {\n            email: email,\n            password: password,\n            user: Cookies.get('currentUser')\n          }\n        });\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inputAndBtnContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: userEmail,\n          onChange: e => {\n            setEmail(email = e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"errMessage\",\n          children: errorMessage ? `${errorMessage}` : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Confirm password\",\n          value: password,\n          onChange: e => {\n            setPassword(password = e.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel\",\n            type: \"button\",\n            onClick: () => {\n              resetInputs();\n              setActive(active = false);\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"save\",\n            type: \"submit\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"settingContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: emailRef.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"editPostBtn\",\n        src: \"https://img.icons8.com/windows/64/000000/edit--v1.png\",\n        alt: \"\",\n        onClick: () => {\n          setActive(active = true);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(Email, \"hef9A+KM0epMqwfyB3jfzIYVp4E=\", false, function () {\n  return [useMutation];\n});\n\n_c = Email;\nexport default Email;\n\nvar _c;\n\n$RefreshReg$(_c, \"Email\");","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/user/util/components/Email.js"],"names":["React","useState","useRef","useMutation","Cookies","UserSettingsUtil","Queries","Mutations","FETCH_USER","UPDATE_USER_EMAIL","updateCacheUpdateEmail","Email","userEmail","emailRef","active","setActive","email","setEmail","password","setPassword","errorMessage","setError","updateUserEmail","update","client","data","currentUser","get","query","onCompleted","current","resetInputs","onError","error","message","e","preventDefault","variables","user","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport UserSettingsUtil from '../functions/user_settings_util.js'\n\nimport Queries from '../../../../graphql/queries.js';\nimport Mutations from '../../../../graphql/mutations.js';\nconst { FETCH_USER } = Queries;\nconst { UPDATE_USER_EMAIL } = Mutations;\nconst { updateCacheUpdateEmail } = UserSettingsUtil;\n\nconst Email = ({\n  userEmail\n}) => {\n  let emailRef = useRef(userEmail)\n  let [active, setActive] = useState(false);\n  let [email, setEmail] = useState('');\n  let [password, setPassword] = useState('');\n  let [errorMessage, setError] = useState(null);\n\n  let [updateUserEmail] = useMutation(UPDATE_USER_EMAIL, {\n    update(client, { data }) {\n      const { updateUserEmail } = data;\n      var currentUser = Cookies.get('currentUser')\n      var query = FETCH_USER\n      \n      updateCacheUpdateEmail(client, updateUserEmail, currentUser, query)\n    },\n    onCompleted(data) {\n      emailRef.current = data.updateUserEmail.email\n      resetInputs()\n      setActive(active = false)\n    },\n    onError(error) {\n      setError(errorMessage = error.message)\n    }\n  })\n\n  const resetInputs = () => {\n    setEmail(email = '')\n    setPassword(password = '')\n    setError(errorMessage = '')\n  }\n\n  if (active) {\n    return (\n      <form\n        className='upload'\n        onSubmit={e => {\n          e.preventDefault()\n          updateUserEmail({\n            variables: {\n              email: email,\n              password: password,\n              user: Cookies.get('currentUser')\n            }\n          })\n        }}\n      >\n        <div\n          className='inputAndBtnContainer'\n        >\n          <input\n            value={userEmail}\n            onChange={e => {\n              setEmail(email = e.target.value)\n            }}\n          />\n          <p\n            className='errMessage'\n          >{errorMessage ? `${errorMessage}` : ''}</p>\n          <input\n            type='password'\n            placeholder='Confirm password'\n            value={password}\n            onChange={e => {\n              setPassword(password = e.target.value)\n            }}\n          />\n          <div>\n            <button\n              className='cancel'\n              type='button'\n              onClick={() => {\n                resetInputs()\n                setActive(active = false)\n              }}\n            >\n              Cancel\n            </button>\n            <button\n              className='save'\n              type='submit'\n            >\n              Save\n            </button>\n          </div>\n        </div>\n      </form>\n    )\n  } else {\n    return (\n      <div\n        className='settingContainer'\n      >\n        <p>{emailRef.current}</p>\n        <img\n          className='editPostBtn'\n          src=\"https://img.icons8.com/windows/64/000000/edit--v1.png\"\n          alt=''\n          onClick={() => {\n            setActive(active = true)\n          }}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Email;"]},"metadata":{},"sourceType":"module"}