{"ast":null,"code":"var _jsxFileName = \"/Users/johnobrien/Desktop/JOB_Developer/client/src/components/posts/util/components/social/Follow_Button.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useMutation, useQuery } from '@apollo/client';\nimport Cookies from 'js-cookie';\nimport Queries from '../../../../../graphql/queries.js';\nimport Mutations from '../../../../../graphql/mutations.js';\nimport UpdateCacheUtil from '../../../util/functions/update_cache_util.js';\nimport doesUserFollow from '../../functions/does_user_follow.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  FOLLOW,\n  UNFOLLOW\n} = Mutations;\nconst {\n  FETCH_USER\n} = Queries;\nconst {\n  followUpdate,\n  unfollowUpdate\n} = UpdateCacheUtil;\n\nconst FollowButton = ({\n  feed,\n  user,\n  tag\n}) => {\n  _s();\n\n  let [follow] = useMutation(FOLLOW, {\n    update(client, {\n      data\n    }) {\n      var {\n        follow\n      } = data;\n      followUpdate(client, follow, FETCH_USER, Cookies.get('currentUser'), user ? 'User' : 'Tag');\n    },\n\n    onError(error) {\n      console.log(error.message);\n    }\n\n  });\n  let [unfollow] = useMutation(UNFOLLOW, {\n    update(client, {\n      data\n    }) {\n      var {\n        unfollow\n      } = data;\n      unfollowUpdate(client, unfollow, FETCH_USER, Cookies.get('currentUser'), user ? 'User' : 'Tag');\n    },\n\n    onError(error) {\n      console.log(error.message);\n    }\n\n  });\n  let {\n    loading,\n    error,\n    data: currentUser\n  } = useQuery(FETCH_USER, {\n    variables: {\n      query: Cookies.get('currentUser')\n    }\n  });\n  if (loading) return 'Loading...';\n  if (error) return `Error: ${error}`;\n\n  if (tag) {\n    if (doesUserFollow(currentUser.user, user, tag)) {\n      return /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            unfollow({\n              variables: {\n                user: Cookies.get('currentUser'),\n                item: user ? user._id : tag._id\n              }\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Unfollow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(React.Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            e.preventDefault();\n            follow({\n              variables: {\n                user: Cookies.get('currentUser'),\n                item: user ? user._id : tag._id,\n                itemKind: user ? 'User' : 'Tag'\n              }\n            });\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this);\n    }\n  } else {\n    if (currentUser.user.blogName !== user.blogName) {\n      if (doesUserFollow(currentUser.user, user, tag)) {\n        return /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => {\n              e.preventDefault();\n              unfollow({\n                variables: {\n                  user: Cookies.get('currentUser'),\n                  item: user ? user._id : tag._id\n                }\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Unfollow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => {\n              e.preventDefault();\n              follow({\n                variables: {\n                  user: Cookies.get('currentUser'),\n                  item: user ? user._id : tag._id,\n                  itemKind: user ? 'User' : 'Tag'\n                }\n              });\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              children: \"Follow\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this);\n      }\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this);\n    }\n  }\n};\n\n_s(FollowButton, \"unDCwiEF/C6QvdZOBlAz5Et//vA=\", false, function () {\n  return [useMutation, useMutation, useQuery];\n});\n\n_c = FollowButton;\nexport default FollowButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"FollowButton\");","map":{"version":3,"sources":["/Users/johnobrien/Desktop/JOB_Developer/client/src/components/posts/util/components/social/Follow_Button.js"],"names":["React","useMutation","useQuery","Cookies","Queries","Mutations","UpdateCacheUtil","doesUserFollow","FOLLOW","UNFOLLOW","FETCH_USER","followUpdate","unfollowUpdate","FollowButton","feed","user","tag","follow","update","client","data","get","onError","error","console","log","message","unfollow","loading","currentUser","variables","query","e","preventDefault","item","_id","itemKind","blogName"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useMutation, useQuery } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport Queries from '../../../../../graphql/queries.js';\nimport Mutations from '../../../../../graphql/mutations.js';\nimport UpdateCacheUtil from '../../../util/functions/update_cache_util.js';\nimport doesUserFollow from '../../functions/does_user_follow.js';\nconst { FOLLOW, UNFOLLOW } = Mutations;\nconst { FETCH_USER } = Queries;\nconst { followUpdate, unfollowUpdate } = UpdateCacheUtil;\n\nconst FollowButton = ({\n  feed,\n  user,\n  tag,\n}) => {\n  let [follow] = useMutation(FOLLOW, {\n    update(client, { data }) {\n      var { follow } = data\n      \n      followUpdate(client, follow, FETCH_USER, Cookies.get('currentUser'), user ? 'User' : 'Tag')\n    },\n    onError(error) {\n      console.log(error.message)\n    }\n  });\n\n  let [unfollow] = useMutation(UNFOLLOW, {\n    update(client, { data }) {\n      var { unfollow } = data\n      \n      unfollowUpdate(client, unfollow, FETCH_USER, Cookies.get('currentUser'), user ? 'User' : 'Tag')\n    },\n    onError(error) {\n      console.log(error.message)\n    }\n  });\n\n  let { loading, error, data: currentUser } = useQuery(FETCH_USER, {\n    variables: {\n      query: Cookies.get('currentUser')\n    }\n  })\n\n  if (loading) return 'Loading...';\n  if (error) return `Error: ${error}`;\n\n  if (tag) {\n    if (doesUserFollow(currentUser.user, user, tag)) {\n      return (\n        <React.Fragment>\n          <form\n            onSubmit={e => {\n              e.preventDefault();\n              unfollow({\n                variables: {\n                  user: Cookies.get('currentUser'),\n                  item: user ? user._id : tag._id\n                }\n              })\n            }}\n          >\n            <button type='submit'>Unfollow</button>\n          </form>\n        </React.Fragment>\n      )\n    } else {\n      return (\n        <React.Fragment>\n          <form\n            onSubmit={e => {\n              e.preventDefault();\n              follow({\n                variables: {\n                  user: Cookies.get('currentUser'),\n                  item: user ? user._id : tag._id,\n                  itemKind: user ? 'User' : 'Tag'\n                }\n              })\n            }}\n          >\n            <button type='submit'>Follow</button>\n          </form>\n        </React.Fragment>\n      )\n    }\n  } else {\n    if (currentUser.user.blogName !== user.blogName) {\n      if (doesUserFollow(currentUser.user, user, tag)) {\n        return (\n          <React.Fragment>\n            <form\n              onSubmit={e => {\n                e.preventDefault();\n                unfollow({\n                  variables: {\n                    user: Cookies.get('currentUser'),\n                    item: user ? user._id : tag._id\n                  }\n                })\n              }}\n            >\n              <button type='submit'>Unfollow</button>\n            </form>\n          </React.Fragment>\n        )\n      } else {\n        return (\n          <React.Fragment>\n            <form\n              onSubmit={e => {\n                e.preventDefault();\n                follow({\n                  variables: {\n                    user: Cookies.get('currentUser'),\n                    item: user ? user._id : tag._id,\n                    itemKind: user ? 'User' : 'Tag'\n                  }\n                })\n              }}\n            >\n              <button type='submit'>Follow</button>\n            </form>\n          </React.Fragment>\n        )\n      }\n    } else {\n      return (\n        <div>\n        </div>\n      )\n    }\n  }\n}\n\nexport default FollowButton;"]},"metadata":{},"sourceType":"module"}