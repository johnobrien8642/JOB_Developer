{"ast":null,"code":"import _slicedToArray from\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useMutation}from'@apollo/client';import Cookies from'js-cookie';import Mutations from'../../../../graphql/mutations.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DELETE_MY_ACCOUNT=Mutations.DELETE_MY_ACCOUNT;var DeleteMyAccount=function DeleteMyAccount(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),askToConfirm=_useState6[0],confirmDelete=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setError=_useState8[1];var _useMutation=useMutation(DELETE_MY_ACCOUNT,{onCompleted:function onCompleted(data){resetInputs();setActive(active=false);window.location.reload();},onError:function onError(error){console.log(error);setError(errorMessage=error.message);}}),_useMutation2=_slicedToArray(_useMutation,1),deleteMyAccount=_useMutation2[0];var resetInputs=function resetInputs(){setPassword(password='');confirmDelete(askToConfirm=false);setError(errorMessage='');};if(active){return/*#__PURE__*/_jsxs(\"div\",{className:\"deleteMyAcct\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm password...\",value:password,onChange:function onChange(e){setPassword(password=e.target.value);}}),/*#__PURE__*/_jsx(\"p\",{children:errorMessage?\"\".concat(errorMessage):''}),/*#__PURE__*/_jsxs(\"div\",{className:\"deleteOrCancelContainer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"save\",type:\"button\",onClick:function onClick(){if(password){setActive(active=false);confirmDelete(askToConfirm=true);}else{setError(errorMessage='You must enter your password');}},children:\"Delete My Account\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",type:\"button\",onClick:function onClick(){setActive(active=false);},children:\"Cancel\"})]})]});}else if(askToConfirm){return/*#__PURE__*/_jsxs(\"div\",{className:\"deleteMyAcct confirm\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"confirmDelete\",onClick:function onClick(){deleteMyAccount({variables:{password:password,query:Cookies.get('currentUser'),token:Cookies.get('auth-token')}});},children:[/*#__PURE__*/_jsx(\"span\",{children:\"Delete my account\"}),/*#__PURE__*/_jsx(\"span\",{children:\"(This action cannot be undone)\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",type:\"button\",onClick:function onClick(){setPassword(password='');confirmDelete(askToConfirm=false);setActive(active=false);},children:\"Cancel\"})]});}else{return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"button\",{className:\"deleteMyAcctBtn\",onClick:function onClick(){setActive(active=true);confirmDelete(askToConfirm=true);},children:\"Delete My Account\"})});}};export default DeleteMyAccount;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/src/components/user/util/components/Delete_My_Account.js"],"names":["React","useState","useMutation","Cookies","Mutations","DELETE_MY_ACCOUNT","DeleteMyAccount","active","setActive","password","setPassword","askToConfirm","confirmDelete","errorMessage","setError","onCompleted","data","resetInputs","window","location","reload","onError","error","console","log","message","deleteMyAccount","e","target","value","variables","query","get","token"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useMutation } from '@apollo/client';\nimport Cookies from 'js-cookie';\n\nimport Mutations from '../../../../graphql/mutations.js';\nconst { DELETE_MY_ACCOUNT } = Mutations;\n\nconst DeleteMyAccount = () => {\n  let [active, setActive] = useState(false);\n  let [password, setPassword] = useState('');\n  let [askToConfirm, confirmDelete] = useState(false)\n  let [errorMessage, setError] = useState(null)\n\n  let [deleteMyAccount] = useMutation(DELETE_MY_ACCOUNT, {\n    onCompleted(data) {\n      resetInputs();\n      setActive(active = false);\n      window.location.reload();\n    },\n    onError(error) {\n      console.log(error)\n      setError(errorMessage = error.message)\n    }\n  })\n\n  const resetInputs = () => {\n    setPassword(password = '')\n    confirmDelete(askToConfirm = false)\n    setError(errorMessage = '')\n  }\n\n  if (active) {\n    return (\n      <div\n        className='deleteMyAcct'\n      >\n        <input\n          type='password'\n          placeholder='Confirm password...'\n          value={password}\n          onChange={e => {\n            setPassword(password = e.target.value)\n          }}\n        />\n  \n        <p>{errorMessage ? `${errorMessage}` : ''}</p>\n  \n        <div\n          className='deleteOrCancelContainer'\n        >\n          <button\n            className='save'\n            type='button'\n            onClick={() => {\n              if (password) {\n                setActive(active = false)\n                confirmDelete(askToConfirm = true)\n              } else {\n                setError(errorMessage = 'You must enter your password')\n              }\n            }}\n          >\n            Delete My Account\n          </button>\n          <button\n            className='cancel'\n            type='button'\n            onClick={() => {\n              setActive(active = false)\n            }}          \n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    )\n  } else if (askToConfirm) {\n    return (\n      <div\n        className='deleteMyAcct confirm'\n      >\n        <button\n          className='confirmDelete'\n          onClick={() => {\n            deleteMyAccount({\n              variables: {\n                password: password,\n                query: Cookies.get('currentUser'),\n                token: Cookies.get('auth-token')\n              }\n            })\n          }}\n        >\n          <span>Delete my account</span> \n          <span>(This action cannot be undone)</span>\n        </button>\n        <button\n          className='cancel'\n          type='button'\n          onClick={() => {\n            setPassword(password = '')\n            confirmDelete(askToConfirm = false)\n            setActive(active = false)\n          }}\n        >\n          Cancel\n        </button>\n      </div>\n    )\n  } else {\n    return (\n      <React.Fragment>\n        <button\n          className='deleteMyAcctBtn'\n          onClick={() => {\n            setActive(active = true)\n            confirmDelete(askToConfirm = true)\n          }}\n        >\n          Delete My Account\n        </button>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default DeleteMyAccount;"]},"metadata":{},"sourceType":"module"}