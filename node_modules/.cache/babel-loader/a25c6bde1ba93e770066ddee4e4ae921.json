{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _inherits = require(\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar initDebug = require(\"debug\");\n\nvar Token = require(\"token-types\");\n\nvar MpcSv8Parser_1 = require(\"./sv8/MpcSv8Parser\");\n\nvar MpcSv7Parser_1 = require(\"./sv7/MpcSv7Parser\");\n\nvar AbstractID3Parser_1 = require(\"../id3v2/AbstractID3Parser\");\n\nvar debug = initDebug('music-metadata:parser:musepack');\n\nvar MusepackParser = /*#__PURE__*/function (_AbstractID3Parser_1$) {\n  _inherits(MusepackParser, _AbstractID3Parser_1$);\n\n  var _super = _createSuper(MusepackParser);\n\n  function MusepackParser() {\n    _classCallCheck(this, MusepackParser);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(MusepackParser, [{\n    key: \"_parse\",\n    value: function () {\n      var _parse2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var signature, mpcParser;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.tokenizer.peekToken(new Token.StringType(3, 'binary'));\n\n              case 2:\n                signature = _context.sent;\n                _context.t0 = signature;\n                _context.next = _context.t0 === 'MP+' ? 6 : _context.t0 === 'MPC' ? 9 : 12;\n                break;\n\n              case 6:\n                debug('Musepack stream-version 7');\n                mpcParser = new MpcSv7Parser_1.MpcSv7Parser();\n                return _context.abrupt(\"break\", 13);\n\n              case 9:\n                debug('Musepack stream-version 8');\n                mpcParser = new MpcSv8Parser_1.MpcSv8Parser();\n                return _context.abrupt(\"break\", 13);\n\n              case 12:\n                throw new Error('Invalid Musepack signature prefix');\n\n              case 13:\n                mpcParser.init(this.metadata, this.tokenizer, this.options);\n                return _context.abrupt(\"return\", mpcParser.parse());\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _parse() {\n        return _parse2.apply(this, arguments);\n      }\n\n      return _parse;\n    }()\n  }]);\n\n  return MusepackParser;\n}(AbstractID3Parser_1.AbstractID3Parser);\n\nexports.default = MusepackParser;","map":{"version":3,"sources":["/Users/johnobrien/Desktop/Rumblr_PROD/client/node_modules/music-metadata/lib/musepack/index.js"],"names":["Object","defineProperty","exports","value","initDebug","require","Token","MpcSv8Parser_1","MpcSv7Parser_1","AbstractID3Parser_1","debug","MusepackParser","tokenizer","peekToken","StringType","signature","mpcParser","MpcSv7Parser","MpcSv8Parser","Error","init","metadata","options","parse","AbstractID3Parser","default"],"mappings":"AAAA;;;;;;;;;;;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,SAAS,GAAGC,OAAO,CAAC,OAAD,CAAzB;;AACA,IAAMC,KAAK,GAAGD,OAAO,CAAC,aAAD,CAArB;;AACA,IAAME,cAAc,GAAGF,OAAO,CAAC,oBAAD,CAA9B;;AACA,IAAMG,cAAc,GAAGH,OAAO,CAAC,oBAAD,CAA9B;;AACA,IAAMI,mBAAmB,GAAGJ,OAAO,CAAC,4BAAD,CAAnC;;AACA,IAAMK,KAAK,GAAGN,SAAS,CAAC,gCAAD,CAAvB;;IACMO,c;;;;;;;;;;;;;;6EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAC4B,KAAKC,SAAL,CAAeC,SAAf,CAAyB,IAAIP,KAAK,CAACQ,UAAV,CAAqB,CAArB,EAAwB,QAAxB,CAAzB,CAD5B;;AAAA;AACUC,gBAAAA,SADV;AAAA,8BAGYA,SAHZ;AAAA,gDAIa,KAJb,uBASa,KATb;AAAA;;AAAA;AAKYL,gBAAAA,KAAK,CAAC,2BAAD,CAAL;AACAM,gBAAAA,SAAS,GAAG,IAAIR,cAAc,CAACS,YAAnB,EAAZ;AANZ;;AAAA;AAUYP,gBAAAA,KAAK,CAAC,2BAAD,CAAL;AACAM,gBAAAA,SAAS,GAAG,IAAIT,cAAc,CAACW,YAAnB,EAAZ;AAXZ;;AAAA;AAAA,sBAekB,IAAIC,KAAJ,CAAU,mCAAV,CAflB;;AAAA;AAkBIH,gBAAAA,SAAS,CAACI,IAAV,CAAe,KAAKC,QAApB,EAA8B,KAAKT,SAAnC,EAA8C,KAAKU,OAAnD;AAlBJ,iDAmBWN,SAAS,CAACO,KAAV,EAnBX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;;EADyBd,mBAAmB,CAACe,iB;;AAuBjDtB,OAAO,CAACuB,OAAR,GAAkBd,cAAlB","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst initDebug = require(\"debug\");\r\nconst Token = require(\"token-types\");\r\nconst MpcSv8Parser_1 = require(\"./sv8/MpcSv8Parser\");\r\nconst MpcSv7Parser_1 = require(\"./sv7/MpcSv7Parser\");\r\nconst AbstractID3Parser_1 = require(\"../id3v2/AbstractID3Parser\");\r\nconst debug = initDebug('music-metadata:parser:musepack');\r\nclass MusepackParser extends AbstractID3Parser_1.AbstractID3Parser {\r\n    async _parse() {\r\n        const signature = await this.tokenizer.peekToken(new Token.StringType(3, 'binary'));\r\n        let mpcParser;\r\n        switch (signature) {\r\n            case 'MP+': {\r\n                debug('Musepack stream-version 7');\r\n                mpcParser = new MpcSv7Parser_1.MpcSv7Parser();\r\n                break;\r\n            }\r\n            case 'MPC': {\r\n                debug('Musepack stream-version 8');\r\n                mpcParser = new MpcSv8Parser_1.MpcSv8Parser();\r\n                break;\r\n            }\r\n            default: {\r\n                throw new Error('Invalid Musepack signature prefix');\r\n            }\r\n        }\r\n        mpcParser.init(this.metadata, this.tokenizer, this.options);\r\n        return mpcParser.parse();\r\n    }\r\n}\r\nexports.default = MusepackParser;\r\n"]},"metadata":{},"sourceType":"script"}